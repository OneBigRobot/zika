var iframe = require('./iframe.js');
var twitterFollowButtonModules = require('./twitter-follow.js');
var pbHeaderModule = require('./pbHeader.js');
var pbSocialTools = require('./pbSocialTools.js');

//Adds the return url to the subscribe action
var setupSubscribeBtn = function(){
  var $subscribe = $('#nav-subscribe'),
    href =  $subscribe.attr('href'),
    pageLocation = window.encodeURI(window.location.href);
   $subscribe.attr('href', href + pageLocation);
};
//Drop in your init file
setupSubscribeBtn();

/**************************************
        General
**************************************/
var getOffset = function(el) {
  el = el.getBoundingClientRect();
  return {
    left: el.left + window.scrollX,
    top: el.top + window.scrollY
  }
}

var shuffle = function(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
}

/**************************************
        Values
**************************************/
mosquitosPositionsPhase1 = new Array(
  new Array({x:0.8, y:0.2}, {x:0.78, y:0.18}, {x:0.74, y:0.2}, {x:0.72, y:0.21}, {x:0.71, y:0.24}, {x:0.73, y:0.26}, {x:0.76, y:0.23}, {x:0.79, y:0.2}),
  new Array({x:0.6, y:0.3}, {x:0.55, y:0.22}, {x:0.62, y:0.24}, {x:0.68, y:0.2}, {x:0.71, y:0.18}, {x:0.68, y:0.15}, {x:0.64, y:0.18}, {x:0.63, y:0.22}, {x:0.62, y:0.26}, {x:0.61, y:0.28}),
  new Array({x:0.49, y:0.14}, {x:0.54, y:0.16}, {x:0.56, y:0.14}, {x:0.54, y:0.18}, {x:0.56, y:0.22}, {x:0.52, y:0.18}, {x:0.5, y:0.14}, {x:0.47, y:0.12}),
  new Array({x:0.55, y:0.31}, {x:0.58, y:0.28}, {x:0.64, y:0.26}, {x:0.72, y:0.22}, {x:0.8, y:0.18}, {x:0.73, y:0.22}, {x:0.68, y:0.24}, {x:0.62, y:0.28}),
  new Array({x:0.75, y:0.16}, {x:0.72, y:0.18}, {x:0.68, y:0.22}, {x:0.62, y:0.26}, {x:0.55, y:0.3}, {x:0.62, y:0.26}, {x:0.68, y:0.22}, {x:0.72, y:0.18}),
  new Array({x:0.8127696289905091, y:0.1458153580672994},{x:0.7618636755823986, y:0.1371872303710095},{x:0.6937014667817084, y:0.13459879206212252},{x:0.5858498705780846, y:0.14322691975841242},{x:0.5185504745470233, y:0.16997411561691114},{x:0.5099223468507333, y:0.2079378774805867},{x:0.5599654874892148, y:0.23209663503019845},{x:0.637618636755824, y:0.21484037963761865},{x:0.7066436583261432, y:0.21397756686798963},{x:0.7903364969801553, y:0.2355478861087144},{x:0.8395168248490078, y:0.21138912855910266},{x:0.8395168248490078, y:0.19327006039689387}),
  new Array({x:0.4909404659188956, y:0.31924072476272647},{x:0.5030198446937014, y:0.2786885245901639},{x:0.5754961173425367, y:0.1993097497842968},{x:0.6384814495254529, y:0.13805004314063848},{x:0.6781708369283865, y:0.09663503019844694},{x:0.7144089732528042, y:0.11130284728213978},{x:0.7480586712683348, y:0.17601380500431407},{x:0.8050043140638481, y:0.26833477135461603},{x:0.7920621225194133, y:0.3201035375323555},{x:0.6557377049180327, y:0.33045729076790337},{x:0.545297670405522, y:0.3175150992234685}),
  new Array({x:0.6074201898188093, y:0.11216566005176877},{x:0.5823986194995686, y:0.14754098360655737},{x:0.546160483175151, y:0.2200172562553926},{x:0.5530629853321829, y:0.3088869715271786},{x:0.6419327006039689, y:0.3071613459879206},{x:0.6721311475409836, y:0.2372735116479724},{x:0.6962899050905953, y:0.14926660914581535},{x:0.7532355478861087, y:0.1458153580672994},{x:0.7368421052631579, y:0.28817946505608283},{x:0.8032786885245902, y:0.3330457290767903},{x:0.822260569456428, y:0.2269197584124245},{x:0.7394305435720449, y:0.12079378774805867},{x:0.6781708369283865, y:0.1182053494391717},{x:0.6056945642795514, y:0.13114754098360656}),
  new Array({x:0.5168248490077653, y:0.270060396893874},{x:0.5133735979292493, y:0.1906816220880069},{x:0.5625539257981018, y:0.13114754098360656},{x:0.6289905090595341, y:0.09836065573770492},{x:0.7040552200172563, y:0.09232096635030199},{x:0.7515099223468508, y:0.13114754098360656},{x:0.7894736842105263, y:0.18723037100949094},{x:0.8533218291630716, y:0.25625539257981017}),
  new Array({x:0.8274374460742019, y:0.13891285591026747},{x:0.7610008628127696, y:0.10094909404659189},{x:0.7057808455565142, y:0.07679033649698015},{x:0.630716134598792, y:0.07592752372735116},{x:0.548748921484038, y:0.091458153580673},{x:0.49611734253666956, y:0.13201035375323555},{x:0.48058671268334774, y:0.17515099223468508},{x:0.5107851596203624, y:0.21570319240724764},{x:0.5668679896462467, y:0.25625539257981017},{x:0.6600517687661778, y:0.30371009490940465},{x:0.7351164797238999, y:0.30457290767903367},{x:0.7842968075927523, y:0.32182916307161347},{x:0.8403796376186368, y:0.3114754098360656},{x:0.8360655737704918, y:0.19585849870578084}),
  new Array({x:0.4797238999137187, y:0.30198446937014667},{x:0.4909404659188956, y:0.2079378774805867},{x:0.5323554788610871, y:0.12424503882657463},{x:0.639344262295082, y:0.08886971527178603},{x:0.7739430543572045, y:0.0992234685073339},{x:0.8472821397756687, y:0.1544434857635893},{x:0.8705780845556514, y:0.27092320966350303},{x:0.8446937014667817, y:0.3244176013805004},{x:0.728213977566868, y:0.3459879206212252},{x:0.5323554788610871, y:0.34081104400345125})
);
mosquitosPositionsPhase2 = new Array(
  //new Array({x:0.48228813559322037, y:0.2016949152542373},{x:0.4204237288135594, y:0.20423728813559322},{x:0.37466101694915255, y:0.2059322033898305},{x:0.3026271186440678, y:0.2076271186440678},{x:0.28991525423728814, y:0.21525423728813559},{x:0.2848305084745763, y:0.22796610169491524},{x:0.28228813559322036, y:0.25169491525423726},{x:0.27466101694915257, y:0.2669491525423729},{x:0.2560169491525424, y:0.26949152542372884},{x:0.07211864406779663, y:0.27203389830508473},{x:0.05516949152542373, y:0.2805084745762712},{x:0.050084745762711866, y:0.30338983050847457},{x:0.047542372881355946, y:0.4245762711864407},{x:0.049237288135593235, y:0.49830508474576274},{x:0.05686440677966102, y:0.5135593220338983},{x:0.06957627118644068, y:0.5186440677966102},{x:0.09245762711864407, y:0.5211864406779662},{x:0.10940677966101696, y:0.5262711864406779},{x:0.11449152542372883, y:0.5423728813559322},{x:0.11449152542372883, y:0.559322033898305})
  new Array({x:0.4938983050847458, y:0.21440677966101696},{x:0.3803389830508474, y:0.21101694915254238},{x:0.348135593220339, y:0.21271186440677967},{x:0.3235593220338983, y:0.21610169491525424},{x:0.3142372881355932, y:0.22033898305084745},{x:0.30830508474576274, y:0.2305084745762712},{x:0.3057627118644068, y:0.2483050847457627},{x:0.30406779661016947, y:0.2627118644067797},{x:0.298135593220339, y:0.27372881355932205},{x:0.2794915254237288, y:0.2830508474576271},{x:0.08627118644067794, y:0.2830508474576271},{x:0.06762711864406779, y:0.288135593220339},{x:0.05830508474576271, y:0.29915254237288136},{x:0.0540677966101695, y:0.5177966101694915},{x:0.06169491525423726, y:0.5372881355932203},{x:0.07610169491525426, y:0.5457627118644067},{x:0.11254237288135593, y:0.5466101694915254},{x:0.1235593220338983, y:0.5533898305084746},{x:0.12610169491525425, y:0.5711864406779661},{x:0.12525423728813562, y:0.588135593220339})
);
mosquitosPositionsPhase2S = new Array(
  //new Array({x:0.48228813559322037, y:0.2016949152542373},{x:0.4204237288135594, y:0.20423728813559322},{x:0.37466101694915255, y:0.2059322033898305},{x:0.3026271186440678, y:0.2076271186440678},{x:0.28991525423728814, y:0.21525423728813559},{x:0.2848305084745763, y:0.22796610169491524},{x:0.28228813559322036, y:0.25169491525423726},{x:0.27466101694915257, y:0.2669491525423729},{x:0.2560169491525424, y:0.26949152542372884},{x:0.07211864406779663, y:0.27203389830508473},{x:0.05516949152542373, y:0.2805084745762712},{x:0.050084745762711866, y:0.30338983050847457},{x:0.047542372881355946, y:0.4245762711864407},{x:0.049237288135593235, y:0.49830508474576274},{x:0.05686440677966102, y:0.5135593220338983},{x:0.06957627118644068, y:0.5186440677966102},{x:0.09245762711864407, y:0.5211864406779662},{x:0.10940677966101696, y:0.5262711864406779},{x:0.11449152542372883, y:0.5423728813559322},{x:0.11449152542372883, y:0.559322033898305})
  new Array({x:0.5013192612137203, y:0.4808707124010554},{x:0.4472295514511873, y:0.4782321899736148},{x:0.3891820580474934, y:0.47691292875989444},{x:0.316622691292876, y:0.4729551451187335},{x:0.2941952506596306, y:0.4821899736147757},{x:0.2783641160949868, y:0.5072559366754618},{x:0.2783641160949868, y:0.5270448548812665},{x:0.2717678100263852, y:0.5494722955145118},{x:0.21899736147757257, y:0.5560686015831134},{x:0.04221635883905013, y:0.5521108179419525},{x:0.025065963060686015, y:0.5626649076517151},{x:0.013192612137203167, y:0.5837730870712401},{x:0.010554089709762533, y:0.6378627968337731},{x:0.0158311345646438, y:0.6800791556728232},{x:0.03430079155672823, y:0.6840369393139841},{x:0.15963060686015831, y:0.6866754617414248},{x:0.1741424802110818, y:0.695910290237467},{x:0.18601583113456466, y:0.7117414248021108},{x:0.18997361477572558, y:0.7315303430079155},{x:0.20448548812664907, y:0.7447229551451188},{x:0.737467018469657, y:0.7447229551451188},{x:0.945910290237467, y:0.75},{x:1.116094986807388, y:0.746042216358839},{x:1.1794195250659631, y:0.7354881266490765},{x:1.1899736147757256, y:0.7170184696569921},{x:1.1899736147757256, y:0.6734828496042217},{x:1.187335092348285, y:0.6207124010554089})
);
mosquitosPositionsPhase3 = new Array(
  new Array({x:0.11, y:0.62}, {x:0.12, y:0.68}, {x:0.13, y:0.72}, {x:0.14, y:0.68}, {x:0.13, y:0.62}, {x:0.11, y:0.6}),
  new Array({x:0.08, y:0.6}, {x:0.09, y:0.58}, {x:0.1, y:0.52}, {x:0.12, y:0.58}, {x:0.13, y:0.64}, {x:0.09, y:0.62}),
  new Array({x:0.13, y:0.68}, {x:0.12, y:0.62}, {x:0.11, y:0.58}, {x:0.12, y:0.57}, {x:0.13, y:0.58}, {x:0.11, y:0.62}),
  new Array({x:0.12796610169491526, y:0.6194915254237288},{x:0.11949152542372882, y:0.6322033898305085},{x:0.11016949152542373, y:0.6542372881355932},{x:0.1, y:0.6796610169491526},{x:0.10677966101694915, y:0.7101694915254237},{x:0.13559322033898305, y:0.7110169491525423},{x:0.14576271186440679, y:0.6813559322033899},{x:0.14661016949152542, y:0.6457627118644068},{x:0.1423728813559322, y:0.5822033898305085},{x:0.13389830508474576, y:0.559322033898305},{x:0.10762711864406779, y:0.5669491525423729},{x:0.10932203389830508, y:0.5991525423728814}),
  new Array({x:0.14491525423728813, y:0.5796610169491525},{x:0.14915254237288136, y:0.5601694915254237},{x:0.12796610169491526, y:0.55},{x:0.11271186440677966, y:0.5567796610169492},{x:0.13644067796610168, y:0.5991525423728814},{x:0.11610169491525424, y:0.6245762711864407},{x:0.10338983050847457, y:0.6635593220338983},{x:0.12033898305084746, y:0.6754237288135593},{x:0.14576271186440679, y:0.6949152542372882},{x:0.12627118644067797, y:0.7152542372881356},{x:0.10762711864406779, y:0.688135593220339},{x:0.12457627118644068, y:0.6288135593220339},{x:0.13813559322033897, y:0.5864406779661017})
);
mosquitosPositionsPhase3S = new Array(
  new Array({x:1.168421052631579, y:0.6269736842105263},{x:1.2, y:0.6269736842105263},{x:1.225, y:0.6125},{x:1.2026315789473685, y:0.6059210526315789},{x:1.1710526315789473, y:0.6046052631578948},{x:1.1592105263157895, y:0.5901315789473685},{x:1.2052631578947368, y:0.5888157894736842},{x:1.2236842105263157, y:0.5743421052631579},{x:1.2197368421052632, y:0.5625},{x:1.194736842105263, y:0.5546052631578947},{x:1.1710526315789473, y:0.5611842105263158},{x:1.1697368421052632, y:0.5796052631578947},{x:1.2223684210526315, y:0.5888157894736842},{x:1.2157894736842105, y:0.6098684210526316},{x:1.1921052631578948, y:0.6203947368421052}),
  new Array({x:1.2144736842105264, y:0.6177631578947368},{x:1.2276315789473684, y:0.569078947368421},{x:1.2052631578947368, y:0.5598684210526316},{x:1.1710526315789473, y:0.5717105263157894},{x:1.1552631578947368, y:0.6006578947368421},{x:1.1671052631578946, y:0.6256578947368421},{x:1.2, y:0.6230263157894737},{x:1.2171052631578947, y:0.5993421052631579},{x:1.2078947368421054, y:0.5822368421052632},{x:1.1789473684210525, y:0.5848684210526316},{x:1.1710526315789473, y:0.6085526315789473},{x:1.1907894736842106, y:0.6164473684210526},{x:1.2210526315789474, y:0.6164473684210526})
);
mosquitosPositionsPhase4 = new Array(
  new Array({x:0.12610169491525425, y:0.7533898305084745},{x:0.12949152542372883, y:0.7745762711864407},{x:0.13033898305084746, y:0.8025423728813559},{x:0.12949152542372883, y:0.8322033898305085})
);
mosquitosPositionsPhase4S = new Array(
  new Array({x:1.1932668329177056, y:0.5461346633416458},{x:1.1907730673316708, y:0.527431421446384},{x:1.1907730673316708, y:0.5037406483790524},{x:1.1945137157107233, y:0.486284289276808},{x:1.1932668329177056, y:0.47256857855361595})
);
mosquitosPositionsPhase5 = new Array(
  new Array({x:0.11, y:0.82}, {x:0.12, y:0.88}, {x:0.13, y:0.92}, {x:0.14, y:0.88}, {x:0.13, y:0.82}, {x:0.11, y:0.8}),
  new Array({x:0.08, y:0.8}, {x:0.09, y:0.78}, {x:0.1, y:0.82}, {x:0.12, y:0.78}, {x:0.13, y:0.84}, {x:0.09, y:0.82}),
  new Array({x:0.13, y:0.88}, {x:0.12, y:0.82}, {x:0.11, y:0.78}, {x:0.12, y:0.77}, {x:0.13, y:0.78}, {x:0.11, y:0.82}),
  new Array({x:0.14745762711864407, y:0.7694915254237288},{x:0.11694915254237288, y:0.7728813559322034},{x:0.09576271186440678, y:0.7813559322033898},{x:0.0847457627118644, y:0.8067796610169492},{x:0.1, y:0.8372881355932204},{x:0.13389830508474576, y:0.8533898305084746},{x:0.15169491525423728, y:0.838135593220339},{x:0.1635593220338983, y:0.8025423728813559}),
  new Array({x:0.1152542372881356, y:0.8508474576271187},{x:0.09067796610169492, y:0.8203389830508474},{x:0.09830508474576272, y:0.7957627118644067},{x:0.11271186440677966, y:0.7754237288135594},{x:0.13898305084745763, y:0.7796610169491526},{x:0.13559322033898305, y:0.8033898305084746},{x:0.14745762711864407, y:0.8271186440677966},{x:0.12627118644067797, y:0.8491525423728814})
);
mosquitosPositionsPhase5S = new Array(
  new Array({x:1.1770573566084788, y:0.47381546134663344},{x:1.1695760598503742, y:0.4613466334164589},{x:1.174563591022444, y:0.428927680798005},{x:1.2007481296758105, y:0.41271820448877805},{x:1.2094763092269327, y:0.39027431421446385},{x:1.2094763092269327, y:0.3690773067331671},{x:1.2032418952618453, y:0.3516209476309227},{x:1.1957605985037407, y:0.33541147132169574},{x:1.1845386533665836, y:0.33042394014962595},{x:1.1733167082294265, y:0.3491271820448878},{x:1.180798004987531, y:0.36783042394014964},{x:1.1957605985037407, y:0.4014962593516209},{x:1.1845386533665836, y:0.42144638403990026},{x:1.1957605985037407, y:0.4600997506234414},{x:1.180798004987531, y:0.47381546134663344}),
  new Array({x:1.2094763092269327, y:0.3092269326683292},{x:1.1845386533665836, y:0.314214463840399},{x:1.1733167082294265, y:0.33665835411471323},{x:1.1845386533665836, y:0.35785536159601},{x:1.1932668329177056, y:0.3778054862842893},{x:1.1795511221945136, y:0.40523690773067333},{x:1.1645885286783042, y:0.43266832917705733},{x:1.1645885286783042, y:0.45885286783042395},{x:1.1783042394014962, y:0.48129675810473815},{x:1.1982543640897756, y:0.48129675810473815},{x:1.2057356608478802, y:0.45760598503740646},{x:1.1957605985037407, y:0.4139650872817955},{x:1.2032418952618453, y:0.36159600997506236},{x:1.2082294264339153, y:0.3229426433915212})
);
mosquitosPositionsPhase6 = new Array(
  new Array({x:0.12949152542372883, y:0.8398305084745763},{x:0.12949152542372883, y:0.8872881355932203},{x:0.13033898305084746, y:0.9330508474576271},{x:0.12949152542372883, y:1.05},{x:0.13457627118644067, y:1.0627118644067797},{x:0.14644067796610172, y:1.0720338983050848},{x:0.27440677966101695, y:1.0686440677966103},{x:0.29135593220338984, y:1.0788135593220338},{x:0.3023728813559322, y:1.0991525423728814},{x:0.3057627118644068, y:1.126271186440678},{x:0.3201694915254237, y:1.1423728813559322},{x:0.4422033898305085, y:1.1415254237288135},{x:0.4616949152542373, y:1.1533898305084747},{x:0.46847457627118644, y:1.1703389830508475},{x:0.46762711864406775, y:1.2686440677966102},{x:0.4710169491525424, y:1.3025423728813559})
);
mosquitosPositionsPhase6S = new Array(
  new Array({x:1.185785536159601, y:0.26184538653366585},{x:1.1820448877805487, y:0.24189526184538654},{x:1.1645885286783042, y:0.23192019950124687},{x:1.1483790523690773, y:0.22942643391521197},{x:1.1246882793017456, y:0.23316708229426433},{x:1.1172069825436408, y:0.22194513715710723},{x:1.1134663341645885, y:0.1882793017456359},{x:1.112219451371571, y:0.14962593516209477},{x:1.1134663341645885, y:0.09476309226932668},{x:1.1209476309226933, y:0.07855361596009976},{x:1.1433915211970074, y:0.06982543640897755},{x:1.2331670822942644, y:0.06608478802992519},{x:1.486284289276808, y:0.06608478802992519},{x:1.5074812967581048, y:0.07107231920199501},{x:1.5174563591022443, y:0.08104738154613467},{x:1.5199501246882794, y:0.10224438902743142},{x:1.5311720698254363, y:0.11471321695760599},{x:1.5785536159600997, y:0.12219451371571072},{x:1.8815461346633418, y:0.12094763092269327},{x:2.1334164588528677, y:0.11845386533665836},{x:2.163341645885287, y:0.1259351620947631},{x:2.172069825436409, y:0.1433915211970075},{x:2.172069825436409, y:0.1571072319201995},{x:2.199501246882793, y:0.1770573566084788},{x:2.325436408977556, y:0.17581047381546136},{x:2.3516209476309227, y:0.185785536159601},{x:2.3603491271820447, y:0.20199501246882792},{x:2.361596009975062, y:0.23316708229426433},{x:2.376558603491272, y:0.25311720698254364},{x:2.403990024937656, y:0.2581047381546135},{x:2.5049875311720697, y:0.25311720698254364},{x:2.527431421446384, y:0.2655860349127182},{x:2.5386533665835413, y:0.2805486284289277},{x:2.539900249376559, y:0.36159600997506236},{x:2.539900249376559, y:0.4825436408977556},{x:2.552369077306733, y:0.5561097256857855})
);
mosquitosPositionsPhase7 = new Array(
  new Array({x:0.4101694915254237, y:1.188135593220339},{x:0.3822033898305085, y:1.2101694915254237},{x:0.37542372881355934, y:1.255084745762712},{x:0.39152542372881355, y:1.2923728813559323},{x:0.43728813559322033, y:1.3152542372881355},{x:0.4745762711864407, y:1.306779661016949},{x:0.5, y:1.276271186440678},{x:0.5059322033898305, y:1.2330508474576272},{x:0.46779661016949153, y:1.1838983050847458}),
  new Array({x:0.46016949152542375, y:1.2372881355932204},{x:0.47627118644067795, y:1.2584745762711864},{x:0.4728813559322034, y:1.3008474576271187},{x:0.42033898305084744, y:1.3084745762711865},{x:0.38813559322033897, y:1.2686440677966102},{x:0.40423728813559323, y:1.238135593220339},{x:0.45084745762711864, y:1.2627118644067796},{x:0.49491525423728816, y:1.244915254237288},{x:0.5084745762711864, y:1.2152542372881356},{x:0.47966101694915253, y:1.1813559322033897}),
  new Array({x:0.41271186440677965, y:1.1923728813559322},{x:0.4728813559322034, y:1.2},{x:0.5059322033898305, y:1.2483050847457626},{x:0.5033898305084745, y:1.2949152542372881},{x:0.43728813559322033, y:1.3},{x:0.3855932203389831, y:1.2847457627118644},{x:0.376271186440678, y:1.2423728813559323},{x:0.423728813559322, y:1.2474576271186442},{x:0.4652542372881356, y:1.2194915254237289},{x:0.41694915254237286, y:1.1872881355932203})
);
mosquitosPositionsPhase7S = new Array(
  new Array({x:2.53077975376197, y:0.5300957592339262},{x:2.506155950752394, y:0.5492476060191519},{x:2.488372093023256, y:0.5848153214774282},{x:2.488372093023256, y:0.6203830369357045},{x:2.5075239398084817, y:0.6450068399452804},{x:2.545827633378933, y:0.6504787961696307},{x:2.5718194254445965, y:0.6381668946648427},{x:2.584131326949384, y:0.5971272229822161},{x:2.5786593707250343, y:0.5533515731874145},{x:2.5499316005471955, y:0.5465116279069767},{x:2.5198358413132693, y:0.5588235294117647},{x:2.545827633378933, y:0.5779753761969905},{x:2.5540355677154585, y:0.6258549931600548},{x:2.5225718194254445, y:0.6395348837209303},{x:2.4829001367989054, y:0.6203830369357045},{x:2.491108071135431, y:0.5957592339261286},{x:2.560875512995896, y:0.5957592339261286},{x:2.560875512995896, y:0.5642954856361149},{x:2.53625170998632, y:0.5642954856361149},{x:2.4952120383036935, y:0.5601915184678523},{x:2.5198358413132693, y:0.5328317373461012},{x:2.5718194254445965, y:0.554719562243502},{x:2.5718194254445965, y:0.5984952120383037},{x:2.53077975376197, y:0.6217510259917921},{x:2.556771545827633, y:0.658686730506156},{x:2.5896032831737346, y:0.63406292749658},{x:2.5745554035567717, y:0.6094391244870041},{x:2.5170998632010946, y:0.594391244870041},{x:2.5225718194254445, y:0.5588235294117647},{x:2.5430916552667577, y:0.5533515731874145})
);
mosquitosPositionsPhase8 = new Array(
  new Array({x:0.5244915254237288, y:1.3542372881355933},{x:0.549915254237288, y:1.352542372881356},{x:0.5770338983050847, y:1.3533898305084746},{x:0.5880508474576271, y:1.3593220338983052},{x:0.5965254237288136, y:1.3703389830508474},{x:0.5956779661016949, y:1.3940677966101696},{x:0.5956779661016949, y:1.4466101694915254},{x:0.5982203389830509, y:1.4627118644067796},{x:0.6058474576271187, y:1.4720338983050847},{x:0.6295762711864408, y:1.4779661016949153},{x:0.6592372881355932, y:1.476271186440678},{x:0.666864406779661, y:1.4677966101694915},{x:0.6727966101694915, y:1.45},{x:0.6727966101694915, y:1.4033898305084747},{x:0.6711016949152542, y:1.3559322033898304},{x:0.6727966101694915, y:1.321186440677966},{x:0.6719491525423729, y:1.3084745762711865},{x:0.6744915254237287, y:1.297457627118644},{x:0.681271186440678, y:1.2872881355932204},{x:0.7075423728813559, y:1.2898305084745763},{x:0.7711016949152543, y:1.2889830508474576},{x:0.7838135593220339, y:1.2923728813559323},{x:0.7880508474576271, y:1.3016949152542372},{x:0.7888983050847458, y:1.3177966101694916},{x:0.7855084745762713, y:1.3559322033898304},{x:0.7880508474576271, y:1.4016949152542373},{x:0.7888983050847458, y:1.4559322033898305},{x:0.7922881355932203, y:1.4652542372881356},{x:0.8024576271186441, y:1.4720338983050847},{x:0.8414406779661017, y:1.476271186440678},{x:0.8804237288135592, y:1.476271186440678},{x:0.8982203389830508, y:1.4872881355932204},{x:0.902457627118644, y:1.5059322033898306},{x:0.9041525423728813, y:1.5703389830508474},{x:0.9033050847457627, y:1.616949152542373})
);
mosquitosPositionsPhase8S = new Array(
  new Array({x:2.5972568578553616, y:0.5910224438902744},{x:2.6334164588528677, y:0.5922693266832918},{x:2.6645885286783044, y:0.5897755610972568},{x:2.6770573566084788, y:0.6059850374064838},{x:2.683291770573566, y:0.6408977556109726},{x:2.6820448877805485, y:0.6795511221945137},{x:2.6820448877805485, y:0.7044887780548629},{x:2.6870324189526182, y:0.7144638403990025},{x:2.6957605985037407, y:0.7231920199501247},{x:2.733167082294264, y:0.729426433915212},{x:2.7531172069825436, y:0.7256857855361596},{x:2.7630922693266835, y:0.7182044887780549},{x:2.7693266832917707, y:0.7032418952618454},{x:2.7693266832917707, y:0.6658354114713217},{x:2.770573566084788, y:0.6321695760598504},{x:2.7718204488778055, y:0.5685785536159601},{x:2.770573566084788, y:0.543640897755611},{x:2.770573566084788, y:0.5224438902743143},{x:2.775561097256858, y:0.5149625935162094},{x:2.791770573566085, y:0.5149625935162094},{x:2.8603491271820447, y:0.5149625935162094},{x:2.8915211970074814, y:0.5199501246882793},{x:2.896508728179551, y:0.5386533665835411},{x:2.899002493765586, y:0.5773067331670823},{x:2.901496259351621, y:0.6309226932668329},{x:2.8977556109725686, y:0.6508728179551122},{x:2.8977556109725686, y:0.683291770573566},{x:2.9027431421446384, y:0.7144638403990025},{x:2.9164588528678306, y:0.7244389027431422},{x:2.9463840399002494, y:0.7244389027431422},{x:3.201995012468828, y:0.7231920199501247},{x:3.7281795511221945, y:0.7206982543640897},{x:3.9463840399002494, y:0.7231920199501247},{x:3.9650872817955114, y:0.7194513715710723},{x:3.9850374064837903, y:0.7057356608478803},{x:3.988778054862843, y:0.6882793017456359},{x:3.9925187032418954, y:0.6596009975062345},{x:3.9925187032418954, y:0.6396508728179551},{x:3.986284289276808, y:0.6221945137157108})
);
mosquitosPositionsPhase9 = new Array(
  new Array({x:0.8094237288135593, y:1.5180593220338983},{x:0.8280677966101695, y:1.5417881355932204},{x:0.8594237288135593, y:1.5553474576271187},{x:0.8797627118644068, y:1.5409406779661017},{x:0.8848474576271186, y:1.5265338983050847},{x:0.8772203389830509, y:1.5070423728813558},{x:0.8577288135593221, y:1.4909406779661016}),
  new Array({x:0.8678983050847457, y:1.5392457627118643},{x:0.8755254237288136, y:1.525686440677966},{x:0.8551864406779661, y:1.5146694915254237},{x:0.8365423728813559, y:1.5146694915254237},{x:0.8246779661016949, y:1.528228813559322},{x:0.8153559322033899, y:1.5375508474576272},{x:0.8034915254237288, y:1.5248389830508473},{x:0.8085762711864407, y:1.497720338983051},{x:0.831457627118644, y:1.490093220338983},{x:0.8560338983050847, y:1.5028050847457626}),
  new Array({x:0.8450169491525423, y:1.4841610169491526},{x:0.8560338983050847, y:1.5019576271186441},{x:0.8662033898305085, y:1.5214491525423728},{x:0.8670508474576271, y:1.535008474576271},{x:0.8509491525423729, y:1.5417881355932204},{x:0.8272203389830508, y:1.5358559322033898},{x:0.807728813559322, y:1.520601694915254},{x:0.810271186440678, y:1.5045},{x:0.8331525423728814, y:1.5028050847457626},{x:0.8509491525423729, y:1.5155169491525424},{x:0.8738305084745762, y:1.5129745762711864},{x:0.8704406779661017, y:1.5002627118644067},{x:0.8551864406779661, y:1.4917881355932203},{x:0.8433220338983051, y:1.483313559322034})
);

mosquitosPositionsPhase9S = new Array(
  new Array({x:3.988355167394469, y:0.6244541484716157},{x:3.960698689956332, y:0.6302765647743813},{x:3.947598253275109, y:0.62882096069869},{x:3.9490538573508007, y:0.6142649199417758},{x:3.981077147016012, y:0.5895196506550219},{x:4, y:0.6142649199417758},{x:4.026200873362446, y:0.6244541484716157},{x:4.026200873362446, y:0.6142649199417758},{x:4.014556040756914, y:0.604075691411936},{x:3.9912663755458517, y:0.6171761280931587},{x:3.9737991266375547, y:0.6317321688500728}),
  new Array({x:3.994177583697234, y:0.6302765647743813},{x:4.018922852983988, y:0.6229985443959243},{x:4.029112081513828, y:0.6404657933042213},{x:4.016011644832606, y:0.653566229985444},{x:3.978165938864629, y:0.6593886462882096},{x:3.954876273653566, y:0.6521106259097526},{x:3.944687045123726, y:0.6273653566229985},{x:3.944687045123726, y:0.6128093158660844},{x:3.957787481804949, y:0.6026200873362445},{x:3.988355167394469, y:0.6069868995633187},{x:4.018922852983988, y:0.6215429403202329},{x:4.021834061135372, y:0.6084425036390102},{x:4.004366812227074, y:0.5938864628820961},{x:3.97962154294032, y:0.6011644832605532},{x:3.962154294032023, y:0.5909752547307132},{x:3.994177583697234, y:0.5967976710334789},{x:4.008733624454148, y:0.6317321688500728})
);
mosquitosPositionsPhase10 = new Array(
  new Array({x:0.9091525423728815, y:1.6372881355932203},{x:0.9108474576271186, y:1.664406779661017},{x:0.9091525423728815, y:1.7084745762711864},{x:0.9057627118644069, y:1.755084745762712},{x:0.9032203389830509, y:1.7779661016949153},{x:0.9167796610169492, y:1.7889830508474576},{x:0.9100000000000001, y:1.8059322033898304},{x:0.9142372881355934, y:1.8364406779661018},{x:0.9116949152542373, y:1.8601694915254237},{x:0.9108474576271186, y:1.8983050847457628},{x:0.9142372881355934, y:1.9466101694915254},{x:0.9100000000000001, y:1.9991525423728813},{x:0.9091525423728815, y:2.048305084745763},{x:0.9100000000000001, y:2.1050847457627118},{x:0.9040677966101696, y:2.130508474576271},{x:0.8930508474576271, y:2.138135593220339},{x:0.8667796610169491, y:2.1389830508474574},{x:0.8481355932203389, y:2.145762711864407},{x:0.8379661016949154, y:2.169491525423729},{x:0.8396610169491525, y:2.357627118644068},{x:0.8354237288135593, y:2.3771186440677967},{x:0.815084745762712, y:2.3847457627118644},{x:0.7913559322033898, y:2.3847457627118644},{x:0.7879661016949153, y:2.3779661016949154},{x:0.781186440677966, y:2.392372881355932},{x:0.7769491525423728, y:2.3771186440677967},{x:0.7701694915254238, y:2.3915254237288135},{x:0.7659322033898306, y:2.378813559322034},{x:0.7583050847457626, y:2.3915254237288135},{x:0.7540677966101694, y:2.3771186440677967},{x:0.7472881355932204, y:2.392372881355932},{x:0.7422033898305085, y:2.3745762711864407},{x:0.7337288135593221, y:2.392372881355932},{x:0.731186440677966, y:2.3771186440677967},{x:0.724406779661017, y:2.392372881355932},{x:0.7193220338983051, y:2.3796610169491523},{x:0.7074576271186441, y:2.385593220338983})
);
mosquitosPositionsPhase10S = new Array(
  new Array({x:3.988355167394469, y:0.5807860262008734},{x:3.986899563318777, y:0.5691411935953421},{x:3.986899563318777, y:0.5516739446870451},{x:3.9839883551673947, y:0.5211062590975255},{x:3.9839883551673947, y:0.4774381368267831},{x:3.9839883551673947, y:0.4395924308588064},{x:3.9839883551673947, y:0.36681222707423583},{x:3.9839883551673947, y:0.3042212518195051},{x:3.982532751091703, y:0.25181950509461426},{x:3.981077147016012, y:0.1804949053857351},{x:3.982532751091703, y:0.1339155749636099},{x:3.988355167394469, y:0.11935953420669577},{x:4, y:0.11208151382823872},{x:4.036390101892286, y:0.11208151382823872},{x:4.080058224163028, y:0.10771470160116449},{x:4.10334788937409, y:0.11208151382823872},{x:4.122270742358078, y:0.1222707423580786},{x:4.131004366812227, y:0.14992721979621543},{x:4.132459970887918, y:0.38719068413391555},{x:4.129548762736536, y:0.6157205240174672},{x:4.13391557496361, y:0.6477438136826783},{x:4.139737991266376, y:0.6564774381368268},{x:4.160116448326055, y:0.6637554585152838},{x:4.250363901018923, y:0.6637554585152838},{x:4.339155749636099, y:0.6622998544395924},{x:4.419213973799127, y:0.6652110625909753},{x:4.454148471615721, y:0.6593886462882096},{x:4.4599708879184865, y:0.6419213973799127},{x:4.461426491994177, y:0.6200873362445415},{x:4.464337700145561, y:0.6011644832605532},{x:4.483260553129549, y:0.5909752547307132},{x:4.528384279475983, y:0.5924308588064047},{x:4.5647743813682675, y:0.5924308588064047},{x:4.580786026200873, y:0.5997088791848617},{x:4.580786026200873, y:0.6259097525473072},{x:4.580786026200873, y:0.6739446870451238},{x:4.586608442503639, y:0.7045123726346434},{x:4.609898107714701, y:0.7117903930131004},{x:4.8384279475982535, y:0.710334788937409},{x:4.874818049490538, y:0.710334788937409},{x:4.880640465793304, y:0.7059679767103348},{x:4.88646288209607, y:0.6928675400291121},{x:4.88646288209607, y:0.6695778748180495},{x:4.890829694323144, y:0.6550218340611353},{x:4.89665211062591, y:0.6462882096069869},{x:4.903930131004367, y:0.6390101892285298}, {x:4.898768809849521, y:0.6436388508891929},{x:4.883720930232558, y:0.6422708618331053},{x:4.863201094391245, y:0.6367989056087552},{x:4.846785225718194, y:0.6258549931600548},{x:4.848153214774282, y:0.6149110807113544},{x:4.841313269493844, y:0.5889192886456909})
);
mosquitosPositionsPhase11 = new Array(
  new Array({x:0.5823050847457627, y:2.1045000000000003},{x:0.5662033898305084, y:2.100262711864407},{x:0.5670508474576271, y:2.092635593220339},{x:0.5873898305084746, y:2.0867033898305087},{x:0.6145084745762712, y:2.076533898305085},{x:0.6331525423728813, y:2.0748389830508476},{x:0.636542372881356, y:2.08585593220339},{x:0.6212881355932203, y:2.097720338983051},{x:0.5916271186440678, y:2.102805084745763})
);
mosquitosPositionsPhase11S = new Array(
  new Array({x:4.777017783857729, y:0.6025991792065664},{x:4.790697674418604, y:0.6025991792065664},{x:4.811217510259918, y:0.5957592339261286},{x:4.8331053351573185, y:0.5889192886456909},{x:4.84952120383037, y:0.5807113543091655},{x:4.864569083447332, y:0.5725034199726402},{x:4.864569083447332, y:0.5629274965800274},{x:4.854993160054719, y:0.5615595075239398},{x:4.829001367989056, y:0.5683994528043775},{x:4.80437756497948, y:0.5752393980848153},{x:4.790697674418604, y:0.5820793433652531},{x:4.778385772913817, y:0.5902872777017784},{x:4.778385772913817, y:0.5984952120383037},{x:4.796169630642955, y:0.594391244870041},{x:4.800273597811217, y:0.5861833105335157},{x:4.812585499316006, y:0.5738714090287278},{x:4.822161422708619, y:0.5725034199726402},{x:4.845417236662107, y:0.5656634746922025},{x:4.854993160054719, y:0.5725034199726402},{x:4.8331053351573185, y:0.5902872777017784},{x:4.786593707250342, y:0.6025991792065664},{x:4.775649794801642, y:0.594391244870041})
);
mosquitosPositionsPhase12 = new Array(
  new Array({x:0.710084745762712, y:2.388135593220339},{x:0.7050000000000001, y:2.4008474576271186},{x:0.7058474576271185, y:2.4127118644067798},{x:0.7041525423728814, y:2.4372881355932203},{x:0.7016101694915253, y:2.4466101694915254},{x:0.6905932203389831, y:2.455084745762712},{x:0.652457627118644, y:2.457627118644068},{x:0.46855932203389833, y:2.4559322033898305},{x:0.4558474576271186, y:2.4559322033898305},{x:0.44398305084745765, y:2.4491525423728815},{x:0.4312711864406779, y:2.4389830508474577},{x:0.4278813559322034, y:2.421186440677966},{x:0.42957627118644065, y:2.364406779661017},{x:0.4177118644067797, y:2.3423728813559324},{x:0.40584745762711866, y:2.338135593220339},{x:0.39737288135593224, y:2.333898305084746},{x:0.3999152542372881, y:2.3466101694915253},{x:0.3846610169491525, y:2.3347457627118646},{x:0.3863559322033899, y:2.347457627118644},{x:0.37364406779661014, y:2.333898305084746},{x:0.3744915254237288, y:2.347457627118644},{x:0.3609322033898305, y:2.335593220338983},{x:0.36432203389830503, y:2.35},{x:0.3507627118644067, y:2.335593220338983},{x:0.3524576271186441, y:2.3491525423728814},{x:0.3388983050847458, y:2.335593220338983},{x:0.3278813559322034, y:2.344915254237288},{x:0.32110169491525425, y:2.3533898305084744},{x:0.3185593220338983, y:2.3686440677966103},{x:0.3185593220338983, y:2.383050847457627},{x:0.3177118644067796, y:2.395762711864407},{x:0.3092372881355932, y:2.402542372881356},{x:0.2897457627118644, y:2.4059322033898307},{x:0.2202542372881356, y:2.406779661016949},{x:0.17703389830508476, y:2.4076271186440676},{x:0.11262711864406777, y:2.4084745762711863},{x:0.09906779661016951, y:2.4127118644067798},{x:0.08889830508474578, y:2.41864406779661},{x:0.08381355932203388, y:2.4347457627118643},{x:0.08466101694915251, y:2.4940677966101696},{x:0.08211864406779662, y:2.5567796610169493})
);
mosquitosPositionsPhase12S = new Array(
  new Array({x:4.841313269493844, y:0.5889192886456909},{x:4.848153214774282, y:0.6149110807113544},{x:4.846785225718194, y:0.6258549931600548},{x:4.863201094391245, y:0.6367989056087552},{x:4.883720930232558, y:0.6422708618331053},{x:4.898768809849521, y:0.6436388508891929}, {x:4.902474526928676, y:0.6390101892285298},{x:4.919941775836972, y:0.6390101892285298},{x:4.9490538573508, y:0.6375545851528385},{x:4.9970887918486175, y:0.6346433770014556},{x:5.021834061135372, y:0.6375545851528385},{x:5.033478893740902, y:0.6462882096069869},{x:5.045123726346434, y:0.660844250363901},{x:5.045123726346434, y:0.6841339155749636},{x:5.045123726346434, y:0.7438136826783115},{x:5.043668122270742, y:0.784570596797671},{x:5.049490538573508, y:0.7976710334788938},{x:5.059679767103348, y:0.8049490538573508},{x:5.1018922852983986, y:0.8049490538573508},{x:5.13391557496361, y:0.8005822416302766},{x:5.141193595342067, y:0.7933042212518195},{x:5.142649199417758, y:0.7700145560407569},{x:5.145560407569141, y:0.7438136826783115},{x:5.142649199417758, y:0.7336244541484717},{x:5.151382823871907, y:0.7263464337700145},{x:5.142649199417758, y:0.7205240174672489},{x:5.148471615720524, y:0.7132459970887919},{x:5.135371179039302, y:0.7045123726346434},{x:5.151382823871907, y:0.7016011644832606},{x:5.1368267831149925, y:0.6957787481804949},{x:5.1470160116448325, y:0.6885007278020379},{x:5.139737991266376, y:0.6812227074235808},{x:5.139737991266376, y:0.6579330422125182},{x:5.14410480349345, y:0.6171761280931587},{x:5.142649199417758, y:0.5778748180494906})
);
mosquitosPositionsPhase13 = new Array(
  new Array({x:0.05433898305084746, y:2.3697542372881357},{x:0.053491525423728814, y:2.412127118644068},{x:0.0687457627118644, y:2.430771186440678},{x:0.08484745762711865, y:2.4282288135593224},{x:0.09162711864406779, y:2.401110169491526},{x:0.0899322033898305, y:2.372296610169492},{x:0.07383050847457627, y:2.339245762711865},{x:0.06450847457627118, y:2.318906779661017},{x:0.06027118644067797, y:2.347720338983051}),
  new Array({x:0.06959322033898305, y:2.345177966101695},{x:0.08230508474576272, y:2.3578898305084746},{x:0.08654237288135593, y:2.3824661016949156},{x:0.07298305084745763, y:2.397720338983051},{x:0.06027118644067797, y:2.410432203389831},{x:0.053491525423728814, y:2.4222966101694916},{x:0.06959322033898305, y:2.437550847457627},{x:0.08315254237288136, y:2.43585593220339},{x:0.08738983050847457, y:2.4282288135593224},{x:0.08823728813559321, y:2.410432203389831})
);
mosquitosPositionsPhase13S = new Array(
  new Array({x:5.145560407569141, y:0.5924308588064047},{x:5.1615720524017465, y:0.5778748180494906},{x:5.16448326055313, y:0.5545851528384279},{x:5.15429403202329, y:0.5356622998544396},{x:5.126637554585153, y:0.529839883551674},{x:5.126637554585153, y:0.512372634643377},{x:5.13391557496361, y:0.4963609898107715},{x:5.157205240174672, y:0.5007278020378457},{x:5.158660844250364, y:0.5152838427947598},{x:5.14410480349345, y:0.5385735080058224},{x:5.126637554585153, y:0.5604075691411936},{x:5.129548762736536, y:0.5807860262008734},{x:5.151382823871907, y:0.5895196506550219},{x:5.148471615720524, y:0.6084425036390102},{x:5.120815138282387, y:0.6011644832605532})
);
mosquitosPositionsPhase14 = new Array(
  new Array({x:0.10330508474576272, y:2.5754237288135595},{x:0.12110169491525424, y:2.574576271186441},{x:0.13127118644067798, y:2.574576271186441},{x:0.13805084745762713, y:2.574576271186441},{x:0.14228813559322034, y:2.5762711864406778},{x:0.14567796610169492, y:2.5822033898305086},{x:0.14652542372881355, y:2.594915254237288},{x:0.1439830508474576, y:2.6161016949152542})
);
mosquitosPositionsPhase14S = new Array(
  //new Array({x:5.149927219796216, y:0.5604075691411936},{x:5.180494905385735, y:0.5604075691411936},{x:5.202328966521106, y:0.5531295487627366},{x:5.205240174672489, y:0.5531295487627366},{x:5.208151382823872, y:0.5487627365356623},{x:5.211062590975255, y:0.5400291120815138},{x:5.205240174672489, y:0.5356622998544396},{x:5.213973799126638, y:0.5312954876273653},{x:5.205240174672489, y:0.5269286754002911},{x:5.212518195050946, y:0.5211062590975255},{x:5.205240174672489, y:0.5181950509461426},{x:5.212518195050946, y:0.5152838427947598},{x:5.203784570596798, y:0.5080058224163028},{x:5.213973799126638, y:0.4949053857350801},{x:5.197962154294032, y:0.4861717612809316},{x:5.212518195050946, y:0.4745269286754003},{x:5.212518195050946, y:0.45269286754002913},{x:5.209606986899563, y:0.4090247452692867})
  new Array({x:5.157330154946365, y:0.564958283671037},{x:5.176400476758046, y:0.5613825983313468},{x:5.191895113230036, y:0.5530393325387366},{x:5.200238379022646, y:0.5542312276519666},{x:5.206197854588797, y:0.5518474374255066},{x:5.210965435041716, y:0.5411203814064363},{x:5.206197854588797, y:0.531585220500596},{x:5.212157330154946, y:0.5280095351609059},{x:5.205005959475566, y:0.5244338498212158},{x:5.210965435041716, y:0.5208581644815257},{x:5.207389749702026, y:0.5148986889153755},{x:5.214541120381407, y:0.5089392133492253},{x:5.206197854588797, y:0.5041716328963052},{x:5.210965435041716, y:0.49821215733015495},{x:5.207389749702026, y:0.49463647199046484},{x:5.213349225268177, y:0.4922526817640048},{x:5.206197854588797, y:0.48867699642431467},{x:5.210965435041716, y:0.48152562574493446},{x:5.212157330154946, y:0.4696066746126341},{x:5.214541120381407, y:0.43146603098927294},{x:5.209773539928486, y:0.4135876042908224})
);
mosquitosPositionsPhase15 = new Array(
  new Array({x:0.1297627118644068, y:2.3629745762711867},{x:0.11959322033898305, y:2.371449152542373},{x:0.1128135593220339, y:2.3892457627118646},{x:0.11620338983050847, y:2.4222966101694916},{x:0.11620338983050847, y:2.443483050847458},{x:0.10942372881355932, y:2.4646694915254237},{x:0.11620338983050847, y:2.4900932203389834},{x:0.13145762711864406, y:2.497720338983051},{x:0.14416949152542374, y:2.4782288135593222},{x:0.1373898305084746, y:2.455347457627119}),
  new Array({x:0.14077966101694916, y:2.49856779661017},{x:0.12044067796610168, y:2.488398305084746},{x:0.11535593220338984, y:2.4799237288135596},{x:0.12467796610169492, y:2.462127118644068},{x:0.13908474576271185, y:2.457042372881356},{x:0.14332203389830506, y:2.4417881355932205},{x:0.134, y:2.4189067796610173},{x:0.11450847457627118, y:2.407889830508475},{x:0.11027118644067797, y:2.38585593220339},{x:0.11874576271186442, y:2.372296610169492})
);
mosquitosPositionsPhase15S = new Array(
  new Array({x:5.203784570596798, y:0.39592430858806404},{x:5.1965065502183405, y:0.3813682678311499},{x:5.2066957787481805, y:0.3682678311499272},{x:5.219796215429403, y:0.36681222707423583},{x:5.228529839883552, y:0.3522561863173217},{x:5.225618631732169, y:0.3420669577874818},{x:5.208151382823872, y:0.3318777292576419},{x:5.200873362445415, y:0.32023289665211063},{x:5.202328966521106, y:0.30131004366812225},{x:5.212518195050946, y:0.2954876273653566},{x:5.228529839883552, y:0.3056768558951965},{x:5.224163027656477, y:0.3245997088791849},{x:5.208151382823872, y:0.3289665211062591},{x:5.195050946142649, y:0.34934497816593885},{x:5.222707423580786, y:0.3682678311499272},{x:5.21688500727802, y:0.4002911208151383},{x:5.197962154294032, y:0.4148471615720524})
);
mosquitosPositionsPhase16 = new Array(
  new Array({x:0.14652542372881355, y:2.711016949152542},{x:0.14652542372881355, y:2.7245762711864407},{x:0.14737288135593218, y:2.7296610169491524},{x:0.14567796610169492, y:2.7415254237288136},{x:0.14567796610169492, y:2.7796610169491527},{x:0.13720338983050845, y:2.788983050847458},{x:0.14567796610169492, y:2.7932203389830508},{x:0.13889830508474577, y:2.797457627118644},{x:0.14567796610169492, y:2.8},{x:0.13805084745762713, y:2.8042372881355933},{x:0.14652542372881355, y:2.807627118644068},{x:0.1397457627118644, y:2.811864406779661},{x:0.14652542372881355, y:2.8177966101694913},{x:0.13889830508474577, y:2.823728813559322},{x:0.1448305084745763, y:2.8262711864406778},{x:0.14059322033898303, y:2.83135593220339},{x:0.14313559322033897, y:2.833898305084746},{x:0.1439830508474576, y:2.8423728813559324},{x:0.1439830508474576, y:2.8466101694915253},{x:0.1397457627118644, y:2.8508474576271188},{x:0.12364406779661014, y:2.8508474576271188},{x:0.10923728813559319, y:2.854237288135593},{x:0.09144067796610167, y:2.8627118644067795})
);
mosquitosPositionsPhase16S = new Array(
  new Array({x:5.211062590975255, y:0.29112081513828236},{x:5.213973799126638, y:0.2780203784570597},{x:5.212518195050946, y:0.264919941775837},{x:5.212518195050946, y:0.2547307132459971},{x:5.209606986899563, y:0.25036390101892286},{x:5.199417758369724, y:0.24599708879184862},{x:5.190684133915575, y:0.24599708879184862},{x:5.168850072780204, y:0.24599708879184862},{x:5.138282387190684, y:0.2780203784570597})
);
mosquitosPositionsPhase17 = new Array(
  new Array({x:0.06959322033898305, y:2.5917881355932204},{x:0.053491525423728814, y:2.568906779661017},{x:0.05264406779661017, y:2.5443305084745766},{x:0.06535593220338982, y:2.5324661016949155},{x:0.08654237288135593, y:2.5468728813559323},{x:0.0856949152542373, y:2.5706016949152546},{x:0.0687457627118644, y:2.589245762711865},{x:0.059423728813559326, y:2.616364406779661},{x:0.05603389830508475, y:2.6485677966101697},{x:0.07298305084745763, y:2.6689067796610173},{x:0.08315254237288136, y:2.657889830508475},{x:0.08484745762711865, y:2.6400932203389833},{x:0.08230508474576272, y:2.629076271186441},{x:0.06620338983050847, y:2.614669491525424},{x:0.0628135593220339, y:2.5841610169491527}),
  new Array({x:0.05772881355932204, y:2.5706016949152546},{x:0.05772881355932204, y:2.5917881355932204},{x:0.07298305084745763, y:2.6112796610169493},{x:0.084, y:2.6273813559322035},{x:0.08484745762711865, y:2.6528050847457627},{x:0.07891525423728814, y:2.6689067796610173},{x:0.061118644067796615, y:2.661279661016949},{x:0.05772881355932204, y:2.6417881355932207},{x:0.0780677966101695, y:2.6138220338983054},{x:0.07467796610169491, y:2.595177966101695},{x:0.05857627118644068, y:2.580771186440678},{x:0.0551864406779661, y:2.562127118644068},{x:0.0551864406779661, y:2.5417881355932206},{x:0.07213559322033898, y:2.5350084745762715},{x:0.08484745762711865, y:2.5494152542372883},{x:0.07383050847457627, y:2.5756864406779663},{x:0.07383050847457627, y:2.621449152542373},{x:0.07976271186440678, y:2.6333135593220343})
);
mosquitosPositionsPhase17S = new Array(
  new Array({x:5.1470160116448325, y:0.24745269286754004},{x:5.132459970887918, y:0.2678311499272198},{x:5.1368267831149925, y:0.29694323144104806},{x:5.15429403202329, y:0.32168850072780203},{x:5.151382823871907, y:0.35662299854439594},{x:5.131004366812227, y:0.3522561863173217},{x:5.132459970887918, y:0.32168850072780203},{x:5.152838427947598, y:0.2925764192139738},{x:5.152838427947598, y:0.25036390101892286},{x:5.13391557496361, y:0.24017467248908297})
);
mosquitosPositionsPhase18 = new Array(
  //new Array({x:0.07298305084745763, y:2.6553474576271188},{x:0.07298305084745763, y:2.6706016949152542},{x:0.06450847457627118, y:2.6917881355932205},{x:0.07467796610169491, y:2.6985677966101695},{x:0.06450847457627118, y:2.7036525423728817}, {x:0.06789830508474576, y:2.7606016949152543},{x:0.07976271186440678, y:2.768228813559322},{x:0.1051864406779661, y:2.768228813559322},{x:0.13061016949152543, y:2.768228813559322},{x:0.1509491525423729, y:2.781618644067797},{x:0.15264406779661016, y:2.7960254237288136},{x:0.1534915254237288, y:2.8155169491525425},{x:0.15433898305084748, y:2.845177966101695},{x:0.16027118644067795, y:2.8587372881355932},{x:0.1763728813559322, y:2.8512796610169493},{x:0.18315254237288137, y:2.8478898305084746},{x:0.18654237288135594, y:2.8555169491525427},{x:0.19077966101694915, y:2.8478898305084746},{x:0.19671186440677968, y:2.8538220338983054},{x:0.2009491525423729, y:2.845347457627119},{x:0.20688135593220341, y:2.854669491525424},{x:0.210271186440678, y:2.8445000000000003},{x:0.2145084745762712, y:2.854669491525424},{x:0.21959322033898304, y:2.8445000000000003},{x:0.22467796610169494, y:2.8438220338983054},{x:0.22806779661016952, y:2.8436525423728816},{x:0.2306101694915254, y:2.8504322033898306},{x:0.24925423728813556, y:2.8604322033898306},{x:0.281457627118644, y:2.8504322033898306},{x:0.34671186440677965, y:2.8512796610169493},{x:0.38908474576271185, y:2.8504322033898306},{x:0.4034915254237288, y:2.8487372881355932},{x:0.40603389830508474, y:2.845347457627119},{x:0.4111186440677966, y:2.856364406779661},{x:0.4162033898305085, y:2.855347457627119},{x:0.41874576271186437, y:2.8504322033898306},{x:0.4263728813559322, y:2.852805084745763},{x:0.42806779661016947, y:2.8504322033898306},{x:0.43145762711864405, y:2.8436525423728816},{x:0.434, y:2.8529745762711867},{x:0.434, y:2.8461949152542376},{x:0.4416271186440678, y:2.856364406779661},{x:0.44501694915254236, y:2.845347457627119},{x:0.4501016949152542, y:2.8512796610169493},{x:0.4636610169491525, y:2.8504322033898306},{x:0.484, y:2.8504322033898306},{x:0.49416949152542367, y:2.8680593220338984},{x:0.4975593220338983, y:2.8875508474576272},{x:0.4975593220338983, y:2.9256864406779663},{x:0.4967118644067796, y:2.952805084745763},{x:0.4975593220338983, y:2.9807711864406783}, {x:0.48484745762711867, y:3.0036525423728815},{x:0.4628135593220339, y:3.0129745762711866},{x:0.4424745762711864, y:3.0138220338983053},{x:0.4323050847457627, y:3.0180593220338983},{x:0.42722033898305084, y:3.0290762711864407},{x:0.4263728813559322, y:3.0629745762711864},{x:0.4297627118644068, y:3.1011101694915255},{x:0.42383050847457626, y:3.1138220338983054},{x:0.38569491525423727, y:3.1180593220338984},{x:0.3568813559322034, y:3.1172118644067797},{x:0.345864406779661, y:3.1087372881355932},{x:0.345864406779661, y:3.095177966101695},{x:0.34332203389830507, y:3.0231440677966104})
  new Array({x:0.0855084745762712, y:2.889830508474576},{x:0.08296610169491525, y:2.906779661016949},{x:0.08466101694915251, y:2.9169491525423727},{x:0.0855084745762712, y:2.9389830508474577},{x:0.08381355932203388, y:2.9635593220338983},{x:0.07788135593220336, y:2.9703389830508473},{x:0.0855084745762712, y:2.9745762711864407},{x:0.08127118644067793, y:2.977966101694915},{x:0.08466101694915251, y:2.9822033898305085},{x:0.07957627118644067, y:2.9855932203389832},{x:0.08466101694915251, y:2.989830508474576},{x:0.0804237288135593, y:2.9957627118644066},{x:0.08635593220338983, y:2.9991525423728813},{x:0.07872881355932204, y:3.0050847457627117},{x:0.0855084745762712, y:3.0084745762711864},{x:0.0804237288135593, y:3.01271186440678},{x:0.08296610169491525, y:3.023728813559322},{x:0.08296610169491525, y:3.0372881355932204},{x:0.08127118644067793, y:3.0661016949152544},{x:0.08127118644067793, y:3.0940677966101693},{x:0.0855084745762712, y:3.1127118644067795},{x:0.09144067796610167, y:3.1220338983050846},{x:0.10584745762711861, y:3.126271186440678},{x:0.12364406779661014, y:3.1279661016949154},{x:0.13296610169491524, y:3.1415254237288135},{x:0.13381355932203387, y:3.1932203389830507},{x:0.13720338983050845, y:3.2084745762711866},{x:0.14567796610169492, y:3.2135593220338983},{x:0.1566949152542373, y:3.2152542372881356},{x:0.16940677966101692, y:3.211864406779661},{x:0.17618644067796607, y:3.2177966101694917},{x:0.18127118644067797, y:3.2084745762711866},{x:0.18974576271186439, y:3.2177966101694917},{x:0.1914406779661017, y:3.211016949152542},{x:0.19822033898305086, y:3.2161016949152543},{x:0.2033050847457627, y:3.2084745762711866},{x:0.2083898305084746, y:3.216949152542373},{x:0.2126271186440678, y:3.211016949152542},{x:0.22194915254237285, y:3.2161016949152543},{x:0.2685593220338983, y:3.2161016949152543},{x:0.3753389830508474, y:3.2152542372881356},{x:0.38720338983050845, y:3.2152542372881356},{x:0.3948305084745763, y:3.2127118644067796},{x:0.40584745762711866, y:3.2203389830508473},{x:0.41008474576271187, y:3.2093220338983053},{x:0.42025423728813555, y:3.2203389830508473},{x:0.4270338983050847, y:3.2093220338983053},{x:0.4329661016949153, y:3.216949152542373},{x:0.43889830508474575, y:3.2101694915254235},{x:0.4499152542372881, y:3.216949152542373},{x:0.4711016949152543, y:3.2152542372881356},{x:0.48635593220338985, y:3.2177966101694917},{x:0.49483050847457627, y:3.2220338983050847},{x:0.49991525423728816, y:3.23728813559322},{x:0.49991525423728816, y:3.2745762711864406},{x:0.49991525423728816, y:3.3152542372881357},{x:0.4982203389830508, y:3.344915254237288},{x:0.4990677966101695, y:3.3627118644067795}, {x:0.48635593220338985, y:3.3720338983050846},{x:0.46855932203389833, y:3.3796610169491523},{x:0.4566949152542373, y:3.378813559322034},{x:0.440593220338983, y:3.380508474576271},{x:0.4312711864406779, y:3.385593220338983},{x:0.4261864406779661, y:3.3949152542372882},{x:0.42533898305084744, y:3.414406779661017},{x:0.42449152542372875, y:3.4601694915254235},{x:0.42449152542372875, y:3.477966101694915},{x:0.41516949152542376, y:3.488135593220339},{x:0.3897457627118644, y:3.490677966101695},{x:0.3516101694915254, y:3.488135593220339},{x:0.3414406779661017, y:3.4788135593220337},{x:0.3388983050847458, y:3.4677966101694917},{x:0.3388983050847458, y:3.451694915254237},{x:0.3388983050847458, y:3.397457627118644})
);
mosquitosPositionsPhase18S = new Array(
  //new Array({x:0.07298305084745763, y:2.6553474576271188},{x:0.07298305084745763, y:2.6706016949152542},{x:0.06450847457627118, y:2.6917881355932205},{x:0.07467796610169491, y:2.6985677966101695},{x:0.06450847457627118, y:2.7036525423728817}, {x:0.06789830508474576, y:2.7606016949152543},{x:0.07976271186440678, y:2.768228813559322},{x:0.1051864406779661, y:2.768228813559322},{x:0.13061016949152543, y:2.768228813559322},{x:0.1509491525423729, y:2.781618644067797},{x:0.15264406779661016, y:2.7960254237288136},{x:0.1534915254237288, y:2.8155169491525425},{x:0.15433898305084748, y:2.845177966101695},{x:0.16027118644067795, y:2.8587372881355932},{x:0.1763728813559322, y:2.8512796610169493},{x:0.18315254237288137, y:2.8478898305084746},{x:0.18654237288135594, y:2.8555169491525427},{x:0.19077966101694915, y:2.8478898305084746},{x:0.19671186440677968, y:2.8538220338983054},{x:0.2009491525423729, y:2.845347457627119},{x:0.20688135593220341, y:2.854669491525424},{x:0.210271186440678, y:2.8445000000000003},{x:0.2145084745762712, y:2.854669491525424},{x:0.21959322033898304, y:2.8445000000000003},{x:0.22467796610169494, y:2.8438220338983054},{x:0.22806779661016952, y:2.8436525423728816},{x:0.2306101694915254, y:2.8504322033898306},{x:0.24925423728813556, y:2.8604322033898306},{x:0.281457627118644, y:2.8504322033898306},{x:0.34671186440677965, y:2.8512796610169493},{x:0.38908474576271185, y:2.8504322033898306},{x:0.4034915254237288, y:2.8487372881355932},{x:0.40603389830508474, y:2.845347457627119},{x:0.4111186440677966, y:2.856364406779661},{x:0.4162033898305085, y:2.855347457627119},{x:0.41874576271186437, y:2.8504322033898306},{x:0.4263728813559322, y:2.852805084745763},{x:0.42806779661016947, y:2.8504322033898306},{x:0.43145762711864405, y:2.8436525423728816},{x:0.434, y:2.8529745762711867},{x:0.434, y:2.8461949152542376},{x:0.4416271186440678, y:2.856364406779661},{x:0.44501694915254236, y:2.845347457627119},{x:0.4501016949152542, y:2.8512796610169493},{x:0.4636610169491525, y:2.8504322033898306},{x:0.484, y:2.8504322033898306},{x:0.49416949152542367, y:2.8680593220338984},{x:0.4975593220338983, y:2.8875508474576272},{x:0.4975593220338983, y:2.9256864406779663},{x:0.4967118644067796, y:2.952805084745763},{x:0.4975593220338983, y:2.9807711864406783}, {x:0.48484745762711867, y:3.0036525423728815},{x:0.4628135593220339, y:3.0129745762711866},{x:0.4424745762711864, y:3.0138220338983053},{x:0.4323050847457627, y:3.0180593220338983},{x:0.42722033898305084, y:3.0290762711864407},{x:0.4263728813559322, y:3.0629745762711864},{x:0.4297627118644068, y:3.1011101694915255},{x:0.42383050847457626, y:3.1138220338983054},{x:0.38569491525423727, y:3.1180593220338984},{x:0.3568813559322034, y:3.1172118644067797},{x:0.345864406779661, y:3.1087372881355932},{x:0.345864406779661, y:3.095177966101695},{x:0.34332203389830507, y:3.0231440677966104})
  //new Array({x:5.141193595342067, y:0.22561863173216884},{x:5.141193595342067, y:0.2096069868995633},{x:5.138282387190684, y:0.19213973799126638},{x:5.139737991266376, y:0.16011644832605532},{x:5.139737991266376, y:0.13100436681222707},{x:5.142649199417758, y:0.11208151382823872},{x:5.155749636098981, y:0.10334788937409024},{x:5.186317321688501, y:0.10189228529839883},{x:5.5050946142649195, y:0.10189228529839883},{x:5.9374090247452695, y:0.09898107714701601},{x:5.9825327510917035, y:0.10334788937409024},{x:5.9970887918486175, y:0.10043668122270742},{x:6.0029112081513825, y:0.08442503639010189},{x:6.0029112081513825, y:0.05822416302765648},{x:6.005822416302766, y:0.036390101892285295},{x:6.013100436681222, y:0.027656477438136828},{x:6.03056768558952, y:0.023289665211062592},{x:6.197962154294032, y:0.026200873362445413},{x:6.219796215429403, y:0.033478893740902474},{x:6.228529839883552, y:0.053857350800582245},{x:6.225618631732169, y:0.29694323144104806},{x:6.2372634643377, y:0.3173216885007278},{x:6.254730713245997, y:0.31877729257641924},{x:6.27802037845706, y:0.3289665211062591},{x:6.2809315866084425, y:0.35662299854439594},{x:6.285298398835517, y:0.40465793304221254},{x:6.302765647743814, y:0.4148471615720524},{x:6.318777292576419, y:0.4163027656477438},{x:6.327510917030568, y:0.42066957787481807},{x:6.333333333333333, y:0.413391557496361},{x:6.342066957787482, y:0.42066957787481807},{x:6.352256186317321, y:0.4163027656477438},{x:6.36098981077147, y:0.42358078602620086},{x:6.369723435225619, y:0.413391557496361},{x:6.382823871906841, y:0.4192139737991266},{x:6.558951965065503, y:0.4192139737991266},{x:6.5749636098981075, y:0.42212518195050946},{x:6.582241630276565, y:0.4119359534206696},{x:6.595342066957787, y:0.4264919941775837},{x:6.5997088791848615, y:0.4148471615720524},{x:6.612809315866085, y:0.42503639010189226},{x:6.620087336244541, y:0.4148471615720524},{x:6.637554585152839, y:0.4177583697234352},{x:6.666666666666667, y:0.42212518195050946},{x:6.685589519650655, y:0.43522561863173215},{x:6.687045123726347, y:0.48180494905385735},{x:6.688500727802038, y:0.5312954876273653},{x:6.688500727802038, y:0.5574963609898108},{x:6.688500727802038, y:0.5778748180494906},{x:6.678311499272198, y:0.5953420669577875},{x:6.657933042212518, y:0.6011644832605532},{x:6.641921397379913, y:0.5982532751091703},{x:6.627365356622999, y:0.5982532751091703},{x:6.61863173216885, y:0.6055312954876274},{x:6.611353711790393, y:0.6171761280931587},{x:6.60844250363901, y:0.6477438136826783},{x:6.60844250363901, y:0.6841339155749636},{x:6.60844250363901, y:0.7088791848617176},{x:6.5997088791848615, y:0.7161572052401747},{x:6.567685589519651, y:0.7176128093158661},{x:6.537117903930131, y:0.7190684133915575},{x:6.521106259097525, y:0.7190684133915575},{x:6.518195050946143, y:0.7059679767103348},{x:6.513828238719069, y:0.6943231441048034},{x:6.513828238719069, y:0.6768558951965066},{x:6.512372634643377, y:0.6259097525473072})
  //new Array({x:5.141646489104116, y:0.22760290556900725},{x:5.14043583535109, y:0.2106537530266344},{x:5.14043583535109, y:0.19975786924939468},{x:5.1392251815980625, y:0.1791767554479419},{x:5.1392251815980625, y:0.15617433414043583},{x:5.1392251815980625, y:0.13801452784503632},{x:5.1392251815980625, y:0.12469733656174334},{x:5.14043583535109, y:0.1162227602905569},{x:5.1440677966101696, y:0.11016949152542373},{x:5.148910411622276, y:0.1053268765133172},{x:5.156174334140436, y:0.1016949152542373},{x:5.175544794188862, y:0.09927360774818401},{x:5.207021791767555, y:0.10048426150121065},{x:5.523002421307506, y:0.10048426150121065},{x:5.9176755447941884, y:0.10048426150121065},{x:5.985472154963681, y:0.09927360774818401},{x:5.99636803874092, y:0.09443099273607748},{x:6.001210653753026, y:0.08595641646489104},{x:6.00363196125908, y:0.06900726392251816},{x:6.00363196125908, y:0.05569007263922518},{x:6.0024213075060535, y:0.03753026634382567},{x:6.00726392251816, y:0.03026634382566586},{x:6.012106537530267, y:0.021791767554479417},{x:6.0290556900726395, y:0.020581113801452784},{x:6.2058111380145276, y:0.024213075060532687},{x:6.219128329297821, y:0.029055690072639227},{x:6.22639225181598, y:0.043583535108958835},{x:6.230024213075061, y:0.1234866828087167},{x:6.22639225181598, y:0.2966101694915254},{x:6.232445520581114, y:0.3099273607748184},{x:6.243341404358354, y:0.31840193704600483},{x:6.254237288135593, y:0.31840193704600483},{x:6.268765133171913, y:0.3196125907990315},{x:6.278450363196126, y:0.32566585956416466},{x:6.283292978208232, y:0.34261501210653755},{x:6.284503631961259, y:0.37409200968523004},{x:6.283292978208232, y:0.39709443099273606},{x:6.291767554479419, y:0.4128329297820823},{x:6.306295399515738, y:0.41646489104116224},{x:6.317191283292979, y:0.41646489104116224},{x:6.325665859564165, y:0.4188861985472155},{x:6.330508474576271, y:0.4116222760290557},{x:6.3341404358353515, y:0.41767554479418884},{x:6.338983050847458, y:0.4116222760290557},{x:6.342615012106537, y:0.41767554479418884},{x:6.346246973365617, y:0.4128329297820823},{x:6.352300242130751, y:0.41646489104116224},{x:6.3559322033898304, y:0.41041162227602906},{x:6.357142857142857, y:0.4188861985472155},{x:6.361985472154964, y:0.4128329297820823},{x:6.3692493946731235, y:0.4225181598062954},{x:6.37409200968523, y:0.4152542372881356},{x:6.391041162227603, y:0.4188861985472155},{x:6.562953995157385, y:0.4188861985472155},{x:6.579903147699758, y:0.41404358353510895},{x:6.585956416464891, y:0.4225181598062954},{x:6.5907990314769975, y:0.4116222760290557},{x:6.594430992736077, y:0.4188861985472155},{x:6.598062953995157, y:0.4116222760290557},{x:6.602905569007264, y:0.41646489104116224},{x:6.60774818401937, y:0.4128329297820823},{x:6.61138014527845, y:0.4188861985472155},{x:6.616222760290557, y:0.4116222760290557},{x:6.621065375302663, y:0.42009685230024213},{x:6.623486682808717, y:0.4152542372881356},{x:6.642857142857143, y:0.41767554479418884},{x:6.662227602905569, y:0.42009685230024213},{x:6.674334140435835, y:0.4225181598062954},{x:6.682808716707021, y:0.4297820823244552},{x:6.690072639225182, y:0.4491525423728814},{x:6.687651331719128, y:0.5012106537530266},{x:6.686440677966102, y:0.5581113801452785},{x:6.686440677966102, y:0.5738498789346247},{x:6.684019370460049, y:0.5920096852300242},{x:6.645278450363196, y:0.5980629539951574},{x:6.62953995157385, y:0.6004842615012107},{x:6.621065375302663, y:0.6004842615012107},{x:6.612590799031477, y:0.6089588377723971},{x:6.60774818401937, y:0.6234866828087167},{x:6.606537530266344, y:0.6476997578692494},{x:6.6041162227602905, y:0.6743341404358354},{x:6.605326876513317, y:0.6924939467312349},{x:6.605326876513317, y:0.7082324455205811},{x:6.599273607748184, y:0.7179176755447942},{x:6.589588377723971, y:0.7179176755447942},{x:6.570217917675545, y:0.7191283292978208},{x:6.547215496368039, y:0.7203389830508474},{x:6.523002421307506, y:0.7179176755447942},{x:6.516949152542373, y:0.711864406779661},{x:6.512106537530267, y:0.6997578692493946},{x:6.509685230024213, y:0.6755447941888619},{x:6.509685230024213, y:0.6537530266343826})
  new Array({x:5.140287769784172, y:0.2278177458033573},{x:5.139088729016787, y:0.20623501199040767},{x:5.139088729016787, y:0.1882494004796163},{x:5.136690647482014, y:0.1642685851318945},{x:5.136690647482014, y:0.1474820143884892},{x:5.1378896882494, y:0.12949640287769784},{x:5.140287769784172, y:0.11750599520383694},{x:5.142685851318944, y:0.11031175059952038},{x:5.149880095923262, y:0.10431654676258993},{x:5.161870503597123, y:0.09952038369304557},{x:5.199040767386091, y:0.09592326139088729},{x:5.980815347721823, y:0.09952038369304557},{x:5.995203836930456, y:0.09352517985611511},{x:5.9988009592326135, y:0.08752997601918465},{x:6.0011990407673865, y:0.07553956834532374},{x:6.0011990407673865, y:0.06115107913669065},{x:6.002398081534772, y:0.04316546762589928},{x:6.002398081534772, y:0.03717026378896882},{x:6.004796163069544, y:0.03237410071942446},{x:6.009592326139089, y:0.026378896882494004},{x:6.017985611510792, y:0.02158273381294964},{x:6.03357314148681, y:0.019184652278177457},{x:6.199040767386091, y:0.02158273381294964},{x:6.213429256594724, y:0.026378896882494004},{x:6.2254196642685855, y:0.03836930455635491},{x:6.23021582733813, y:0.05515587529976019},{x:6.232613908872902, y:0.22302158273381295},{x:6.2314148681055155, y:0.23501199040767387},{x:6.232613908872902, y:0.2422062350119904},{x:6.2398081534772185, y:0.24820143884892087},{x:6.252997601918465, y:0.2529976019184652},{x:6.264988009592326, y:0.2529976019184652},{x:6.275779376498801, y:0.25539568345323743},{x:6.2829736211031175, y:0.26498800959232616},{x:6.287769784172662, y:0.2805755395683453},{x:6.286570743405276, y:0.33213429256594723},{x:6.292565947242206, y:0.34532374100719426},{x:6.309352517985611, y:0.3501199040767386},{x:6.320143884892087, y:0.34652278177458035},{x:6.3261390887290165, y:0.3513189448441247},{x:6.333333333333333, y:0.3441247002398082},{x:6.335731414868105, y:0.3501199040767386},{x:6.341726618705036, y:0.34532374100719426},{x:6.34652278177458, y:0.3513189448441247},{x:6.35251798561151, y:0.3405275779376499},{x:6.356115107913669, y:0.3501199040767386},{x:6.363309352517986, y:0.3405275779376499},{x:6.36810551558753, y:0.34772182254196643},{x:6.374100719424461, y:0.3393285371702638},{x:6.384892086330935, y:0.3489208633093525},{x:6.5647482014388485, y:0.3489208633093525},{x:6.580335731414868, y:0.3441247002398082},{x:6.5875299760191846, y:0.3513189448441247},{x:6.592326139088729, y:0.34172661870503596},{x:6.59832134292566, y:0.3489208633093525},{x:6.610311750599521, y:0.3405275779376499},{x:6.615107913669065, y:0.34532374100719426},{x:6.624700239808154, y:0.34172661870503596},{x:6.633093525179856, y:0.3513189448441247},{x:6.670263788968825, y:0.3537170263788969},{x:6.684652278177458, y:0.3609112709832134},{x:6.689448441247002, y:0.3800959232613909},{x:6.68705035971223, y:0.4316546762589928},{x:6.68705035971223, y:0.47721822541966424},{x:6.689448441247002, y:0.5155875299760192},{x:6.684652278177458, y:0.526378896882494},{x:6.6450839328537175, y:0.5287769784172662},{x:6.630695443645084, y:0.5287769784172662},{x:6.621103117505995, y:0.5311750599520384},{x:6.613908872901678, y:0.5359712230215827},{x:6.606714628297362, y:0.5467625899280576},{x:6.60431654676259, y:0.5623501199040767},{x:6.60431654676259, y:0.5899280575539568},{x:6.60431654676259, y:0.617505995203837},{x:6.606714628297362, y:0.6366906474820144},{x:6.601918465227818, y:0.6462829736211031},{x:6.592326139088729, y:0.6510791366906474},{x:6.568345323741007, y:0.6510791366906474},{x:6.543165467625899, y:0.6486810551558753},{x:6.52757793764988, y:0.6426858513189448},{x:6.516786570743405, y:0.6258992805755396},{x:6.514388489208633, y:0.5947242206235012})
);
mosquitosPositionsPhase19 = new Array(
  new Array({x:0.3475593220338983, y:3.0248389830508478},{x:0.3306101694915254, y:3.0468728813559323},{x:0.3051864406779661, y:3.0299237288135594},{x:0.30433898305084744, y:2.9994152542372885},{x:0.3068813559322034, y:2.9604322033898307},{x:0.32976271186440675, y:2.9350084745762715},{x:0.35942372881355933, y:2.942635593220339},{x:0.38145762711864406, y:2.9612796610169494},{x:0.37213559322033896, y:2.976533898305085},{x:0.3450169491525424, y:2.983313559322034},{x:0.3407796610169491, y:3.0002627118644067},{x:0.3704406779661017, y:3.0155169491525426},{x:0.3780677966101695, y:3.040940677966102},{x:0.3492542372881356, y:3.0519576271186444}), 
  new Array({x:0.3789152542372881, y:2.9392457627118644},{x:0.3823050847457627, y:2.9629745762711868},{x:0.3611186440677966, y:2.9731440677966106},{x:0.32552542372881355, y:2.9841610169491526},{x:0.30857627118644065, y:3.002805084745763},{x:0.3323050847457627, y:3.0138220338983053},{x:0.3662033898305085, y:3.0231440677966104},{x:0.38061016949152543, y:3.045177966101695},{x:0.35264406779661017, y:3.059584745762712},{x:0.3094237288135593, y:3.0485677966101696},{x:0.3153559322033898, y:3.0163644067796613},{x:0.33823728813559323, y:2.995177966101695},{x:0.3662033898305085, y:2.988398305084746},{x:0.35264406779661017, y:2.9646694915254237},{x:0.3170508474576271, y:2.9485677966101695},{x:0.3365423728813559, y:2.9341610169491528},{x:0.3653559322033898, y:2.9392457627118644})
);
mosquitosPositionsPhase19S = new Array(
  //new Array({x:6.510917030567685, y:0.6768558951965066},{x:6.499272197962155, y:0.6622998544395924},{x:6.4905385735080054, y:0.6521106259097526},{x:6.4905385735080054, y:0.6215429403202329},{x:6.506550218340611, y:0.6200873362445415},{x:6.518195050946143, y:0.6259097525473072},{x:6.518195050946143, y:0.6506550218340611},{x:6.502183406113537, y:0.6593886462882096},{x:6.5152838427947595, y:0.6768558951965066},{x:6.512372634643377, y:0.6215429403202329},{x:6.5050946142649195, y:0.6055312954876274})
  new Array({x:6.495726495726496, y:0.5970695970695971},{x:6.4774114774114775, y:0.57997557997558},{x:6.47008547008547, y:0.5531135531135531},{x:6.468864468864469, y:0.5225885225885226},{x:6.473748473748474, y:0.48595848595848595},{x:6.492063492063492, y:0.4713064713064713},{x:6.518925518925519, y:0.4652014652014652},{x:6.543345543345543, y:0.4725274725274725},{x:6.555555555555555, y:0.5042735042735043},{x:6.553113553113553, y:0.5518925518925519},{x:6.545787545787546, y:0.5836385836385837},{x:6.506715506715507, y:0.5787545787545788},{x:6.506715506715507, y:0.5470085470085471},{x:6.532356532356532, y:0.5225885225885226},{x:6.526251526251526, y:0.4810744810744811},{x:6.487179487179487, y:0.47741147741147744},{x:6.471306471306471, y:0.49694749694749696},{x:6.504273504273504, y:0.4993894993894994},{x:6.537240537240537, y:0.5286935286935287},{x:6.515262515262515, y:0.5470085470085471},{x:6.4774114774114775, y:0.5531135531135531},{x:6.474969474969475, y:0.5848595848595849},{x:6.516483516483516, y:0.5787545787545788},{x:6.5506715506715505, y:0.5836385836385837},{x:6.525030525030525, y:0.6043956043956044})
);
mosquitosPositionsPhase20 = new Array(
  new Array({x:0.0855084745762712, y:2.889830508474576},{x:0.08296610169491525, y:2.906779661016949},{x:0.08466101694915251, y:2.9169491525423727},{x:0.0855084745762712, y:2.9389830508474577},{x:0.08381355932203388, y:2.9635593220338983},{x:0.07788135593220336, y:2.9703389830508473},{x:0.0855084745762712, y:2.9745762711864407},{x:0.08127118644067793, y:2.977966101694915},{x:0.08466101694915251, y:2.9822033898305085},{x:0.07957627118644067, y:2.9855932203389832},{x:0.08466101694915251, y:2.989830508474576},{x:0.0804237288135593, y:2.9957627118644066},{x:0.08635593220338983, y:2.9991525423728813},{x:0.07872881355932204, y:3.0050847457627117},{x:0.0855084745762712, y:3.0084745762711864},{x:0.0804237288135593, y:3.01271186440678},{x:0.08296610169491525, y:3.023728813559322},{x:0.08296610169491525, y:3.0372881355932204},{x:0.08127118644067793, y:3.0661016949152544},{x:0.08127118644067793, y:3.0940677966101693},{x:0.0855084745762712, y:3.1127118644067795},{x:0.09144067796610167, y:3.1220338983050846},{x:0.10584745762711861, y:3.126271186440678},{x:0.12364406779661014, y:3.1279661016949154},{x:0.13296610169491524, y:3.1415254237288135},{x:0.13381355932203387, y:3.1932203389830507},{x:0.13720338983050845, y:3.2084745762711866},{x:0.14567796610169492, y:3.2135593220338983},{x:0.1566949152542373, y:3.2152542372881356},{x:0.16940677966101692, y:3.211864406779661},{x:0.17618644067796607, y:3.2177966101694917},{x:0.18127118644067797, y:3.2084745762711866},{x:0.18974576271186439, y:3.2177966101694917},{x:0.1914406779661017, y:3.211016949152542},{x:0.19822033898305086, y:3.2161016949152543},{x:0.2033050847457627, y:3.2084745762711866},{x:0.2083898305084746, y:3.216949152542373},{x:0.2126271186440678, y:3.211016949152542},{x:0.22194915254237285, y:3.2161016949152543},{x:0.2685593220338983, y:3.2161016949152543},{x:0.3753389830508474, y:3.2152542372881356},{x:0.38720338983050845, y:3.2152542372881356},{x:0.3948305084745763, y:3.2127118644067796},{x:0.40584745762711866, y:3.2203389830508473},{x:0.41008474576271187, y:3.2093220338983053},{x:0.42025423728813555, y:3.2203389830508473},{x:0.4270338983050847, y:3.2093220338983053},{x:0.4329661016949153, y:3.216949152542373},{x:0.43889830508474575, y:3.2101694915254235},{x:0.4499152542372881, y:3.216949152542373},{x:0.4711016949152543, y:3.2152542372881356},{x:0.48635593220338985, y:3.2177966101694917},{x:0.49483050847457627, y:3.2220338983050847},{x:0.49991525423728816, y:3.23728813559322},{x:0.49991525423728816, y:3.2745762711864406},{x:0.49991525423728816, y:3.3152542372881357},{x:0.4982203389830508, y:3.344915254237288},{x:0.4990677966101695, y:3.3627118644067795}, {x:0.5066949152542373, y:3.3754237288135593},{x:0.5321186440677965, y:3.3779661016949154},{x:0.5558474576271186, y:3.378813559322034},{x:0.5694067796610169, y:3.3838983050847458},{x:0.5761864406779662, y:3.3949152542372882},{x:0.5761864406779662, y:3.411864406779661},{x:0.5761864406779662, y:3.4627118644067796},{x:0.5761864406779662, y:3.477118644067797},{x:0.5821186440677966, y:3.483050847457627},{x:0.5897457627118643, y:3.4889830508474575},{x:0.6185593220338983, y:3.490677966101695},{x:0.6516101694915255, y:3.4889830508474575},{x:0.6575423728813559, y:3.480508474576271},{x:0.6600847457627119, y:3.4694915254237286},{x:0.6583898305084745, y:3.450847457627119},{x:0.6685593220338983, y:3.3796610169491523})
);
mosquitosPositionsPhase20S = new Array(
  //new Array({x:5.141193595342067, y:0.22561863173216884},{x:5.141193595342067, y:0.2096069868995633},{x:5.138282387190684, y:0.19213973799126638},{x:5.139737991266376, y:0.16011644832605532},{x:5.139737991266376, y:0.13100436681222707},{x:5.142649199417758, y:0.11208151382823872},{x:5.155749636098981, y:0.10334788937409024},{x:5.186317321688501, y:0.10189228529839883},{x:5.5050946142649195, y:0.10189228529839883},{x:5.9374090247452695, y:0.09898107714701601},{x:5.9825327510917035, y:0.10334788937409024},{x:5.9970887918486175, y:0.10043668122270742},{x:6.0029112081513825, y:0.08442503639010189},{x:6.0029112081513825, y:0.05822416302765648},{x:6.005822416302766, y:0.036390101892285295},{x:6.013100436681222, y:0.027656477438136828},{x:6.03056768558952, y:0.023289665211062592},{x:6.197962154294032, y:0.026200873362445413},{x:6.219796215429403, y:0.033478893740902474},{x:6.228529839883552, y:0.053857350800582245},{x:6.225618631732169, y:0.29694323144104806},{x:6.2372634643377, y:0.3173216885007278},{x:6.254730713245997, y:0.31877729257641924},{x:6.27802037845706, y:0.3289665211062591},{x:6.2809315866084425, y:0.35662299854439594},{x:6.285298398835517, y:0.40465793304221254},{x:6.302765647743814, y:0.4148471615720524},{x:6.318777292576419, y:0.4163027656477438},{x:6.327510917030568, y:0.42066957787481807},{x:6.333333333333333, y:0.413391557496361},{x:6.342066957787482, y:0.42066957787481807},{x:6.352256186317321, y:0.4163027656477438},{x:6.36098981077147, y:0.42358078602620086},{x:6.369723435225619, y:0.413391557496361},{x:6.382823871906841, y:0.4192139737991266},{x:6.558951965065503, y:0.4192139737991266},{x:6.5749636098981075, y:0.42212518195050946},{x:6.582241630276565, y:0.4119359534206696},{x:6.595342066957787, y:0.4264919941775837},{x:6.5997088791848615, y:0.4148471615720524},{x:6.612809315866085, y:0.42503639010189226},{x:6.620087336244541, y:0.4148471615720524},{x:6.637554585152839, y:0.4177583697234352},{x:6.666666666666667, y:0.42212518195050946},{x:6.685589519650655, y:0.43522561863173215},{x:6.687045123726347, y:0.48180494905385735},{x:6.688500727802038, y:0.5312954876273653},{x:6.688500727802038, y:0.5574963609898108},{x:6.688500727802038, y:0.5778748180494906},{x:6.697234352256186, y:0.5909752547307132},{x:6.713245997088792, y:0.6026200873362445},{x:6.739446870451237, y:0.5997088791848617},{x:6.759825327510917, y:0.6026200873362445},{x:6.77292576419214, y:0.6142649199417758},{x:6.774381368267831, y:0.6506550218340611},{x:6.774381368267831, y:0.7045123726346434},{x:6.7787481804949055, y:0.7205240174672489},{x:6.794759825327511, y:0.7219796215429404},{x:6.836972343522562, y:0.7219796215429404},{x:6.858806404657933, y:0.7161572052401747},{x:6.86608442503639, y:0.7132459970887919},{x:6.867540029112082, y:0.7016011644832606},{x:6.871906841339156, y:0.6754002911208151},{x:6.871906841339156, y:0.62882096069869})
  //new Array({x:5.141646489104116, y:0.22760290556900725},{x:5.14043583535109, y:0.2106537530266344},{x:5.14043583535109, y:0.19975786924939468},{x:5.1392251815980625, y:0.1791767554479419},{x:5.1392251815980625, y:0.15617433414043583},{x:5.1392251815980625, y:0.13801452784503632},{x:5.1392251815980625, y:0.12469733656174334},{x:5.14043583535109, y:0.1162227602905569},{x:5.1440677966101696, y:0.11016949152542373},{x:5.148910411622276, y:0.1053268765133172},{x:5.156174334140436, y:0.1016949152542373},{x:5.175544794188862, y:0.09927360774818401},{x:5.207021791767555, y:0.10048426150121065},{x:5.523002421307506, y:0.10048426150121065},{x:5.9176755447941884, y:0.10048426150121065},{x:5.985472154963681, y:0.09927360774818401},{x:5.99636803874092, y:0.09443099273607748},{x:6.001210653753026, y:0.08595641646489104},{x:6.00363196125908, y:0.06900726392251816},{x:6.00363196125908, y:0.05569007263922518},{x:6.0024213075060535, y:0.03753026634382567},{x:6.00726392251816, y:0.03026634382566586},{x:6.012106537530267, y:0.021791767554479417},{x:6.0290556900726395, y:0.020581113801452784},{x:6.2058111380145276, y:0.024213075060532687},{x:6.219128329297821, y:0.029055690072639227},{x:6.22639225181598, y:0.043583535108958835},{x:6.230024213075061, y:0.1234866828087167},{x:6.22639225181598, y:0.2966101694915254},{x:6.232445520581114, y:0.3099273607748184},{x:6.243341404358354, y:0.31840193704600483},{x:6.254237288135593, y:0.31840193704600483},{x:6.268765133171913, y:0.3196125907990315},{x:6.278450363196126, y:0.32566585956416466},{x:6.283292978208232, y:0.34261501210653755},{x:6.284503631961259, y:0.37409200968523004},{x:6.283292978208232, y:0.39709443099273606},{x:6.291767554479419, y:0.4128329297820823},{x:6.306295399515738, y:0.41646489104116224},{x:6.317191283292979, y:0.41646489104116224},{x:6.325665859564165, y:0.4188861985472155},{x:6.330508474576271, y:0.4116222760290557},{x:6.3341404358353515, y:0.41767554479418884},{x:6.338983050847458, y:0.4116222760290557},{x:6.342615012106537, y:0.41767554479418884},{x:6.346246973365617, y:0.4128329297820823},{x:6.352300242130751, y:0.41646489104116224},{x:6.3559322033898304, y:0.41041162227602906},{x:6.357142857142857, y:0.4188861985472155},{x:6.361985472154964, y:0.4128329297820823},{x:6.3692493946731235, y:0.4225181598062954},{x:6.37409200968523, y:0.4152542372881356},{x:6.391041162227603, y:0.4188861985472155},{x:6.562953995157385, y:0.4188861985472155},{x:6.579903147699758, y:0.41404358353510895},{x:6.585956416464891, y:0.4225181598062954},{x:6.5907990314769975, y:0.4116222760290557},{x:6.594430992736077, y:0.4188861985472155},{x:6.598062953995157, y:0.4116222760290557},{x:6.602905569007264, y:0.41646489104116224},{x:6.60774818401937, y:0.4128329297820823},{x:6.61138014527845, y:0.4188861985472155},{x:6.616222760290557, y:0.4116222760290557},{x:6.621065375302663, y:0.42009685230024213},{x:6.623486682808717, y:0.4152542372881356},{x:6.642857142857143, y:0.41767554479418884},{x:6.662227602905569, y:0.42009685230024213},{x:6.674334140435835, y:0.4225181598062954},{x:6.682808716707021, y:0.4297820823244552},{x:6.690072639225182, y:0.4491525423728814},{x:6.687651331719128, y:0.5012106537530266},{x:6.686440677966102, y:0.5581113801452785},{x:6.686440677966102, y:0.5738498789346247},{x:6.688861985472155, y:0.5847457627118644},{x:6.703389830508475, y:0.5968523002421308},{x:6.72639225181598, y:0.6004842615012107},{x:6.745762711864407, y:0.6004842615012107},{x:6.762711864406779, y:0.6029055690072639},{x:6.769975786924939, y:0.612590799031477},{x:6.776029055690072, y:0.6246973365617433},{x:6.776029055690072, y:0.6404358353510896},{x:6.776029055690072, y:0.6646489104116223},{x:6.77360774818402, y:0.6828087167070218},{x:6.77360774818402, y:0.7009685230024213},{x:6.780871670702179, y:0.7130750605326877},{x:6.791767554479419, y:0.7179176755447942},{x:6.811138014527845, y:0.7203389830508474},{x:6.832929782082324, y:0.7203389830508474},{x:6.851089588377724, y:0.7191283292978208},{x:6.85956416464891, y:0.715496368038741},{x:6.86682808716707, y:0.7033898305084746},{x:6.87046004842615, y:0.652542372881356})
  new Array({x:5.140287769784172, y:0.2278177458033573},{x:5.139088729016787, y:0.20623501199040767},{x:5.139088729016787, y:0.1882494004796163},{x:5.136690647482014, y:0.1642685851318945},{x:5.136690647482014, y:0.1474820143884892},{x:5.1378896882494, y:0.12949640287769784},{x:5.140287769784172, y:0.11750599520383694},{x:5.142685851318944, y:0.11031175059952038},{x:5.149880095923262, y:0.10431654676258993},{x:5.161870503597123, y:0.09952038369304557},{x:5.199040767386091, y:0.09592326139088729},{x:5.980815347721823, y:0.09952038369304557},{x:5.995203836930456, y:0.09352517985611511},{x:5.9988009592326135, y:0.08752997601918465},{x:6.0011990407673865, y:0.07553956834532374},{x:6.0011990407673865, y:0.06115107913669065},{x:6.002398081534772, y:0.04316546762589928},{x:6.002398081534772, y:0.03717026378896882},{x:6.004796163069544, y:0.03237410071942446},{x:6.009592326139089, y:0.026378896882494004},{x:6.017985611510792, y:0.02158273381294964},{x:6.03357314148681, y:0.019184652278177457},{x:6.199040767386091, y:0.02158273381294964},{x:6.213429256594724, y:0.026378896882494004},{x:6.2254196642685855, y:0.03836930455635491},{x:6.23021582733813, y:0.05515587529976019},{x:6.232613908872902, y:0.22302158273381295},{x:6.2314148681055155, y:0.23501199040767387},{x:6.232613908872902, y:0.2422062350119904},{x:6.2398081534772185, y:0.24820143884892087},{x:6.252997601918465, y:0.2529976019184652},{x:6.264988009592326, y:0.2529976019184652},{x:6.275779376498801, y:0.25539568345323743},{x:6.2829736211031175, y:0.26498800959232616},{x:6.287769784172662, y:0.2805755395683453},{x:6.286570743405276, y:0.33213429256594723},{x:6.292565947242206, y:0.34532374100719426},{x:6.309352517985611, y:0.3501199040767386},{x:6.320143884892087, y:0.34652278177458035},{x:6.3261390887290165, y:0.3513189448441247},{x:6.333333333333333, y:0.3441247002398082},{x:6.335731414868105, y:0.3501199040767386},{x:6.341726618705036, y:0.34532374100719426},{x:6.34652278177458, y:0.3513189448441247},{x:6.35251798561151, y:0.3405275779376499},{x:6.356115107913669, y:0.3501199040767386},{x:6.363309352517986, y:0.3405275779376499},{x:6.36810551558753, y:0.34772182254196643},{x:6.374100719424461, y:0.3393285371702638},{x:6.384892086330935, y:0.3489208633093525},{x:6.5647482014388485, y:0.3489208633093525},{x:6.580335731414868, y:0.3441247002398082},{x:6.5875299760191846, y:0.3513189448441247},{x:6.592326139088729, y:0.34172661870503596},{x:6.59832134292566, y:0.3489208633093525},{x:6.610311750599521, y:0.3405275779376499},{x:6.615107913669065, y:0.34532374100719426},{x:6.624700239808154, y:0.34172661870503596},{x:6.633093525179856, y:0.3513189448441247},{x:6.670263788968825, y:0.3537170263788969},{x:6.684652278177458, y:0.3609112709832134},{x:6.689448441247002, y:0.3800959232613909},{x:6.68705035971223, y:0.4316546762589928},{x:6.68705035971223, y:0.47721822541966424},{x:6.689448441247002, y:0.5155875299760192},{x:6.6882494004796165, y:0.5215827338129496},{x:6.727817745803358, y:0.5323741007194245},{x:6.752997601918465, y:0.5299760191846523},{x:6.76978417266187, y:0.5359712230215827},{x:6.779376498800959, y:0.5575539568345323},{x:6.779376498800959, y:0.5911270983213429},{x:6.779376498800959, y:0.6354916067146283},{x:6.786570743405276, y:0.6498800959232613},{x:6.804556354916067, y:0.6534772182254197},{x:6.829736211031175, y:0.6534772182254197},{x:6.848920863309353, y:0.6486810551558753},{x:6.863309352517986, y:0.6306954436450839},{x:6.866906474820144, y:0.5983213429256595})
)
mosquitosPositionsPhase21 = new Array(
  new Array({x:0.6314576271186441, y:3.047720338983051},{x:0.6645084745762712, y:3.0511101694915257},{x:0.6856949152542373, y:3.0426355932203393},{x:0.6882372881355933, y:3.0155169491525426},{x:0.6678983050847458, y:2.9900932203389834},{x:0.6712881355932203, y:2.968906779661017},{x:0.6814576271186441, y:2.950262711864407},{x:0.6670508474576271, y:2.9341610169491528},{x:0.6382372881355932, y:2.936703389830509},{x:0.6390847457627119, y:2.950262711864407},{x:0.6102711864406779, y:2.962127118644068},{x:0.6077288135593221, y:2.98585593220339},{x:0.6297627118644068, y:3.001957627118644},{x:0.6153559322033898, y:3.030771186440678},{x:0.6255254237288136, y:3.0545}),
  new Array({x:0.6526440677966101, y:2.9290762711864406},{x:0.669593220338983, y:2.937550847457627},{x:0.6738305084745763, y:2.9672118644067798},{x:0.6585762711864407, y:2.976533898305085},{x:0.6289152542372881, y:2.9934830508474577},{x:0.6128135593220339, y:3.0087372881355936},{x:0.6102711864406779, y:3.0367033898305085},{x:0.6263728813559322, y:3.050262711864407},{x:0.6534915254237288, y:3.0536525423728813},{x:0.669593220338983, y:3.0417881355932206},{x:0.6755254237288135, y:3.0248389830508478},{x:0.6534915254237288, y:3.0061949152542375},{x:0.6229830508474576, y:2.9867033898305086},{x:0.6162033898305085, y:2.9587372881355933},{x:0.6534915254237288, y:2.943483050847458},{x:0.6543389830508475, y:2.936703389830509})
);
mosquitosPositionsPhase21S = new Array(
  //new Array({x:6.861717612809316, y:0.6681222707423581},{x:6.847161572052402, y:0.6564774381368268},{x:6.851528384279476, y:0.6331877729257642},{x:6.871906841339156, y:0.6302765647743813},{x:6.871906841339156, y:0.5997088791848617},{x:6.841339155749636, y:0.5997088791848617},{x:6.841339155749636, y:0.6273653566229985},{x:6.873362445414847, y:0.6419213973799127},{x:6.867540029112082, y:0.6724890829694323})
  new Array({x:6.869352869352869, y:0.5970695970695971},{x:6.886446886446887, y:0.5824175824175825},{x:6.897435897435898, y:0.5665445665445665},{x:6.912087912087912, y:0.5299145299145299},{x:6.913308913308914, y:0.5067155067155067},{x:6.913308913308914, y:0.48473748473748474},{x:6.904761904761905, y:0.46886446886446886},{x:6.887667887667888, y:0.45787545787545786},{x:6.863247863247863, y:0.45787545787545786},{x:6.847374847374847, y:0.4627594627594628},{x:6.827838827838828, y:0.47985347985347987},{x:6.827838827838828, y:0.4993894993894994},{x:6.859584859584859, y:0.5128205128205128},{x:6.8791208791208796, y:0.525030525030525},{x:6.869352869352869, y:0.5396825396825397},{x:6.836385836385836, y:0.5457875457875457},{x:6.824175824175824, y:0.5665445665445665},{x:6.824175824175824, y:0.5848595848595849},{x:6.841269841269841, y:0.5897435897435898},{x:6.863247863247863, y:0.5677655677655677},{x:6.8498168498168495, y:0.5421245421245421},{x:6.8498168498168495, y:0.5238095238095238},{x:6.8669108669108665, y:0.5115995115995116},{x:6.882783882783883, y:0.5164835164835165},{x:6.893772893772894, y:0.5396825396825397},{x:6.891330891330892, y:0.557997557997558},{x:6.871794871794871, y:0.5677655677655677},{x:6.880341880341881, y:0.6031746031746031},{x:6.90964590964591, y:0.6019536019536019},{x:6.90964590964591, y:0.5836385836385837},{x:6.9010989010989015, y:0.5726495726495726},{x:6.877899877899878, y:0.5775335775335775})
);
var pregnantSelected = false;
var nonPregnantSelected = false;
/**************************************
        Animations
**************************************/
var canvas, canvas2, canvas3, canvas4, canvas5, context, context2, context3, context4, context5;
var mosquitosArray = new Array()
var totalMosquitos = 100;
var stopMain = false;
var currentMosquitoPhase = 0;
var currentPhase = 0;
var mosquitosLeft = totalMosquitos;
var pregnantMosquitos = 0;
var leftCoverGlass, rightCoverGlass, leftCoverGlassHover, rightCoverGlassHover;
var hoverBehaviorImagesDesktop = new Array("icon1_hover.png","icon2_hover.png","icon3_hover.png","icon4_hover.png","icon5_hover.png","icon6_hover.png","icon7_hover.png","icon8_hover.png","icon9_hover.png");
var behaviorImagesDesktop = new Array("icon1.png","icon2.png","icon3.png","icon4.png","icon5.png","icon6.png","icon7.png","icon8.png","icon9.png");
var hoverBehaviorImagesMobile = new Array("icon1mobile_hover.png","icon2mobile_hover.png","icon3mobile_hover.png","icon4mobile_hover.png","icon5mobile_hover.png","icon6mobile_hover.png","icon7mobile_hover.png","icon8mobile_hover.png","icon9mobile_hover.png");
var behaviorImagesMobile = new Array("icon1mobile.png","icon2mobile.png","icon3mobile.png","icon4mobile.png","icon5mobile.png","icon6mobile.png","icon7mobile.png","icon8mobile.png","icon9mobile.png");
var hoverBehaviorImages = hoverBehaviorImagesDesktop;
var behaviorImages = behaviorImagesDesktop;
var tabletTreshold = 279;//957;
var mobileTreshold = 600;
var cell = 0;

if((mobile_browser == 1)&&(ipad_browser == 0))
{
  if(window.innerHeight > window.innerWidth){
    hoverBehaviorImages = hoverBehaviorImagesMobile;
    behaviorImages = behaviorImagesMobile;
  }else{
    tabletTreshold = 3000;
    hoverBehaviorImages = hoverBehaviorImagesDesktop;
    behaviorImages = behaviorImagesDesktop;
  }
}
if((ipad_browser == 1)&&(window.orientation==1))
{
  tabletTreshold = 3000;
}
if(mobile_browser == 0)
{
  $('#pgStep2 .pgStep__info').hide();
  $('#pgStep3 .pgStep__info').hide();
}

changeIcons();

window.addEventListener("orientationchange", function() {
  // Announce the new orientation number
  if(window.orientation==0)
  {
    tabletTreshold = 279;
    hoverBehaviorImages = hoverBehaviorImagesMobile;
    behaviorImages = behaviorImagesMobile;
  }else{
    tabletTreshold = 3000;
    hoverBehaviorImages = hoverBehaviorImagesDesktop;
    behaviorImages = behaviorImagesDesktop;
  }

  changeIcons();
}, false);


function changeIcons()
{
  for(i=0;i<behaviorImages.length;i++)
  {
      $('#icon'+i).attr("src", "./images/" + behaviorImages[i]);
  }
}
/**
  The canvasImage class represents an element drawn on the canvas.
 
  @class CanvasImage
  @constructor
*/
function CanvasImage(img, x, y, angle, speed, type, currentImage, positionsArray) {
  this.image = img;
  this.x = x;
  this.y = y;
  this.xAmount = 0;
  this.yAmount = 0;
  this.width = img.width;
  this.height = img.height;
  this.position = 1;
  this.angle = angle;
  this.speed = speed;
  this.type = type;
  this.currentImage = currentImage;
  this.firstTime = false;
  this.currentPosition = 0;
  this.positionsArray = positionsArray;
  this.currentMosquitoPhase = 0;
  this.flippedImages = new Array();
  return this;
}
//Setup request animation frame
var requestAnimationFrame = function(time) {
  if (!stopMain) {
    main(time);
  }
  
  window.requestAnimationFrame(requestAnimationFrame);
}
var requestAnimationFrameInitialization = function(){
  var lastTime = 0;
  var vendors = ['ms', 'moz', 'webkit', 'o'];
  for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
      window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
      window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame']
                                 || window[vendors[x]+'CancelRequestAnimationFrame'];
  }
 
  if (!window.requestAnimationFrame) {
    window.requestAnimationFrame = function(callback, element) {
        var currTime = new Date().getTime();
        var timeToCall = Math.max(0, 16 - (currTime - lastTime));
        var id = window.setTimeout(function() { callback(currTime + timeToCall); },
          timeToCall);
        lastTime = currTime + timeToCall;
        return id;
    };
  }
 
  if (!window.cancelAnimationFrame) {
    window.cancelAnimationFrame = function(id) {
      clearTimeout(id);
    };
  }
}
//Setup main loop
var setupMainLoop = function(){
  requestAnimationFrameInitialization();
    setTimeout(function() {
      window.requestAnimationFrame(requestAnimationFrame);
      currentPhase = 1;

      $('#pgStep1 .pg-button').removeAttr("disabled");
    }, 1500);
}
//Execute main loop
var main = function(time){
  // clear the canvas
  context.clearRect(0, 0, context.canvas.width, context.canvas.height);

  mosquitosArray.forEach(function(element,index,array){
    switch (element.currentMosquitoPhase) {
      case 0:
      case 2:
      case 4:
      case 6:
      case 8:
      case 10:
      case 12:
      case 14:
      case 16:
      case 18:
      case 20:
      case 22:
        if (((element.x > element.positionsArray[element.currentPosition].x &&
            element.xDir) || (element.x < element.positionsArray[element.currentPosition].x &&
            !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) && 
           ((element.y > element.positionsArray[element.currentPosition].y &&
            element.yDir) || (element.y < element.positionsArray[element.currentPosition].y &&
            !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y))) {
          element.currentPosition = element.currentPosition + 1;
          if (element.currentPosition >= element.positionsArray.length) {
            element.currentPosition = 0;
          }
          if (element.x > element.positionsArray[element.currentPosition].x) {
            element.xDir = false;
          }
          else {
            element.xDir = true;
          }
          if (element.y > element.positionsArray[element.currentPosition].y) {
            element.yDir = false;
          }
          else {
            element.yDir = true;
          }
        }

        var xvalue = Math.abs(element.positionsArray[element.currentPosition].x - element.x);
        var yvalue = Math.abs(element.positionsArray[element.currentPosition].y - element.y);
        var xAmount = 0;
        var yAmount = 0;

        if (xvalue < yvalue) {
          xAmount = (xvalue / yvalue) * element.speed;
          yAmount = element.speed;
        }
        else {
          yAmount = (yvalue / xvalue) * element.speed;
          xAmount = element.speed;
        }

        element.x = ((element.x > element.positionsArray[element.currentPosition].x && element.xDir) || (element.x < element.positionsArray[element.currentPosition].x && !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) ? element.x : (element.positionsArray[element.currentPosition].x < element.x) ? element.x - xAmount : element.x + xAmount;
        element.y = ((element.y > element.positionsArray[element.currentPosition].y && element.yDir) || (element.y < element.positionsArray[element.currentPosition].y && !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ? element.y : (element.positionsArray[element.currentPosition].y < element.y) ? element.y - yAmount : element.y + yAmount;

        element.currentImage = element.currentImage + 1;
        if (element.currentImage >= element.image.length) {
          element.currentImage = 0;
        }

        var w = (canvas.width * 0.01) + ((Math.random() * 0.001) - 0.0005)

        var wMultiplier = 1.0;
        if ($(".pgArticle").width() < tabletTreshold) {
          wMultiplier = 0.125;
        }

        if (element.currentMosquitoPhase == 22) {

          if (element.xDir) {
            context.drawImage(element.flippedImages[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * ( 16.0/12.0) * wMultiplier);
          }
          else {
            context.drawImage(element.image[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * ( 16.0/12.0) * wMultiplier);
          }
        }
        else {
          if (element.xDir) {
            context.drawImage(element.flippedImages[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * ( 16.0/12.0) * wMultiplier);
          }
          else {
            context.drawImage(element.image[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * ( 16.0/12.0) * wMultiplier);
          }
        }
        
      break;
      case 1:
        if (((element.x > element.positionsArray[element.currentPosition].x &&
            element.xDir) || (element.x < element.positionsArray[element.currentPosition].x &&
            !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) &&  
           ((element.y > element.positionsArray[element.currentPosition].y &&
            element.yDir) || (element.y < element.positionsArray[element.currentPosition].y &&
            !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ) {
          element.currentPosition = element.currentPosition + 1;
          if (element.currentPosition >= element.positionsArray.length) {
            element.currentPosition = 0;

            if ($(".pgArticle").width() < tabletTreshold) {
              var auxPositionsArray = mosquitosPositionsPhase3S[index%mosquitosPositionsPhase3S.length];
            }
            else {
              var auxPositionsArray = mosquitosPositionsPhase3[index%mosquitosPositionsPhase3.length];
            }
            
            auxPositionsArray = shuffle(auxPositionsArray);
            element.positionsArray = new Array();
            auxPositionsArray.forEach(function(element2,index2,array2) {
              if ($(".pgArticle").width() < tabletTreshold) {
                element.positionsArray.push(element2);
              }
              else {
                var auxElement = {x: element2.x + (((Math.random() * 0.1) - 0.05) * 1.0), y: element2.y + (((Math.random() * 0.1) - 0.05) * 1.0)};
                auxElement.x = Math.max(0.086,Math.min(0.135, auxElement.x)) + 0.01;
                auxElement.y = Math.max(0.555,Math.min(0.715, auxElement.y)) + 0.04;
                element.positionsArray.push(auxElement);
              }
            });

            currentPhase = 2;

            if (index == mosquitosLeft - 1) {
              $('#pgQuestion-container1 .pg-button').removeAttr("disabled");
              $('#pgQuestion-container1 select').removeAttr("disabled");
              $('#pgQuestion-container1').removeAttr("disabled");
            }

            element.currentPosition = Math.floor(Math.random() * element.positionsArray.length);

            var nextPosition = element.currentPosition + 1;
            if (nextPosition >= element.positionsArray.length) {
              nextPosition = 0;
            }

            if (element.x > element.positionsArray[nextPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[nextPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }

            element.currentMosquitoPhase = 2;
            element.speed = 0.001;
          }
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
        }

        var xvalue = Math.abs(element.positionsArray[element.currentPosition].x - element.x);
        var yvalue = Math.abs(element.positionsArray[element.currentPosition].y - element.y);
        var xAmount = 0;
        var yAmount = 0;

        if (xvalue < yvalue) {
          xAmount = (xvalue / yvalue) * element.speed;
          yAmount = element.speed;
        }
        else {
          yAmount = (yvalue / xvalue) * element.speed;
          xAmount = element.speed;
        }

        element.x = ((element.x > element.positionsArray[element.currentPosition].x && element.xDir) || (element.x < element.positionsArray[element.currentPosition].x && !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) ? element.x : (element.positionsArray[element.currentPosition].x < element.x) ? element.x - xAmount : element.x + xAmount;
        element.y = ((element.y > element.positionsArray[element.currentPosition].y && element.yDir) || (element.y < element.positionsArray[element.currentPosition].y && !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ? element.y : (element.positionsArray[element.currentPosition].y < element.y) ? element.y - yAmount : element.y + yAmount;

        var w = (canvas.width * 0.01) + ((Math.random() * 0.001) - 0.0005)
        var wMultiplier = 1.0;
        if ($(".pgArticle").width() < tabletTreshold) {
          wMultiplier = 0.125;
        }

        if (element.xDir) {
          context.drawImage(element.flippedImages[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * wMultiplier * ( 16.0/12.0));
        }
        else {
          context.drawImage(element.image[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * wMultiplier * ( 16.0/12.0));
        }

        /*var xvalue = Math.abs(element.positionsArray[element.currentPosition].x - element.x);
        var yvalue = Math.abs(element.positionsArray[element.currentPosition].y - element.y);
        var xAmount = 0;
        var yAmount = 0;

        if (xvalue < yvalue) {
          xAmount = (xvalue / yvalue) * element.speed;
          yAmount = element.speed;
        }
        else {
          yAmount = (yvalue / xvalue) * element.speed;
          xAmount = element.speed;
        }

        element.x = ((element.x > element.positionsArray[element.currentPosition].x && element.xDir) || (element.x < element.positionsArray[element.currentPosition].x && !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) ? element.x : (element.positionsArray[element.currentPosition].x < element.x) ? element.x - xAmount : element.x + xAmount;
        element.y = ((element.y > element.positionsArray[element.currentPosition].y && element.yDir) || (element.y < element.positionsArray[element.currentPosition].y && !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ? element.y : (element.positionsArray[element.currentPosition].y < element.y) ? element.y - yAmount : element.y + yAmount;

        var w = (canvas.width * 0.01) + ((Math.random() * 0.001) - 0.0005)
        w = w * 0.125;

        var wMultiplier = 1.0;
        if ($(".pgArticle").width() < tabletTreshold) {
          wMultiplier = 0.125;
        }

        if (element.xDir) {
          context.drawImage(element.flippedImages[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * ( 16.0/12.0) * wMultiplier);
        }
        else {
          context.drawImage(element.image[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * ( 16.0/12.0) * wMultiplier);
        }*/
      break;
      case 3:
        if (((element.x > element.positionsArray[element.currentPosition].x &&
            element.xDir) || (element.x < element.positionsArray[element.currentPosition].x &&
            !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) &&  
           ((element.y > element.positionsArray[element.currentPosition].y &&
            element.yDir) || (element.y < element.positionsArray[element.currentPosition].y &&
            !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ) {
          element.currentPosition = element.currentPosition + 1;
          if (element.currentPosition >= element.positionsArray.length) {
            element.currentPosition = 0;
            var auxPositionsArray = mosquitosPositionsPhase5[index%mosquitosPositionsPhase5.length];

            if ($(".pgArticle").width() < tabletTreshold) {
              auxPositionsArray = mosquitosPositionsPhase5S[index%mosquitosPositionsPhase5S.length];
            }

            auxPositionsArray = shuffle(auxPositionsArray);
            element.positionsArray = new Array();
            auxPositionsArray.forEach(function(element2,index2,array2) {
              if ($(".pgArticle").width() < tabletTreshold) {
                element.positionsArray.push(element2);
              }
              else {
                var auxElement = {x: element2.x + (((Math.random() * 0.1) - 0.05) * 1.0), y: element2.y + (((Math.random() * 0.1) - 0.05) * 1.0)};
                auxElement.x = Math.max(0.076,Math.min(0.15, auxElement.x)) + 0.01;
                auxElement.y = Math.max(0.81,Math.min(0.86, auxElement.y)) + 0.05;
                if (auxElement.x >= 0.14 || auxElement.x <= 0.087) {
                  if (auxElement.y <= 0.82) {
                    auxElement.y = auxElement.y + 0.04;
                  }
                  else if (auxElement.y >= 0.83) {
                    auxElement.y = auxElement.y - 0.02;
                  }
                }
                element.positionsArray.push(auxElement);
              }
            });

            element.currentPosition = Math.floor(Math.random() * element.positionsArray.length);
            //element.x = element.positionsArray[element.currentPosition].x;
            //element.y = element.positionsArray[element.currentPosition].y;

            var nextPosition = element.currentPosition + 1;
            if (nextPosition >= element.positionsArray.length) {
              nextPosition = 0;
            }

            if (element.x > element.positionsArray[nextPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[nextPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }

            element.currentMosquitoPhase = 4;
            element.speed = 0.001;
          }
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
        }

        var xvalue = Math.abs(element.positionsArray[element.currentPosition].x - element.x);
        var yvalue = Math.abs(element.positionsArray[element.currentPosition].y - element.y);
        var xAmount = 0;
        var yAmount = 0;

        if (xvalue < yvalue) {
          xAmount = (xvalue / yvalue) * element.speed;
          yAmount = element.speed;
        }
        else {
          yAmount = (yvalue / xvalue) * element.speed;
          xAmount = element.speed;
        }

        element.x = ((element.x > element.positionsArray[element.currentPosition].x && element.xDir) || (element.x < element.positionsArray[element.currentPosition].x && !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) ? element.x : (element.positionsArray[element.currentPosition].x < element.x) ? element.x - xAmount : element.x + xAmount;
        element.y = ((element.y > element.positionsArray[element.currentPosition].y && element.yDir) || (element.y < element.positionsArray[element.currentPosition].y && !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ? element.y : (element.positionsArray[element.currentPosition].y < element.y) ? element.y - yAmount : element.y + yAmount;

        var w = (canvas.width * 0.01) + ((Math.random() * 0.001) - 0.0005)
        var wMultiplier = 1.0;
        if ($(".pgArticle").width() < tabletTreshold) {
          wMultiplier = 0.125;
        }

        if (element.xDir) {
          context.drawImage(element.flippedImages[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * wMultiplier * ( 16.0/12.0));
        }
        else {
          context.drawImage(element.image[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * wMultiplier * ( 16.0/12.0));
        }
      break;
      case 5:
        if (((element.x > element.positionsArray[element.currentPosition].x &&
            element.xDir) || (element.x < element.positionsArray[element.currentPosition].x &&
            !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) &&  
           ((element.y > element.positionsArray[element.currentPosition].y &&
            element.yDir) || (element.y < element.positionsArray[element.currentPosition].y &&
            !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ) {
          element.currentPosition = element.currentPosition + 1;
          if (element.currentPosition >= element.positionsArray.length) {
            element.currentPosition = 0;
            
            currentPhase = 3;

            if (index == mosquitosLeft - 1) {
              $("#pgStep2 .pg-button").removeAttr("disabled");
              $("#pgStep2").removeAttr("disabled");
            }

            var auxPositionsArray = mosquitosPositionsPhase7[index%mosquitosPositionsPhase7.length];

            if ($(".pgArticle").width() < tabletTreshold) {
              auxPositionsArray = mosquitosPositionsPhase7S[index%mosquitosPositionsPhase7S.length];
            }

            auxPositionsArray = shuffle(auxPositionsArray);
            element.positionsArray = new Array();
            auxPositionsArray.forEach(function(element2,index2,array2) {
              if ($(".pgArticle").width() < tabletTreshold) {
                element.positionsArray.push(element2);
              }
              else {
                var auxElement = {x: element2.x + (((Math.random() * 0.1) - 0.05) * 1.0), y: element2.y + (((Math.random() * 0.1) - 0.05) * 1.0)};
              if (auxElement.x >= 0.42 || auxElement.x <= 0.39) {
                if (auxElement.y <= 1.206610169491526) {
                  auxElement.y = 1.20;
                }
                else if (auxElement.y >= 1.28) {
                  auxElement.y = 1.28;
                }
              }
              if (auxElement.x >= 0.49) {
                  auxElement.x = 0.49
                }
                if (auxElement.x <= 0.36) {
                  auxElement.x = 0.36
                }
                if (auxElement.y >= 1.3) {
                  auxElement.y = 1.3
                }
                if (auxElement.y <= 1.19) {
                  auxElement.y = 1.19
                }
              element.positionsArray.push(auxElement);
              }
            });

            element.currentPosition = Math.floor(Math.random() * element.positionsArray.length);
            //element.x = element.positionsArray[element.currentPosition].x;
            //element.y = element.positionsArray[element.currentPosition].y;

            var nextPosition = element.currentPosition + 1;
            if (nextPosition >= element.positionsArray.length) {
              nextPosition = 0;
            }

            if (element.x > element.positionsArray[nextPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[nextPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }

            element.currentMosquitoPhase = 6;
            element.speed = 0.001;
          }
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
        }

        var xvalue = Math.abs(element.positionsArray[element.currentPosition].x - element.x);
        var yvalue = Math.abs(element.positionsArray[element.currentPosition].y - element.y);
        var xAmount = 0;
        var yAmount = 0;

        if (xvalue < yvalue) {
          xAmount = (xvalue / yvalue) * element.speed;
          yAmount = element.speed;
        }
        else {
          yAmount = (yvalue / xvalue) * element.speed;
          xAmount = element.speed;
        }

        element.x = ((element.x > element.positionsArray[element.currentPosition].x && element.xDir) || (element.x < element.positionsArray[element.currentPosition].x && !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) ? element.x : (element.positionsArray[element.currentPosition].x < element.x) ? element.x - xAmount : element.x + xAmount;
        element.y = ((element.y > element.positionsArray[element.currentPosition].y && element.yDir) || (element.y < element.positionsArray[element.currentPosition].y && !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ? element.y : (element.positionsArray[element.currentPosition].y < element.y) ? element.y - yAmount : element.y + yAmount;

        var w = (canvas.width * 0.01) + ((Math.random() * 0.001) - 0.0005)
        var wMultiplier = 1.0;
        if ($(".pgArticle").width() < tabletTreshold) {
          wMultiplier = 0.125;
        }

        if (element.xDir) {
          context.drawImage(element.flippedImages[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * wMultiplier * ( 16.0/12.0));
        }
        else {
          context.drawImage(element.image[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * wMultiplier * ( 16.0/12.0));
        }
      break;
      case 7:
        if (((element.x > element.positionsArray[element.currentPosition].x &&
            element.xDir) || (element.x < element.positionsArray[element.currentPosition].x &&
            !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) &&  
           ((element.y > element.positionsArray[element.currentPosition].y &&
            element.yDir) || (element.y < element.positionsArray[element.currentPosition].y &&
            !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ) {
          element.currentPosition = element.currentPosition + 1;
          if (element.currentPosition >= element.positionsArray.length) {
            element.currentPosition = 0;
            //element.positionsArray = mosquitosPositionsPhase9[index%mosquitosPositionsPhase9.length];

            if (index == mosquitosLeft - 1) {
              $("#pgStep2 .pg-button").attr("disabled", "disabled");
              $("#pgStep2").attr("disabled", "disabled");

              $('#pgQuestion-container2 .pg-button').removeAttr("disabled");
              $('#pgQuestion-container2').removeAttr("disabled");

              $('.pgQuestion__body__option').removeClass("disabled-option");
            }

            var auxPositionsArray = mosquitosPositionsPhase9[index%mosquitosPositionsPhase9.length];

            if ($(".pgArticle").width() < tabletTreshold) {
              auxPositionsArray = mosquitosPositionsPhase9S[index%mosquitosPositionsPhase9S.length];
            }

            if ($(".pgArticle").width() < tabletTreshold) {
              var auxPositionsArray = mosquitosPositionsPhase9S[index%mosquitosPositionsPhase9S.length];
            }
            auxPositionsArray = shuffle(auxPositionsArray);
            element.positionsArray = new Array();
            auxPositionsArray.forEach(function(element2,index2,array2) {
              if ($(".pgArticle").width() < tabletTreshold) {
                element.positionsArray.push(element2);
              }
              else {
                var auxElement = {x: element2.x + (((Math.random() * 0.01) - 0.005) * 1.0), y: element2.y + (((Math.random() * 0.01) - 0.005) * 1.0)};
                if (auxElement.x >= 0.885 || auxElement.x <= 0.806) {
                  if (auxElement.y <= 1.487) {
                    auxElement.y = 1.487;
                  }
                  else if (auxElement.y >= 1.558) {
                    auxElement.y = 1.558;
                  }
                }
                if (auxElement.x >= 0.898) {
                    auxElement.x = 0.898;
                  }
                  if (auxElement.x <= 0.79) {
                    auxElement.x = 0.79;
                  }
                  if (auxElement.y >= 1.57) {
                    auxElement.y = 1.57;
                  }
                  if (auxElement.y <= 1.47) {
                    auxElement.y = 1.47;
                  }
                  auxElement.x = auxElement.x + 0.057;
                  auxElement.y = auxElement.y + 0.115;
                element.positionsArray.push(auxElement);
              }
            });

            element.currentPosition = Math.floor(Math.random() * element.positionsArray.length);
            //element.x = element.positionsArray[element.currentPosition].x;
            //element.y = element.positionsArray[element.currentPosition].y;

            var nextPosition = element.currentPosition + 1;
            if (nextPosition >= element.positionsArray.length) {
              nextPosition = 0;
            }

            if (element.x > element.positionsArray[nextPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[nextPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }

            element.currentMosquitoPhase = 8;
            element.speed = 0.001;
          }
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
        }

        var xvalue = Math.abs(element.positionsArray[element.currentPosition].x - element.x);
        var yvalue = Math.abs(element.positionsArray[element.currentPosition].y - element.y);
        var xAmount = 0;
        var yAmount = 0;

        if (xvalue < yvalue) {
          xAmount = (xvalue / yvalue) * element.speed;
          yAmount = element.speed;
        }
        else {
          yAmount = (yvalue / xvalue) * element.speed;
          xAmount = element.speed;
        }

        element.x = ((element.x > element.positionsArray[element.currentPosition].x && element.xDir) || (element.x < element.positionsArray[element.currentPosition].x && !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) ? element.x : (element.positionsArray[element.currentPosition].x < element.x) ? element.x - xAmount : element.x + xAmount;
        element.y = ((element.y > element.positionsArray[element.currentPosition].y && element.yDir) || (element.y < element.positionsArray[element.currentPosition].y && !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ? element.y : (element.positionsArray[element.currentPosition].y < element.y) ? element.y - yAmount : element.y + yAmount;

        var w = (canvas.width * 0.01) + ((Math.random() * 0.001) - 0.0005)
        var wMultiplier = 1.0;
        if ($(".pgArticle").width() < tabletTreshold) {
          wMultiplier = 0.125;
        }

        if (element.xDir) {
          context.drawImage(element.flippedImages[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * wMultiplier * ( 16.0/12.0));
        }
        else {
          context.drawImage(element.image[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * wMultiplier * ( 16.0/12.0));
        }
      break;
      case 9:
        if (((element.x > element.positionsArray[element.currentPosition].x &&
            element.xDir) || (element.x < element.positionsArray[element.currentPosition].x &&
            !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) &&  
           ((element.y > element.positionsArray[element.currentPosition].y &&
            element.yDir) || (element.y < element.positionsArray[element.currentPosition].y &&
            !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ) {
          element.currentPosition = element.currentPosition + 1;
          if (element.currentPosition >= element.positionsArray.length) {
            element.currentPosition = 0;
            //element.positionsArray = mosquitosPositionsPhase11[index%mosquitosPositionsPhase11.length];

            if (index == mosquitosLeft - 1) {
              $("#pgStep3 .pg-button").removeAttr("disabled");
              $("#pgStep3").removeAttr("disabled");
            }

            var auxPositionsArray = mosquitosPositionsPhase11[index%mosquitosPositionsPhase11.length];

            if ($(".pgArticle").width() < tabletTreshold) {
              auxPositionsArray = mosquitosPositionsPhase11S[index%mosquitosPositionsPhase11S.length];
            }

            auxPositionsArray = shuffle(auxPositionsArray);
            element.positionsArray = new Array();
            auxPositionsArray.forEach(function(element2,index2,array2) {
              if ($(".pgArticle").width() < tabletTreshold) {
                element.positionsArray.push(element2);
              }
              else {
                var auxElement = {x: element2.x + (((Math.random() * 0.01) - 0.005) * 1.0) - 0.018, y: element2.y + (((Math.random() * 0.001) - 0.0005) * 1.0)};
                element.positionsArray.push(auxElement);
              }
            });

            element.currentPosition = Math.floor(Math.random() * element.positionsArray.length);

            var nextPosition = element.currentPosition + 1;
            if (nextPosition >= element.positionsArray.length) {
              nextPosition = 0;
            }

            if (element.x > element.positionsArray[nextPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[nextPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }

            element.currentMosquitoPhase = 10;
            element.speed = 0.001;
          }
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
        }

        var xvalue = Math.abs(element.positionsArray[element.currentPosition].x - element.x);
        var yvalue = Math.abs(element.positionsArray[element.currentPosition].y - element.y);
        var xAmount = 0;
        var yAmount = 0;

        if (xvalue < yvalue) {
          xAmount = (xvalue / yvalue) * element.speed;
          yAmount = element.speed;
        }
        else {
          yAmount = (yvalue / xvalue) * element.speed;
          xAmount = element.speed;
        }

        element.x = ((element.x > element.positionsArray[element.currentPosition].x && element.xDir) || (element.x < element.positionsArray[element.currentPosition].x && !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) ? element.x : (element.positionsArray[element.currentPosition].x < element.x) ? element.x - xAmount : element.x + xAmount;
        element.y = ((element.y > element.positionsArray[element.currentPosition].y && element.yDir) || (element.y < element.positionsArray[element.currentPosition].y && !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ? element.y : (element.positionsArray[element.currentPosition].y < element.y) ? element.y - yAmount : element.y + yAmount;

        var w = (canvas.width * 0.01) + ((Math.random() * 0.001) - 0.0005)
        var wMultiplier = 1.0;
        if ($(".pgArticle").width() < tabletTreshold) {
          wMultiplier = 0.125;
        }

        if (element.xDir) {
          context.drawImage(element.flippedImages[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * wMultiplier * ( 16.0/12.0));
        }
        else {
          context.drawImage(element.image[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * wMultiplier * ( 16.0/12.0));
        }
      break;
      case 11:
        if (((element.x > element.positionsArray[element.currentPosition].x &&
            element.xDir) || (element.x < element.positionsArray[element.currentPosition].x &&
            !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) &&  
           ((element.y > element.positionsArray[element.currentPosition].y &&
            element.yDir) || (element.y < element.positionsArray[element.currentPosition].y &&
            !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ) {
          element.currentPosition = element.currentPosition + 1;
          if (element.currentPosition >= element.positionsArray.length) {
            element.currentPosition = 0;
            //element.positionsArray = mosquitosPositionsPhase13[index%mosquitosPositionsPhase13.length];

            if (index == mosquitosLeft - 1) {
              $("#pgStep3 .pg-button").attr("disabled", "disabled");
              $("#pgStep3").attr("disabled", "disabled");

              $(".pgQuestion__body__binary-option").removeClass("disabled-option");
              //$('#pgQuestion-container3 .pg-button').removeAttr("disabled");
              $('#pgQuestion-container3').removeAttr("disabled");
            }

            var auxPositionsArray = mosquitosPositionsPhase13[index%mosquitosPositionsPhase13.length];

            if ($(".pgArticle").width() < tabletTreshold) {
              auxPositionsArray = mosquitosPositionsPhase13S[index%mosquitosPositionsPhase13S.length];
            }

            auxPositionsArray = shuffle(auxPositionsArray);
            element.positionsArray = new Array();
            auxPositionsArray.forEach(function(element2,index2,array2) {
              if ($(".pgArticle").width() < tabletTreshold) {
                element.positionsArray.push(element2);
              }
              else {
                var auxElement = {x: element2.x + (((Math.random() * 0.001) - 0.0005) * 1.0) + 0.005, y: element2.y + (((Math.random() * 0.01) - 0.005) * 1.0) - 0.01 + 0.275};
                element.positionsArray.push(auxElement);
              }
            });

            element.currentPosition = Math.floor(Math.random() * element.positionsArray.length);

            var nextPosition = element.currentPosition + 1;
            if (nextPosition >= element.positionsArray.length) {
              nextPosition = 0;
            }

            if (element.x > element.positionsArray[nextPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[nextPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }

            element.currentMosquitoPhase = 12;
            element.speed = 0.001;
          }
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
        }

        var xvalue = Math.abs(element.positionsArray[element.currentPosition].x - element.x);
        var yvalue = Math.abs(element.positionsArray[element.currentPosition].y - element.y);
        var xAmount = 0;
        var yAmount = 0;

        if (xvalue < yvalue) {
          xAmount = (xvalue / yvalue) * element.speed;
          yAmount = element.speed;
        }
        else {
          yAmount = (yvalue / xvalue) * element.speed;
          xAmount = element.speed;
        }

        element.x = ((element.x > element.positionsArray[element.currentPosition].x && element.xDir) || (element.x < element.positionsArray[element.currentPosition].x && !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) ? element.x : (element.positionsArray[element.currentPosition].x < element.x) ? element.x - xAmount : element.x + xAmount;
        element.y = ((element.y > element.positionsArray[element.currentPosition].y && element.yDir) || (element.y < element.positionsArray[element.currentPosition].y && !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ? element.y : (element.positionsArray[element.currentPosition].y < element.y) ? element.y - yAmount : element.y + yAmount;

        var w = (canvas.width * 0.01) + ((Math.random() * 0.001) - 0.0005)
        var wMultiplier = 1.0;
        if ($(".pgArticle").width() < tabletTreshold) {
          wMultiplier = 0.125;
        }

        if (element.xDir) {
          context.drawImage(element.flippedImages[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * wMultiplier * ( 16.0/12.0));
        }
        else {
          context.drawImage(element.image[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * wMultiplier * ( 16.0/12.0));
        }
      break;
      case 13:
        if (((element.x > element.positionsArray[element.currentPosition].x &&
            element.xDir) || (element.x < element.positionsArray[element.currentPosition].x &&
            !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) &&  
           ((element.y > element.positionsArray[element.currentPosition].y &&
            element.yDir) || (element.y < element.positionsArray[element.currentPosition].y &&
            !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ) {
          element.currentPosition = element.currentPosition + 1;
          if (element.currentPosition >= element.positionsArray.length) {
            element.currentPosition = 0;

            var auxPositionsArray = mosquitosPositionsPhase15[index%mosquitosPositionsPhase15.length];

            if ($(".pgArticle").width() < tabletTreshold) {
              auxPositionsArray = mosquitosPositionsPhase15S[index%mosquitosPositionsPhase15S.length];
            }

            auxPositionsArray = shuffle(auxPositionsArray);
            element.positionsArray = new Array();
            auxPositionsArray.forEach(function(element2,index2,array2) {
              if ($(".pgArticle").width() < tabletTreshold) {
                element.positionsArray.push(element2);
              }
              else {
                var auxElement = {x: element2.x + (((Math.random() * 0.001) - 0.0005) * 1.0) + 0.005, y: element2.y + (((Math.random() * 0.01) - 0.005) * 1.0) - 0.01 + 0.275};
                element.positionsArray.push(auxElement);
              }
            });

            element.currentPosition = Math.floor(Math.random() * element.positionsArray.length);

            var nextPosition = element.currentPosition + 1;
            if (nextPosition >= element.positionsArray.length) {
              nextPosition = 0;
            }

            if (element.x > element.positionsArray[nextPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[nextPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }

            element.currentMosquitoPhase = 14;
            element.speed = 0.001;
          }
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
        }

        var xvalue = Math.abs(element.positionsArray[element.currentPosition].x - element.x);
        var yvalue = Math.abs(element.positionsArray[element.currentPosition].y - element.y);
        var xAmount = 0;
        var yAmount = 0;

        if (xvalue < yvalue) {
          xAmount = (xvalue / yvalue) * element.speed;
          yAmount = element.speed;
        }
        else {
          yAmount = (yvalue / xvalue) * element.speed;
          xAmount = element.speed;
        }

        element.x = ((element.x > element.positionsArray[element.currentPosition].x && element.xDir) || (element.x < element.positionsArray[element.currentPosition].x && !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) ? element.x : (element.positionsArray[element.currentPosition].x < element.x) ? element.x - xAmount : element.x + xAmount;
        element.y = ((element.y > element.positionsArray[element.currentPosition].y && element.yDir) || (element.y < element.positionsArray[element.currentPosition].y && !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ? element.y : (element.positionsArray[element.currentPosition].y < element.y) ? element.y - yAmount : element.y + yAmount;

        var w = (canvas.width * 0.01) + ((Math.random() * 0.001) - 0.0005)
        var wMultiplier = 1.0;
        if ($(".pgArticle").width() < tabletTreshold) {
          wMultiplier = 0.125;
        }

        if (element.xDir) {
          context.drawImage(element.flippedImages[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * wMultiplier * ( 16.0/12.0));
        }
        else {
          context.drawImage(element.image[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * wMultiplier * ( 16.0/12.0));
        }
      break;
      case 15:
        if (((element.x > element.positionsArray[element.currentPosition].x &&
            element.xDir) || (element.x < element.positionsArray[element.currentPosition].x &&
            !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) &&  
           ((element.y > element.positionsArray[element.currentPosition].y &&
            element.yDir) || (element.y < element.positionsArray[element.currentPosition].y &&
            !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ) {
          element.currentPosition = element.currentPosition + 1;
          if (element.currentPosition >= element.positionsArray.length) {
            element.currentPosition = 0;

            var auxPositionsArray = mosquitosPositionsPhase17[index%mosquitosPositionsPhase17.length];

            if ($(".pgArticle").width() < tabletTreshold) {
              auxPositionsArray = mosquitosPositionsPhase17S[index%mosquitosPositionsPhase17S.length];
            }

            auxPositionsArray = shuffle(auxPositionsArray);
            element.positionsArray = new Array();
            auxPositionsArray.forEach(function(element2,index2,array2) {
              if ($(".pgArticle").width() < tabletTreshold) {
                element.positionsArray.push(element2);
              }
              else {
                var auxElement = {x: element2.x + (((Math.random() * 0.001) - 0.0005) * 1.0) + 0.005, y: element2.y + (((Math.random() * 0.01) - 0.005) * 1.0) + 0.275};
                element.positionsArray.push(auxElement);
              }
            });

            element.currentPosition = Math.floor(Math.random() * element.positionsArray.length);

            var nextPosition = element.currentPosition + 1;
            if (nextPosition >= element.positionsArray.length) {
              nextPosition = 0;
            }

            if (element.x > element.positionsArray[nextPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[nextPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }

            element.currentMosquitoPhase = 16;
            element.speed = 0.001;
          }
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
        }

        var xvalue = Math.abs(element.positionsArray[element.currentPosition].x - element.x);
        var yvalue = Math.abs(element.positionsArray[element.currentPosition].y - element.y);
        var xAmount = 0;
        var yAmount = 0;

        if (xvalue < yvalue) {
          xAmount = (xvalue / yvalue) * element.speed;
          yAmount = element.speed;
        }
        else {
          yAmount = (yvalue / xvalue) * element.speed;
          xAmount = element.speed;
        }

        element.x = ((element.x > element.positionsArray[element.currentPosition].x && element.xDir) || (element.x < element.positionsArray[element.currentPosition].x && !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) ? element.x : (element.positionsArray[element.currentPosition].x < element.x) ? element.x - xAmount : element.x + xAmount;
        element.y = ((element.y > element.positionsArray[element.currentPosition].y && element.yDir) || (element.y < element.positionsArray[element.currentPosition].y && !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ? element.y : (element.positionsArray[element.currentPosition].y < element.y) ? element.y - yAmount : element.y + yAmount;

        var w = (canvas.width * 0.01) + ((Math.random() * 0.001) - 0.0005)
        var wMultiplier = 1.0;
        if ($(".pgArticle").width() < tabletTreshold) {
          wMultiplier = 0.125;
        }

        if (element.xDir) {
          context.drawImage(element.flippedImages[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * wMultiplier * ( 16.0/12.0));
        }
        else {
          context.drawImage(element.image[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * wMultiplier * ( 16.0/12.0));
        }
      break;
      case 17:
        if (((element.x > element.positionsArray[element.currentPosition].x &&
            element.xDir) || (element.x < element.positionsArray[element.currentPosition].x &&
            !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) &&  
           ((element.y > element.positionsArray[element.currentPosition].y &&
            element.yDir) || (element.y < element.positionsArray[element.currentPosition].y &&
            !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ) {
          element.currentPosition = element.currentPosition + 1;
          if (element.currentPosition >= element.positionsArray.length) {
            element.currentPosition = 0;

            var auxPositionsArray = mosquitosPositionsPhase19[index%mosquitosPositionsPhase19.length];

            if ($(".pgArticle").width() < tabletTreshold) {
              auxPositionsArray = mosquitosPositionsPhase19S[index%mosquitosPositionsPhase19S.length];
            }

            auxPositionsArray = shuffle(auxPositionsArray);
            element.positionsArray = new Array();
            auxPositionsArray.forEach(function(element2,index2,array2) {
              if ($(".pgArticle").width() < tabletTreshold) {
                //element2.y = element2.y - 0.005;
                element.positionsArray.push(element2);
              }
              else {
                var auxElement = {x: element2.x + (((Math.random() * 0.01) - 0.005) * 1.0), y: element2.y + (((Math.random() * 0.01) - 0.005) * 1.0) + 0.37};
                element.positionsArray.push(auxElement);
              }
            });

            element.currentPosition = Math.floor(Math.random() * element.positionsArray.length);

            var nextPosition = element.currentPosition + 1;
            if (nextPosition >= element.positionsArray.length) {
              nextPosition = 0;
            }

            if (element.x > element.positionsArray[nextPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[nextPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }

            element.currentMosquitoPhase = 18;
            element.speed = 0.001;
          }
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
        }

        var xvalue = Math.abs(element.positionsArray[element.currentPosition].x - element.x);
        var yvalue = Math.abs(element.positionsArray[element.currentPosition].y - element.y);
        var xAmount = 0;
        var yAmount = 0;

        if (xvalue < yvalue) {
          xAmount = (xvalue / yvalue) * element.speed;
          yAmount = element.speed;
        }
        else {
          yAmount = (yvalue / xvalue) * element.speed;
          xAmount = element.speed;
        }

        element.x = ((element.x > element.positionsArray[element.currentPosition].x && element.xDir) || (element.x < element.positionsArray[element.currentPosition].x && !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) ? element.x : (element.positionsArray[element.currentPosition].x < element.x) ? element.x - xAmount : element.x + xAmount;
        element.y = ((element.y > element.positionsArray[element.currentPosition].y && element.yDir) || (element.y < element.positionsArray[element.currentPosition].y && !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ? element.y : (element.positionsArray[element.currentPosition].y < element.y) ? element.y - yAmount : element.y + yAmount;

        var w = (canvas.width * 0.01) + ((Math.random() * 0.001) - 0.0005)
        var wMultiplier = 1.0;
        if ($(".pgArticle").width() < tabletTreshold) {
          wMultiplier = 0.125;
        }

        if (element.xDir) {
          context.drawImage(element.flippedImages[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * wMultiplier * ( 16.0/12.0));
        }
        else {
          context.drawImage(element.image[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * wMultiplier * ( 16.0/12.0));
        }
      break;
      case 19:
        if (((element.x > element.positionsArray[element.currentPosition].x &&
            element.xDir) || (element.x < element.positionsArray[element.currentPosition].x &&
            !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) &&  
           ((element.y > element.positionsArray[element.currentPosition].y &&
            element.yDir) || (element.y < element.positionsArray[element.currentPosition].y &&
            !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ) {
          element.currentPosition = element.currentPosition + 1;
          if (element.currentPosition >= element.positionsArray.length) {
            element.currentPosition = 0;

            var auxPositionsArray = mosquitosPositionsPhase21[index%mosquitosPositionsPhase21.length];

            if ($(".pgArticle").width() < tabletTreshold) {
              auxPositionsArray = mosquitosPositionsPhase21S[index%mosquitosPositionsPhase21S.length];
            }

            auxPositionsArray = shuffle(auxPositionsArray);
            element.positionsArray = new Array();
            auxPositionsArray.forEach(function(element2,index2,array2) {
              if ($(".pgArticle").width() < tabletTreshold) {
                //element2.y = element2.y - 0.005;
                element.positionsArray.push(element2);
              }
              else {
                var auxElement = {x: element2.x + (((Math.random() * 0.01) - 0.005) * 1.0), y: element2.y + (((Math.random() * 0.01) - 0.005) * 1.0) + 0.37};
                element.positionsArray.push(auxElement);
              }
            });

            element.currentPosition = Math.floor(Math.random() * element.positionsArray.length);

            var nextPosition = element.currentPosition + 1;
            if (nextPosition >= element.positionsArray.length) {
              nextPosition = 0;
            }

            if (element.x > element.positionsArray[nextPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[nextPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }

            element.currentMosquitoPhase = 20;
            element.speed = 0.001;
          }
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
        }

        var xvalue = Math.abs(element.positionsArray[element.currentPosition].x - element.x);
        var yvalue = Math.abs(element.positionsArray[element.currentPosition].y - element.y);
        var xAmount = 0;
        var yAmount = 0;

        if (xvalue < yvalue) {
          xAmount = (xvalue / yvalue) * element.speed;
          yAmount = element.speed;
        }
        else {
          yAmount = (yvalue / xvalue) * element.speed;
          xAmount = element.speed;
        }

        element.x = ((element.x > element.positionsArray[element.currentPosition].x && element.xDir) || (element.x < element.positionsArray[element.currentPosition].x && !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) ? element.x : (element.positionsArray[element.currentPosition].x < element.x) ? element.x - xAmount : element.x + xAmount;
        element.y = ((element.y > element.positionsArray[element.currentPosition].y && element.yDir) || (element.y < element.positionsArray[element.currentPosition].y && !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ? element.y : (element.positionsArray[element.currentPosition].y < element.y) ? element.y - yAmount : element.y + yAmount;

        var w = (canvas.width * 0.01) + ((Math.random() * 0.001) - 0.0005)
        var wMultiplier = 1.0;
        if ($(".pgArticle").width() < tabletTreshold) {
          wMultiplier = 0.125;
        }

        if (element.xDir) {
          context.drawImage(element.flippedImages[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * wMultiplier * ( 16.0/12.0));
        }
        else {
          context.drawImage(element.image[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * wMultiplier * ( 16.0/12.0));
        }
      break;
      case 21:
        if (((element.x > element.positionsArray[element.currentPosition].x &&
            element.xDir) || (element.x < element.positionsArray[element.currentPosition].x &&
            !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) &&  
           ((element.y > element.positionsArray[element.currentPosition].y &&
            element.yDir) || (element.y < element.positionsArray[element.currentPosition].y &&
            !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ) {
          element.currentPosition = element.currentPosition + 1;
          if (element.currentPosition >= element.positionsArray.length) {
            element.currentPosition = 0;
            // TO DO
            element.positionsArray = new Array(element.positionsArray[0],element.positionsArray[0],element.positionsArray[0],element.positionsArray[0],element.positionsArray[0], element.positionsArray[0],element.positionsArray[0],element.positionsArray[0],element.positionsArray[0],element.positionsArray[0])

            for (var i = 0; i < 20; i++) {
              element.positionsArray.push({x: element.positionsArray[0].x + ((Math.random() * 0.066) - 0.033), y: element.positionsArray[0].y + ((Math.random() * 0.066) - 0.033)});
            }

            element.currentPosition = Math.floor(Math.random() * element.positionsArray.length);
            //element.x = element.positionsArray[element.currentPosition].x;
            //element.y = element.positionsArray[element.currentPosition].y;

            var nextPosition = element.currentPosition + 1;
            if (nextPosition >= element.positionsArray.length) {
              nextPosition = 0;
            }

            if (element.x > element.positionsArray[nextPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[nextPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }

            element.currentMosquitoPhase = 22;
            element.speed = 0.0003;

          }
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
        }

        var xvalue = Math.abs(element.positionsArray[element.currentPosition].x - element.x);
        var yvalue = Math.abs(element.positionsArray[element.currentPosition].y - element.y);
        var xAmount = 0;
        var yAmount = 0;

        if (xvalue < yvalue) {
          xAmount = (xvalue / yvalue) * element.speed;
          yAmount = element.speed;
        }
        else {
          yAmount = (yvalue / xvalue) * element.speed;
          xAmount = element.speed;
        }

        element.x = ((element.x > element.positionsArray[element.currentPosition].x && element.xDir) || (element.x < element.positionsArray[element.currentPosition].x && !element.xDir) || (element.x == element.positionsArray[element.currentPosition].x)) ? element.x : (element.positionsArray[element.currentPosition].x < element.x) ? element.x - xAmount : element.x + xAmount;
        element.y = ((element.y > element.positionsArray[element.currentPosition].y && element.yDir) || (element.y < element.positionsArray[element.currentPosition].y && !element.yDir) || (element.y == element.positionsArray[element.currentPosition].y)) ? element.y : (element.positionsArray[element.currentPosition].y < element.y) ? element.y - yAmount : element.y + yAmount;

        var w = (canvas.width * 0.01) + ((Math.random() * 0.001) - 0.0005)
        var wMultiplier = 1.0;
        if ($(".pgArticle").width() < tabletTreshold) {
          wMultiplier = 0.125;
        }

        if (element.xDir) {
          context.drawImage(element.flippedImages[element.currentImage], (element.x * canvas.width) * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * wMultiplier * ( 16.0/12.0));
        }
        else {
          context.drawImage(element.image[element.currentImage], element.x * canvas.width * wMultiplier, element.y * canvas.width * wMultiplier, w * wMultiplier, w * wMultiplier * ( 16.0/12.0));
        }
      break;
    }
    
  });
}
//Animate behavior elements
var animateBehaviorElements = function() {
  $(document).on("mouseenter", ".pgQuestion__body__option:not(.disabled-option)", function() {
    if (!$(this).hasClass("selected")) {
      $(this).find("img").attr("src", "./images/" + hoverBehaviorImages[$(this).attr("data-index")]);
    }
  });
  $(document).on("mouseleave", ".pgQuestion__body__option:not(.disabled-option)", function() {
    if (!$(this).hasClass("selected")) {
      $(this).find("img").attr("src", "./images/" + behaviorImages[$(this).attr("data-index")]);
    }
  });
};
//Animate pregnancy elements
var animateElementsPregnancy = function() {
  $(document).on("mouseenter", ".pgStep__pregnancy-ok", function() {
    if (currentPhase == 20) {
      if ($(".pgArticle").width() < tabletTreshold) {
        $("#left-glass-cover-horizontal, #left-glass-cover-mid-horizontal").animate({
          marginTop: "-" + ($("#left-glass-cover-horizontal").width() * 0.001) + "px"
        }, 200);
      }
      else {
        $("#left-glass-cover, #left-glass-cover-mid").animate({
          marginTop: "-" + ($("#left-glass-cover").height() * 0.001) + "px"
        }, 200);
      }
    }
  });
  $(document).on("mouseleave", ".pgStep__pregnancy-ok", function() {
    if (currentPhase == 20) {
      if ($(".pgArticle").width() < tabletTreshold) {
        $("#left-glass-cover-horizontal, #left-glass-cover-mid-horizontal").animate({
          marginTop: "0px"
        }, 200);
      }
      else {
        $("#left-glass-cover, #left-glass-cover-mid").animate({
          marginTop: "0px"
        }, 200);
      }
    }
  });
  $(document).on("mouseenter", ".pgStep__pregnancy-ko", function() {
    if (currentPhase == 20) {
      if ($(".pgArticle").width() < tabletTreshold) {
        $("#right-glass-cover-horizontal, #right-glass-cover-mid-horizontal").animate({
          marginTop: "-" + ($("#right-glass-cover-horizontal").width() * 0.001) + "px"
        }, 200);
      }
      else {
        $("#right-glass-cover, #right-glass-cover-mid").animate({
          marginTop: "-" + ($("#right-glass-cover").height() * 0.001) + "px"
        }, 200);
      }
    
    }
  });
  $(document).on("mouseleave", ".pgStep__pregnancy-ko", function() {
    if (currentPhase == 20) {
      if ($(".pgArticle").width() < tabletTreshold) {
        $("#right-glass-cover-horizontal, #right-glass-cover-mid-horizontal").animate({
          marginTop: "0px"
        }, 200);
      }
      else {
        $("#right-glass-cover, #right-glass-cover-mid").animate({
          marginTop: "0px"
        }, 200);
      }
    }
  });
}
//Setup canvas
var setupCanvas = function(){
  canvas2 = document.getElementById('elementsCanvas');
  canvas2.width = $('.pgChart-wrapper').width();
  canvas2.height = $('.pgChart-wrapper').height() + 0;
  canvas2.style.width  = canvas2.width.toString() + "px";
  canvas2.style.height = canvas2.height.toString() + "px";
  context2 = canvas2.getContext('2d');
  context2.imageSmoothingEnabled = false;

  canvas3 = document.getElementById('animationCanvas');
  canvas3.width = $('.pgChart-wrapper').width();
  canvas3.height = $('.pgChart-wrapper').height();
  canvas3.style.width  = canvas3.width.toString() + "px";
  canvas3.style.height = canvas3.height.toString() + "px";
  context3 = canvas3.getContext('2d');
  context3.imageSmoothingEnabled = false;

  canvas = document.getElementById('mosquitosCanvas');
  canvas.width = $('.pgChart-wrapper').width();
  canvas.height = $('.pgChart-wrapper').height();
  canvas.style.width  = canvas.width.toString() + "px";
  canvas.style.height = canvas.height.toString() + "px";
  context = canvas.getContext('2d');
  context.imageSmoothingEnabled = false;

  canvas4 = document.getElementById('hoverCanvas');
  canvas4.width = $('.pgChart-wrapper').width();
  canvas4.height = $('.pgChart-wrapper').height();
  canvas4.style.width  = canvas4.width.toString() + "px";
  canvas4.style.height = canvas4.height.toString() + "px";
  context4 = canvas4.getContext('2d');
  context4.imageSmoothingEnabled = false;

  canvas5 = document.getElementById('glassAnimationCanvas');
  canvas5.width = $('.pgChart-wrapper').width();
  canvas5.height = $('.pgChart-wrapper').height();
  canvas5.style.width  = canvas5.width.toString() + "px";
  canvas5.style.height = canvas5.height.toString() + "px";
  context5 = canvas5.getContext('2d');
  context5.imageSmoothingEnabled = false;

  context.clearRect(0, 0, context.canvas.width, context.canvas.height);
  context2.clearRect(0, 0, context.canvas.width, context.canvas.height);
  context3.clearRect(0, 0, context.canvas.width, context.canvas.height);
  context4.clearRect(0, 0, context.canvas.width, context.canvas.height);
  context5.clearRect(0, 0, context5.canvas.width, context5.canvas.height);
  
  context2.fillStyle = "#f8f8f8";
  if ($(".pgArticle").width() < tabletTreshold) {
    /*context2.fillRect($('#pgQuestion-container1').position().left, 0, $(".pgArticle").width(), canvas2.height);
    context2.fillRect($('#pgQuestion-container2').position().left, 0, $(".pgArticle").width(), canvas2.height);
    context2.fillRect($('#pgQuestion-container3').position().left, 0, $(".pgArticle").width(), canvas2.height);*/
  }
  else {
    context2.fillRect(0, getOffset($('#pgQuestion-container1')[0]).top - getOffset($(".pgArticle")[0]).top - $('#nav-bar').height(), canvas2.width, $('#pgQuestion-container1').height());
    context2.fillRect(0, getOffset($('#pgQuestion-container2')[0]).top - getOffset($(".pgArticle")[0]).top - $('#nav-bar').height(), canvas2.width, $('#pgQuestion-container2').height());
    context2.fillRect(0, getOffset($('#pgQuestion-container3')[0]).top - getOffset($(".pgArticle")[0]).top - $('#nav-bar').height(), canvas2.width, $('#pgQuestion-container3').height());
  }

  var picture1 = new Image();
  picture1.addEventListener('load', function () {
    if ($(".pgArticle").width() < tabletTreshold) {
      //context2.drawImage(picture1, parseInt($(".pgArticle").width() - ($(".pgArticle").width() * 0.55) - ($(".pgArticle").width() * 0.064)), 0, parseInt($(".pgArticle").width() * 0.55), parseInt(($(".pgArticle").width() * 0.55) * (536.0/656.0)));
    }
    else {
      context2.drawImage(picture1, parseInt(canvas.width - (canvas.width * 0.55) - (canvas.width * 0.064)), 0, parseInt(canvas.width * 0.55), parseInt((canvas.width * 0.55) * (536.0/656.0)));
    }
      var picture1Hover = new Image();
      picture1Hover.addEventListener('load', function () {
        if ($(".pgArticle").width() < tabletTreshold) {
          //context4.drawImage(picture1Hover, parseInt($(".pgArticle").width() - ($(".pgArticle").width() * 0.55) - ($(".pgArticle").width() * 0.064)), 0, parseInt($(".pgArticle").width() * 0.55), parseInt(($(".pgArticle").width() * 0.55) * (536.0/656.0)));
        }
        else {
          context4.drawImage(picture1Hover, parseInt(canvas.width - (canvas.width * 0.55) - (canvas.width * 0.064)), 0, parseInt(canvas.width * 0.55), parseInt((canvas.width * 0.55) * (536.0/656.0)));
        }
        context4.drawImage(picture1Hover, parseInt(canvas.width - (canvas.width * 0.55) - (canvas.width * 0.064)), 0, parseInt(canvas.width * 0.55), parseInt((canvas.width * 0.55) * (536.0/656.0)));
      });
      picture1Hover.src = './images/terrarium-hover.png';

      var tube1 = new Image();
      tube1.addEventListener('load', function () {
        if ($(".pgArticle").width() < tabletTreshold) {
          //context2.drawImage(tube1, parseInt($(".pgArticle").width() - ($(".pgArticle").width() * 0.55) - ($(".pgArticle").width() * 0.0585) - ($(".pgArticle").width() * 0.36051)), parseInt(($(".pgArticle").width() * 0.36051) * (300.0/430.0)) * 0.55, parseInt($(".pgArticle").width() * 0.36051), parseInt(($(".pgArticle").width() * 0.36051) * (300.0/430.0)));
        }
        else {
          context2.drawImage(tube1, parseInt(canvas.width - (canvas.width * 0.55) - (canvas.width * 0.0585) - (canvas.width * 0.36051)), 235, parseInt(canvas.width * 0.36051), parseInt((canvas.width * 0.36051) * (300.0/430.0)));
        }
      });
      tube1.src = './images/tube1.png';
  });
  picture1.src = './images/terrarium.png';

  var tube2 = new Image();
  tube2.addEventListener('load', function () {
    if ($(".pgArticle").width() < tabletTreshold) {
    }
    else {
      context2.drawImage(tube2, parseInt(canvas.width * 0.0345), 530, parseInt(canvas.width * 0.14672), parseInt((canvas.width * 0.14672) * (622.0/175.0)));
    }
  });
  tube2.src = './images/tube2.png';

  var tube3 = new Image();
  tube3.addEventListener('load', function () {
    if ($(".pgArticle").width() < tabletTreshold) {
    }
    else {
      context2.drawImage(tube3, parseInt(canvas.width * 0.0545), 1115, parseInt(canvas.width * 0.8073), parseInt((canvas.width * 0.8073) * (517.0/963.0)));
    }
    var tube3Hover = new Image();
    tube3Hover.addEventListener('load', function () {
      if ($(".pgArticle").width() < tabletTreshold) {
      }
      else {
        context4.drawImage(tube3Hover, parseInt(canvas.width * 0.0545), 1115, parseInt(canvas.width * 0.8073), parseInt((canvas.width * 0.8073) * (517.0/963.0)));
      }
    });
    tube3Hover.src = './images/tube3-hover.png';
  });
  tube3.src = './images/tube3.png';

  var tube5 = new Image();
  tube5.addEventListener('load', function () {
    if ($(".pgArticle").width() < tabletTreshold) {
    }
    else {
      context2.drawImage(tube5, parseInt(canvas.width - (canvas.width * 0.8015) - (canvas.width * 0.133)), 2120, parseInt(canvas.width * 0.8015), parseInt((canvas.width * 0.8015) * (510.0/956.0)));
    }

    var tube5Hover = new Image();
    tube5Hover.addEventListener('load', function () {
      if ($(".pgArticle").width() < tabletTreshold) {
      }
      else {
        context4.drawImage(tube5Hover, parseInt(canvas.width - (canvas.width * 0.8015) - (canvas.width * 0.133)), 2120, parseInt(canvas.width * 0.8015), parseInt((canvas.width * 0.8015) * (510.0/956.0)));
      }
    });
    tube5Hover.src = './images/tube5-hover.png';  

    var tube4 = new Image();
    tube4.addEventListener('load', function () {
      if ($(".pgArticle").width() < tabletTreshold) {
      }
      else {
        context2.drawImage(tube4, parseInt(canvas.width - (canvas.width * 0.1358) - (canvas.width * 0.08)) - 3, 1618, parseInt(canvas.width * 0.1358), parseInt((canvas.width * 0.1358) * (600.0/162.0)));
      }
      var tube4Hover = new Image();
      tube4Hover.addEventListener('load', function () {
        if ($(".pgArticle").width() < tabletTreshold) {
        }
        else {
          context4.drawImage(tube4Hover, parseInt(canvas.width - (canvas.width * 0.1358) - (canvas.width * 0.08)) - 3, 1618, parseInt(canvas.width * 0.1358), parseInt((canvas.width * 0.1358) * (600.0/162.0)));
        }
      });
      tube4Hover.src = './images/tube4-hover.png';
    });
    tube4.src = './images/tube4.png';

  });
  tube5.src = './images/tube5.png';  

  var tube6 = new Image();
  tube6.addEventListener('load', function () {
    if ($(".pgArticle").width() < tabletTreshold) {
    }
    else {
      context2.drawImage(tube6, parseInt(canvas.width * 0.028), 2621, parseInt(canvas.width * 0.1383), parseInt((canvas.width * 0.1383) * (592.0/165.0)));
    }
    var tube6Hover = new Image();
    tube6Hover.addEventListener('load', function () {
      if ($(".pgArticle").width() < tabletTreshold) {
      }
      else {
        context4.drawImage(tube6Hover, parseInt(canvas.width * 0.028), 2621, parseInt(canvas.width * 0.1383), parseInt((canvas.width * 0.1383) * (592.0/165.0)));
      }
    });
    tube6Hover.src = './images/tube6-hover.png';
  });
  tube6.src = './images/tube6.png';

  var tube7 = new Image();
  tube7.addEventListener('load', function () {
    if ($(".pgArticle").width() < tabletTreshold) {
    }
    else {
      context2.drawImage(tube7, parseInt(canvas.width * 0.06), 3200, parseInt(canvas.width * 0.6707), parseInt((canvas.width * 0.6707) * (552.0/800.0)));
    }
    var coverGlass = new Image();
    coverGlass.addEventListener('load', function () {
      context3.drawImage(coverGlass, parseInt(canvas3.width * 0.291), 3415, parseInt(canvas3.width * 0.125), parseInt((canvas3.width * 0.125) * (224.0/149.0)));
      context3.drawImage(coverGlass, parseInt(canvas3.width * 0.5975), 3415, parseInt(canvas3.width * 0.125), parseInt((canvas3.width * 0.125) * (224.0/149.0)));
      
      leftCoverGlass = new CanvasImage([coverGlass], 0.291, (3415.0/canvas3.width), 0, 0.0005, 0, 0, new Array({x:0.291,y:(3415.0/canvas3.width)}));
      rightCoverGlass = new CanvasImage([coverGlass], 0.5975, (3415.0/canvas3.width), 0, 0.0005, 0, 0, new Array({x:0.5975,y:(3415.0/canvas3.width)}))

      if (leftCoverGlass > leftCoverGlass.positionsArray[0].x) {
       leftCoverGlass.xDir = false;
      }
      else {
        leftCoverGlass.xDir = true;
      }
      if (leftCoverGlass.y > leftCoverGlass.positionsArray[0].y) {
        leftCoverGlass.yDir = false;
      }
      else {
        leftCoverGlass.yDir = true;
      }
      if (rightCoverGlass > rightCoverGlass.positionsArray[0].x) {
       rightCoverGlass.xDir = false;
      }
      else {
        rightCoverGlass.xDir = true;
      }
      if (rightCoverGlass.y > rightCoverGlass.positionsArray[0].y) {
        rightCoverGlass.yDir = false;
      }
      else {
        rightCoverGlass.yDir = true;
      }

      var tube7Hover = new Image();
      tube7Hover.addEventListener('load', function () {
        context4.drawImage(tube7Hover, parseInt(canvas.width * 0.06), 3200, parseInt(canvas.width * 0.6707), parseInt((canvas.width * 0.6707) * (552.0/800.0)));
        
        coverGlassHover = new Image();
        coverGlassHover.addEventListener('load', function () {
          //context5.drawImage(coverGlassHover, parseInt(canvas.width * 0.298), 3593, parseInt(canvas.width * 0.113), parseInt((canvas.width * 0.113) * (42.0/135.0)));
          //context5.drawImage(coverGlassHover, parseInt(canvas.width * 0.605), 3593, parseInt(canvas.width * 0.113), parseInt((canvas.width * 0.113) * (42.0/135.0)));
          leftCoverGlassHover = new CanvasImage([coverGlassHover], 0.298, (3593.0/canvas3.width), 0, 0.0005, 0, 0, new Array({x:0.298,y:(3593.0/canvas3.width)}));
          rightCoverGlassHover = new CanvasImage([coverGlassHover], 0.605, (3593.0/canvas3.width), 0, 0.0005, 0, 0, new Array({x:0.605,y:(3593.0/canvas3.width)}))
        });
        coverGlassHover.src = './images/cover-glass-animate.png';

      });
      tube7Hover.src = './images/tube7-hover.png';
    });
    coverGlass.src = './images/cover-glass.png';
  });
  tube7.src = './images/tube7.png';

  var chart = new Image();
  chart.addEventListener('load', function () {
    context2.drawImage(chart, parseInt((canvas.width * 0.5) - (canvas.width * 0.77 * 0.5)), 3755, parseInt(canvas.width * 0.77), parseInt((canvas.width * 0.77) * (315.0/912.0)));
  });
  chart.src = './images/last-chart.png';

  var chart2 = new Image();
  chart2.addEventListener('load', function () {
    context2.drawImage(chart2, parseInt((canvas.width * 0.5) - (canvas.width * 0.7026 * 0.5)), 4055, parseInt(canvas.width * 0.7026), parseInt((canvas.width * 0.7026) * (188.0/838.0)));
  });
  chart2.src = './images/graphic.png';
}
//Draw an image rotated
var TO_RADIANS = Math.PI/180; 
function drawRotatedImage(image, x, y, angle, auxCtx) { 
 
  // save the current co-ordinate system 
  // before we screw with it
  auxCtx.save(); 
 
  // move to the middle of where we want to draw our image
  auxCtx.translate(x + (image.width/2), y + (image.height/2));
 
  // rotate around that point, converting our 
  // angle from degrees to radians 
  auxCtx.rotate(angle);
 
  // draw it up and to the left by half the width
  // and height of the image 
  auxCtx.drawImage(image, -(image.width/2), -(image.height/2));
 
  // and restore the co-ords to how they were when we began
  auxCtx.restore(); //
}
//Setup mosquitos
var setupMosquitos = function() {
  canvas = document.getElementById('mosquitosCanvas');

  if ($(".pgArticle").width() < tabletTreshold) {
    canvas.width = $('.horizontal-background img').width();
    canvas.height = $('.horizontal-background img').height();
    canvas.style.width  = canvas.width.toString() + "px";
    canvas.style.height = canvas.height.toString() + "px";
  }
  else {
    canvas.width = $('.pgChart-wrapper').width();
    canvas.height = $('.pgChart-wrapper').height();
    canvas.style.width  = canvas.width.toString() + "px";
    canvas.style.height = canvas.height.toString() + "px";
  }

  context = canvas.getContext('2d');
  context.imageSmoothingEnabled = false;

  var mosquito = new Image();
  mosquito.addEventListener('load', function () {
    //
  });
  mosquito.src = './images/mosquito1_left.png';
  var mosquito2 = new Image();
  mosquito2.addEventListener('load', function () {
    //
  });
  mosquito2.src = './images/mosquito2_left.png';
  var mosquitoFlipped = new Image();
  mosquitoFlipped.addEventListener('load', function () {
    //
  });
  mosquitoFlipped.src = './images/mosquito1_left.png';
  var mosquito2Flipped = new Image();
  mosquito2Flipped.addEventListener('load', function () {
    //
  });
  mosquito2Flipped.src = './images/mosquito2_left.png';

  for (var i = 0; i < totalMosquitos; i++) {
    

    mosquitosArray.push(new CanvasImage([mosquito/*, mosquito2*/], 0, 0, 0, 0.001 + (Math.random() * 0.001), 0, 0, new Array()));

    mosquitosArray[i].flippedImages = new Array(mosquitoFlipped/*, mosquito2Flipped*/);
    
    var auxPositionsArray = mosquitosPositionsPhase1[i%mosquitosPositionsPhase1.length];

    auxPositionsArray = shuffle(auxPositionsArray);
    
    auxPositionsArray.forEach(function(element,index,array) {
      var auxElement = {x: element.x + (((Math.random() * 0.1) - 0.05) * 1.0), y: element.y + (((Math.random() * 0.1) - 0.05) * 1.0)};
      auxElement.x = Math.max(0.51, Math.min(0.95, auxElement.x)) + 0.02;
      auxElement.y = Math.max(0.1, Math.min(0.3, auxElement.y));

      if ($(".pgArticle").width() < tabletTreshold) {
        auxElement.x = auxElement.x;
        auxElement.y = auxElement.y + 0.27;
      }
      else {
        if (auxElement.y <= 0.1 && auxElement.x <= 0.49) {
          auxElement.x = auxElement.x + 0.2;
        }
      }
      mosquitosArray[i].positionsArray.push(auxElement);
    });

    mosquitosArray[i].currentPosition = Math.floor(Math.random() * mosquitosArray[i].positionsArray.length);
    mosquitosArray[i].x = mosquitosArray[i].positionsArray[mosquitosArray[i].currentPosition].x;
    mosquitosArray[i].y = mosquitosArray[i].positionsArray[mosquitosArray[i].currentPosition].y;

    var nextPosition = mosquitosArray[i].currentPosition + 1;
    if (nextPosition >= mosquitosArray[i].positionsArray.length) {
      nextPosition = 0;
    }

    if (mosquitosArray[i].x > mosquitosArray[i].positionsArray[nextPosition].x) {
      mosquitosArray[i].xDir = false;
    }
    else {
      mosquitosArray[i].xDir = true;
    }
    if (mosquitosArray[i].y > mosquitosArray[i].positionsArray[nextPosition].y) {
      mosquitosArray[i].yDir = false;
    }
    else {
      mosquitosArray[i].yDir = true;
    }
  }
}
//Decide next step actions
var decideNextStep = function(nextStep){
  switch (nextStep) {
    case 0:
      $('#pgStep1 .pg-button').attr("disabled", "disabled");
      $('#pgStep1').attr("disabled", "disabled");
      mosquitosArray.forEach(function(element,index,array){
        setTimeout(function() {
          // add delay
          if ($(".pgArticle").width() < tabletTreshold) {
            element.positionsArray = mosquitosPositionsPhase2S[0];
          }
          else {
            element.positionsArray = mosquitosPositionsPhase2[0];
          }

          if (!($(".pgArticle").width() < tabletTreshold)) {
            element.positionsArray.forEach(function(element2,index2,array2) {
              element2.x = element2.x + (((Math.random() * 0.1) - 0.05) * 0.003);
              element2.y = element2.y + (((Math.random() * 0.1) - 0.05) * 0.003);
              element.positionsArray[index2] = element2;
            });
          }

          element.currentPosition = 0;
          element.currentMosquitoPhase = 1;
          element.speed = 0.007 + (Math.random() * 0.010);
          if (element.x > element.positionsArray[element.currentPosition].x) {
            element.xDir = false;
          }
          else {
            element.xDir = true;
          }
          if (element.y > element.positionsArray[element.currentPosition].y) {
            element.yDir = false;
          }
          else {
            element.yDir = true;
          }
        }, Math.random() * 500);
      });
      
      if ($(".pgArticle").width() < tabletTreshold) {
        $('.pgChart').animate({
          scrollLeft: $('#pgQuestion-container1').offset().left
        }, 2000);
      }
      else {
        $('html, body').animate({
          scrollTop: $('#pgQuestion-container1').offset().top
        }, 2000);
      }
      
    break;
    case 1:
    
      var auxMosquitosLeft = mosquitosLeft;
      mosquitosLeft -= returnMosquitosLeft(0, 2, parseInt($('#visit-country').val()));
      mosquitosArray.forEach(function(element,index,array){
        if (index < mosquitosLeft) {
          setTimeout(function() {
            // add delay
            
            if (index > auxMosquitosLeft) {
              element.positionsArray = new Array();
              if ($(".pgArticle").width() < tabletTreshold) {
                for (var i = 0; i < mosquitosPositionsPhase4S[0].length; i++) {
                  element.positionsArray.push(mosquitosPositionsPhase4S[0][i]);
                };
                for (var i = 0; i < mosquitosPositionsPhase6S[0].length; i++) {
                  element.positionsArray.push(mosquitosPositionsPhase6S[0][i]);
                }
                element.currentMosquitoPhase = 5;
                /*for (var i = 0; i < mosquitosPositionsPhase8S[0].length; i++) {
                  element.positionsArray.push(mosquitosPositionsPhase8S[0][i]);
                }*/
              }
              else {
                for (var i = 0; i < mosquitosPositionsPhase4[0].length; i++) {
                  element.positionsArray.push(mosquitosPositionsPhase4[0][i]);
                };
                for (var i = 0; i < mosquitosPositionsPhase6[0].length; i++) {
                  element.positionsArray.push(mosquitosPositionsPhase6[0][i]);
                }
                for (var i = 0; i < mosquitosPositionsPhase8[0].length; i++) {
                  element.positionsArray.push(mosquitosPositionsPhase8[0][i]);
                }
                element.currentMosquitoPhase = 7;
              }
              
            }
            else {
              element.positionsArray = new Array();
              if ($(".pgArticle").width() < tabletTreshold) {
                for (var i = 0; i < mosquitosPositionsPhase6S[0].length; i++) {
                  element.positionsArray.push(mosquitosPositionsPhase6S[0][i]);
                }
                /*for (var i = 0; i < mosquitosPositionsPhase8S[0].length; i++) {
                  element.positionsArray.push(mosquitosPositionsPhase8S[0][i]);
                }*/
                element.currentMosquitoPhase = 5;
              }
              else {
                for (var i = 0; i < mosquitosPositionsPhase6[0].length; i++) {
                  element.positionsArray.push(mosquitosPositionsPhase6[0][i]);
                }
                for (var i = 0; i < mosquitosPositionsPhase8[0].length; i++) {
                  element.positionsArray.push(mosquitosPositionsPhase8[0][i]);
                }
                element.currentMosquitoPhase = 7;
              }
              
            }

            element.positionsArray.forEach(function(element2,index2,array2) {
              element2.x = element2.x /*+ (((Math.random() * 0.1) - 0.05) * 0.0003)*/;
              element2.y = element2.y /*+ (((Math.random() * 0.1) - 0.05) * 0.0003)*/;
              element.positionsArray[index2] = element2;
            });

            element.currentPosition = 0;
            
            element.speed = 0.007 + (Math.random() * 0.015);
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
          }, Math.random() * 1500);
        }
      });
      
      $("#pgQuestion-container1").attr("disabled", "disabled");
      $("#pgQuestion-container1 select").attr("disabled", "disabled");
      //$("#pgStep2 .pg-button").removeAttr("disabled");
      $("#pgStep2").removeAttr("disabled");

      if ($(".pgArticle").width() < tabletTreshold) {
        $('.pgChart').animate({
          scrollLeft: $('#pgStep2').position().left
        }, 3000, function() {
          /*setTimeout(function() {
            $('.pgChart').animate({
              scrollLeft: $('#pgQuestion-container2').position().left
            }, 2000);
          }, 3000);*/
        });
      }
      else {
        $('html, body').animate({
          scrollTop: $('#pgQuestion-container2').offset().top
        }, 3000);
      }
    break;
    case 2:
      $('#pgStep2 .pg-button').attr("disabled", "disabled");
      $("#pgStep2").attr("disabled", "disabled");
      mosquitosArray.forEach(function(element,index,array){
        if (index < mosquitosLeft) {
          setTimeout(function() {
            // add delay
            if ($(".pgArticle").width() < tabletTreshold) {
              element.positionsArray = mosquitosPositionsPhase8S[0];
            }
            else {
              element.positionsArray = mosquitosPositionsPhase8[0];
            }

            element.positionsArray.forEach(function(element2,index2,array2) {
              element2.x = element2.x /*+ (((Math.random() * 0.1) - 0.05) * 0.002)*/;
              element2.y = element2.y /*+ (((Math.random() * 0.1) - 0.05) * 0.002)*/;
              element.positionsArray[index2] = element2;
            });

            element.currentPosition = 0;
            element.currentMosquitoPhase = 7;
            element.speed = 0.007 + (Math.random() * 0.010);
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
          }, Math.random() * 1500);
        }
      });
       if ($(".pgArticle").width() < tabletTreshold) {
        $('.pgChart').animate({
              scrollLeft: $('#pgQuestion-container2').position().left
            }, 2500);
      }
      else {
        $('html, body').animate({
          scrollTop: $('#pgQuestion-container2').offset().top
        }, 2500);
      }
    break;
    case 3:

      $('#pgQuestion-container2 .pg-button').attr("disabled", "disabled");
      $('#pgQuestion-container2').attr("disabled", "disabled");
      $('.pgQuestion__body__option').addClass("disabled-option");
      //$("#pgStep3 .pg-button").removeAttr("disabled");
      $("#pgStep3").removeAttr("disabled");
      
      mosquitosArray.forEach(function(element,index,array){
        if (index < mosquitosLeft) {
          setTimeout(function() {
            // add delay
            element.positionsArray = new Array();

            if ($(".pgArticle").width() < tabletTreshold) {
              for (var i = 0; i < mosquitosPositionsPhase10S[0].length; i++) {
                element.positionsArray.push(mosquitosPositionsPhase10S[0][i]);
              }
              /*for (var i = 0; i < mosquitosPositionsPhase12S[0].length; i++) {
                element.positionsArray.push(mosquitosPositionsPhase12S[0][i]);
              }*/
              element.currentMosquitoPhase = 9;
            }
            else {
              for (var i = 0; i < mosquitosPositionsPhase10[0].length; i++) {
                element.positionsArray.push(mosquitosPositionsPhase10[0][i]);
              }
              for (var i = 0; i < mosquitosPositionsPhase12[0].length; i++) {
                element.positionsArray.push(mosquitosPositionsPhase12[0][i]);
              }
              element.currentMosquitoPhase = 11;
            }

            element.positionsArray.forEach(function(element2,index2,array2) {
              if ($(".pgArticle").width() < tabletTreshold) {
                element.positionsArray[index2] = element2;
              }
              else {
                element2.x = element2.x + (((Math.random() * 0.1) - 0.05) * 0.003);
                element2.y = element2.y + (((Math.random() * 0.1) - 0.05) * 0.003);
                element.positionsArray[index2] = element2;
              }
            });

            element.currentPosition = 0;
            
            element.speed = 0.007 + (Math.random() * 0.020);
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
          }, Math.random() * 1500);
        }
      });
      
      if ($(".pgArticle").width() < tabletTreshold) {
        $('.pgChart').animate({
          scrollLeft: $('#pgStep3').position().left
        }, 1000, function() {
          /*setTimeout(function() {
            $('.pgChart').animate({
              scrollLeft: $('#pgQuestion-container3').position().left
            }, 3000);
          }, 3000);*/
        });
      }
      else {

        $('html, body').animate({
          scrollTop: $('#pgQuestion-container3').offset().top
        }, 2500);
      }
    break;
    case 4:
      $("#pgStep3 .pg-button").attr("disabled", "disabled");
      $("#pgStep3").attr("disabled", "disabled");
      mosquitosArray.forEach(function(element,index,array){
        if (index < mosquitosLeft) {
          setTimeout(function() {
            // add delay

            if ($(".pgArticle").width() < tabletTreshold) {
              element.positionsArray = mosquitosPositionsPhase12S[0];
            }
            else {
              element.positionsArray = mosquitosPositionsPhase12[0];
            }

            element.positionsArray.forEach(function(element2,index2,array2) {
              if ($(".pgArticle").width() < tabletTreshold) {
                element.positionsArray[index2] = element2;
              }
              else {
                element2.x = element2.x + (((Math.random() * 0.1) - 0.05) * 0.003);
                element2.y = element2.y + (((Math.random() * 0.1) - 0.05) * 0.003);
                element.positionsArray[index2] = element2;
              }
            });

            element.currentPosition = 0;
            element.currentMosquitoPhase = 11;
            element.speed = 0.007 + (Math.random() * 0.010);
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
          }, Math.random() * 1500);
        }
      });
      if ($(".pgArticle").width() < tabletTreshold) {
        $('.pgChart').animate({
          scrollLeft: $('#pgQuestion-container3').position().left
        }, 2500);
      }
      else {
        $('html, body').animate({
          scrollTop: $('#pgQuestion-container3').offset().top
        }, 2500);
      }
      break;
      case 5:
      setTimeout(function() {
        mosquitosLeft -= returnMosquitosLeft(4, 3, !$($($('#pgQuestion-wrapper3 .pgQuestion')[1]).find("pgQuestion__body__binary-option")[1]).hasClass("selected"));

        pregnantMosquitos = mosquitosLeft * 0.75;

      mosquitosArray.forEach(function(element,index,array){
        if (index < pregnantMosquitos) {
          setTimeout(function() {
            // add delay
            if ($(".pgArticle").width() < tabletTreshold) {
              element.positionsArray = mosquitosPositionsPhase18S[0];
            }
            else {
              element.positionsArray = mosquitosPositionsPhase18[0];
            }

            element.positionsArray.forEach(function(element2,index2,array2) {
              if ($(".pgArticle").width() < tabletTreshold) {
                element.positionsArray[index2] = element2;
              }
              else {
                element2.x = element2.x + (((Math.random() * 0.1) - 0.05) * 0.003);
                element2.y = element2.y + (((Math.random() * 0.1) - 0.05) * 0.003);
                element.positionsArray[index2] = element2;
              }
            });

            element.currentPosition = 0;
            element.currentMosquitoPhase = 17;
            element.speed = 0.007 + (Math.random() * 0.001);
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
          }, Math.random() * 1500);
        }
      });

      $('#pgQuestion-container3 .pg-button').attr("disabled", "disabled");
      $('#pgQuestion-container3').attr("disabled", "disabled");
      $('.pgQuestion__body__binary-option').addClass("disabled-option");

      mosquitosArray.forEach(function(element,index,array){
        if (index >= pregnantMosquitos && index < mosquitosLeft) {
          setTimeout(function() {
            // add delay
            element.positionsArray = mosquitosPositionsPhase20[0];

            if ($(".pgArticle").width() < tabletTreshold) {
              element.positionsArray = mosquitosPositionsPhase20S[0];
            }

            currentPhase = 20;

            $("#pgStep4").removeAttr("disabled", "disabled");


            element.positionsArray.forEach(function(element2,index2,array2) {
              if ($(".pgArticle").width() < tabletTreshold) {
                element.positionsArray[index2] = element2;
              }
              else {
                element2.x = element2.x + (((Math.random() * 0.1) - 0.05) * 0.003);
                element2.y = element2.y + (((Math.random() * 0.1) - 0.05) * 0.003);
                element.positionsArray[index2] = element2;
              }
            });

            element.currentPosition = 0;
            element.currentMosquitoPhase = 19;
            element.speed = 0.007 + (Math.random() * 0.001);
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
          }, Math.random() * 1500);
        }
      });
      
      if ($(".pgArticle").width() < tabletTreshold) {
        $('.pgChart').animate({
          scrollLeft: $('#pgStep4').position().left
        }, 2500, function() {
        });
      }
      else {
        $('html, body').animate({
          scrollTop: $('#pgStep4').offset().top
        }, 2500);
      }
      }, ($(".pgArticle").width() < tabletTreshold) ? 0 : 3250);
      break;

    default:
  }
};
/**************************************
        Steps
**************************************/
//Deals with the scrolling between steps and questions
var manageStepsAction = function(){
  $(document).on('click', '.pgStep__info__text-action', function(){
    var nextStep = parseInt($(this).attr('data-step'));
    decideNextStep(nextStep);
  });
  $(document).on('change', 'select#visit-country', function(){
    var nextStep = parseInt($(this).attr('data-step') + 1);
    decideNextStep(nextStep);
  });
};

/**************************************
        Questions
**************************************/
//Deals with the scrolling between questions
var manageQuestionsScroll = function() {
  $(document).on('change', 'select#home-country', function() {
    var nextPosition = $(this).attr('data-pos'),
      currentStep = $(this).attr('data-step');

   var $questionWrapper = $($('.pgQuestion-wrapper')[currentStep]),
        $questionContainer = $($('.pgQuestion-container')[currentStep]),
        newTranslationValue = -(($questionContainer.width() * nextPosition) / $questionWrapper.width()) * 100.0,
        newTranslation = 'translate3d(' + newTranslationValue + '%,-50%,0)';
        $questionWrapper.css('-webkit-transform', newTranslation);
        $questionWrapper.css('-moz-transform', newTranslation);
        $questionWrapper.css('transform:', newTranslation);

      if (currentStep == 0 && nextPosition == 1) {
      mosquitosLeft -= returnMosquitosLeft(currentStep, nextPosition, parseInt($('#home-country').val()));

      mosquitosArray.forEach(function(element,index,array){
        setTimeout(function() {
          if (index < mosquitosLeft) {
            // add delay

            if ($(".pgArticle").width() < tabletTreshold) {
              element.positionsArray = mosquitosPositionsPhase4S[0];
            }
            else {
              element.positionsArray = mosquitosPositionsPhase4[0];
            }

            if ($(".pgArticle").width() < tabletTreshold) {
              element.positionsArray.forEach(function(element2,index2,array2) {
                element2.x = element2.x + (((Math.random() * 0.1) - 0.05) * 0.0007);
                element2.y = element2.y + (((Math.random() * 0.1) - 0.05) * 0.0007);
                element.positionsArray[index2] = element2;
              });
            }

            element.currentPosition = 0;
            element.currentMosquitoPhase = 3;
            element.speed = 0.007 + (Math.random() * 0.001);
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
          }
        }, Math.random() * 1500);
      });
    }
  });

  $(document).on('click', '.pgQuestion-action', function(){
    $(this).attr("disabled", "disabled");
    var nextPosition = $(this).attr('data-pos'),
      currentStep = $(this).attr('data-step');

    var auxCurrentStep = currentStep;
    if (nextPosition != -1) {
      
      if (currentStep == 3) {
        auxCurrentStep = 2;
      }
      else {
        var $questionWrapper = $($('.pgQuestion-wrapper')[auxCurrentStep]),
        $questionContainer = $($('.pgQuestion-container')[auxCurrentStep]),
        newTranslationValue = -(($questionContainer.width() * nextPosition) / $questionWrapper.width()) * 100.0,
        newTranslation = 'translate3d(' + newTranslationValue + '%,-50%,0)';
        $questionWrapper.css('-webkit-transform', newTranslation);
        $questionWrapper.css('-moz-transform', newTranslation);
        $questionWrapper.css('transform:', newTranslation);
      }
    }
    else {
      if (parseInt(currentStep) == 2) {
        mosquitosLeft -= returnMosquitosLeft(parseInt(currentStep), nextPosition, 0)
      }
      decideNextStep(parseInt(currentStep) + 1);
    }
    if (currentStep == 0 && nextPosition == 1) {
      mosquitosLeft -= returnMosquitosLeft(currentStep, nextPosition, parseInt($('#home-country').val()));

      mosquitosArray.forEach(function(element,index,array){
        setTimeout(function() {
          if (index < mosquitosLeft) {
            // add delay
            element.positionsArray = mosquitosPositionsPhase4[0];

            element.positionsArray.forEach(function(element2,index2,array2) {
              element2.x = element2.x + (((Math.random() * 0.1) - 0.05) * 0.0007);
              element2.y = element2.y + (((Math.random() * 0.1) - 0.05) * 0.0007);
              element.positionsArray[index2] = element2;
            });

            element.currentPosition = 0;
            element.currentMosquitoPhase = 3;
            element.speed = 0.007 + (Math.random() * 0.001);
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
          }
        }, Math.random() * 1500);
      });
    }
    else if (currentStep == 3 && nextPosition == 1) {
      $($('#pgQuestion-wrapper3 .pgQuestion')[0]).find(".check").css("opacity", "1.0");
      $($('#pgQuestion-wrapper3 .pgQuestion')[0]).find(".pgQuestion__body__answer").css("opacity", "1.0");

      setTimeout(function() {
        var $questionWrapper = $($('.pgQuestion-wrapper')[auxCurrentStep]),
        $questionContainer = $($('.pgQuestion-container')[auxCurrentStep]),
        newTranslationValue = -(($questionContainer.width() * nextPosition) / $questionWrapper.width()) * 100.0,
        newTranslation = 'translate3d(' + newTranslationValue + '%,-50%,0)';
        $questionWrapper.css('-webkit-transform', newTranslation);
        $questionWrapper.css('-moz-transform', newTranslation);
        $questionWrapper.css('transform:', newTranslation);//

        mosquitosLeft -= returnMosquitosLeft(currentStep, nextPosition, ($($($('#pgQuestion-wrapper3 .pgQuestion')[0]).find("pgQuestion__body__binary-option")[0]).hasClass("selected")) ? 0 : (($($($('#pgQuestion-wrapper3 .pgQuestion')[0]).find("pgQuestion__body__binary-option")[1]).hasClass("selected")) ? 1 : 2));

      mosquitosArray.forEach(function(element,index,array){
        setTimeout(function() {
          if (index < mosquitosLeft) {
            // add delay
            element.positionsArray = mosquitosPositionsPhase14[0];

            if ($(".pgArticle").width() < tabletTreshold) {
              element.positionsArray = mosquitosPositionsPhase14S[0];
            }

            element.positionsArray.forEach(function(element2,index2,array2) {
              if ($(".pgArticle").width() < tabletTreshold) {
                element.positionsArray[index2] = element2;
              }
              else {
                element2.x = element2.x + (((Math.random() * 0.1) - 0.05) * 0.0007);
                element2.y = element2.y + (((Math.random() * 0.1) - 0.05) * 0.0007);
                element.positionsArray[index2] = element2;
              }
            });

            element.currentPosition = 0;
            element.currentMosquitoPhase = 13;
            element.speed = 0.007 + (Math.random() * 0.001);
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
          }
        }, Math.random() * 1500);
      });
      }, 0);
    }
    else if (currentStep == 3 && nextPosition == 2) {
      $($('#pgQuestion-wrapper3 .pgQuestion')[1]).find(".check").css("opacity", "1.0");
      $($('#pgQuestion-wrapper3 .pgQuestion')[1]).find(".pgQuestion__body__answer").css("opacity", "1.0");

      setTimeout(function() {
        var $questionWrapper = $($('.pgQuestion-wrapper')[auxCurrentStep]),
        $questionContainer = $($('.pgQuestion-container')[auxCurrentStep]),
        newTranslationValue = -(($questionContainer.width() * nextPosition) / $questionWrapper.width()) * 100.0,
        newTranslation = 'translate3d(' + newTranslationValue + '%,-50%,0)';
        $questionWrapper.css('-webkit-transform', newTranslation);
        $questionWrapper.css('-moz-transform', newTranslation);
        $questionWrapper.css('transform:', newTranslation);//

        mosquitosLeft -= returnMosquitosLeft(currentStep, nextPosition, !$($($('#pgQuestion-wrapper3 .pgQuestion')[1]).find("pgQuestion__body__binary-option")[1]).hasClass("selected"));

      mosquitosArray.forEach(function(element,index,array){
        setTimeout(function() {
          if (index < mosquitosLeft) {
            // add delay
            element.positionsArray = mosquitosPositionsPhase16[0];

            if ($(".pgArticle").width() < tabletTreshold) {
              element.positionsArray = mosquitosPositionsPhase16S[0];
            }

            element.positionsArray.forEach(function(element2,index2,array2) {
              if ($(".pgArticle").width() < tabletTreshold) {
                element.positionsArray[index2] = element2;
              }
              else {
                element2.x = element2.x + (((Math.random() * 0.1) - 0.05) * 0.0007);
                element2.y = element2.y + (((Math.random() * 0.1) - 0.05) * 0.0007);
                element.positionsArray[index2] = element2;
              }
            });

            element.currentPosition = 0;
            element.currentMosquitoPhase = 15;
            element.speed = 0.007 + (Math.random() * 0.001);
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
          }
        }, Math.random() * 1500);
      });
      }, 0);
    }

  });
};

//Select an option on the second question
var selectOption = function(){
  $(document).on('click', '.pgQuestion__body__option:not(.disabled-option)', function() {
    if ($(this).hasClass("selected")) {
      $(this).removeClass("selected");
      $(this).find("img").attr("src", "./images/" + behaviorImages[$(this).attr("data-index")]);
    }
    else {
      $(this).addClass("selected");
      $(this).find("img").attr("src", "./images/" + hoverBehaviorImages[$(this).attr("data-index")]);
    }
  });
};

//Select a binary option on the third question
var selectBinaryOption = function(){
  $(document).on('click', '.pgQuestion__body__binary-option:not(.disabled-option)', function() {

    var nextPosition = $(this).attr('data-pos'),
      currentStep = $(this).attr('data-step');
   
    if ($(this).hasClass("selected")) {
      $(this).removeClass("selected");
      // move mosquitos
      $(this).parent().parent().parent().find(".pg-button").attr("disabled", "disabled");
    }
    else {
      $(this).parent().find(".pgQuestion__body__binary-option").removeClass("selected");
      $(this).parent().find(".pgQuestion__body__binary-option").addClass("disabled-option");
      $(this).addClass("selected");
      $(this).parent().parent().parent().find(".pg-button").removeAttr("disabled");
    }

    if (currentStep == 3 && nextPosition == 1) {
      $($('#pgQuestion-wrapper3 .pgQuestion')[0]).find(".check").css("opacity", "1.0");
      $($('#pgQuestion-wrapper3 .pgQuestion')[0]).find(".pgQuestion__body__answer").css("opacity", "1.0");

      if ($(".pgArticle").width() >= tabletTreshold) {

      if((mobile_browser == 1)&&(ipad_browser == 0))
      {
      setTimeout(function() {
        var $questionWrapper = $($('.pgQuestion-wrapper')[currentStep - 1]),
        $questionContainer = $($('.pgQuestion-container')[currentStep - 1]),
        newTranslationValue = -(($questionContainer.width() * nextPosition) / $questionWrapper.width()) * 100.0,
        newTranslation = 'translate3d(' + newTranslationValue + '%,-50%,0)';
        $questionWrapper.css('-webkit-transform', newTranslation);
        $questionWrapper.css('-moz-transform', newTranslation);
        $questionWrapper.css('transform:', newTranslation);//

        mosquitosLeft -= returnMosquitosLeft(currentStep, nextPosition, ($($($('#pgQuestion-wrapper3 .pgQuestion')[0]).find("pgQuestion__body__binary-option")[0]).hasClass("selected")) ? 0 : (($($($('#pgQuestion-wrapper3 .pgQuestion')[0]).find("pgQuestion__body__binary-option")[1]).hasClass("selected")) ? 1 : 2));

      mosquitosArray.forEach(function(element,index,array){
        setTimeout(function() {
          if (index < mosquitosLeft) {
            // add delay
            element.positionsArray = mosquitosPositionsPhase14[0];

            if ($(".pgArticle").width() < tabletTreshold) {
              element.positionsArray = mosquitosPositionsPhase14S[0];
            }

            element.positionsArray.forEach(function(element2,index2,array2) {
              if ($(".pgArticle").width() < tabletTreshold) {
                element.positionsArray[index2] = element2;
              }
              else {
                element2.x = element2.x + (((Math.random() * 0.1) - 0.05) * 0.0007);
                element2.y = element2.y + (((Math.random() * 0.1) - 0.05) * 0.0007);
                element.positionsArray[index2] = element2;
              }
            });

            element.currentPosition = 0;
            element.currentMosquitoPhase = 13;
            element.speed = 0.007 + (Math.random() * 0.001);
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
          }
        }, Math.random() * 1500);
      });
      }, 3250);

      }
    }
    
    }
    else if (currentStep == 3 && nextPosition == 2) {
      $($('#pgQuestion-wrapper3 .pgQuestion')[1]).find(".check").css("opacity", "1.0");
      $($('#pgQuestion-wrapper3 .pgQuestion')[1]).find(".pgQuestion__body__answer").css("opacity", "1.0");

      if ($(".pgArticle").width() >= tabletTreshold) {

      if((mobile_browser == 1)&&(ipad_browser == 0))
      {
      setTimeout(function() {
        var $questionWrapper = $($('.pgQuestion-wrapper')[currentStep - 1]),
        $questionContainer = $($('.pgQuestion-container')[currentStep - 1]),
        newTranslationValue = -(($questionContainer.width() * nextPosition) / $questionWrapper.width()) * 100.0,
        newTranslation = 'translate3d(' + newTranslationValue + '%,-50%,0)';
        $questionWrapper.css('-webkit-transform', newTranslation);
        $questionWrapper.css('-moz-transform', newTranslation);
        $questionWrapper.css('transform:', newTranslation);//

        mosquitosLeft -= returnMosquitosLeft(currentStep, nextPosition, !$($($('#pgQuestion-wrapper3 .pgQuestion')[1]).find("pgQuestion__body__binary-option")[1]).hasClass("selected"));

      mosquitosArray.forEach(function(element,index,array){
        setTimeout(function() {
          if (index < mosquitosLeft) {
            // add delay
            element.positionsArray = mosquitosPositionsPhase16[0];

            if ($(".pgArticle").width() < tabletTreshold) {
              element.positionsArray = mosquitosPositionsPhase16S[0];
            }

            element.positionsArray.forEach(function(element2,index2,array2) {
              if ($(".pgArticle").width() < tabletTreshold) {
                element.positionsArray[index2] = element2;
              }
              else {
                element2.x = element2.x + (((Math.random() * 0.1) - 0.05) * 0.0007);
                element2.y = element2.y + (((Math.random() * 0.1) - 0.05) * 0.0007);
                element.positionsArray[index2] = element2;
              }
            });

            element.currentPosition = 0;
            element.currentMosquitoPhase = 15;
            element.speed = 0.007 + (Math.random() * 0.001);
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
          }
        }, Math.random() * 1500);
      });
      }, 3250);
    }

      }
    }
    else {
      $($('#pgQuestion-wrapper3 .pgQuestion')[2]).find(".check").css("opacity", "1.0");
      $($('#pgQuestion-wrapper3 .pgQuestion')[2]).find(".pgQuestion__body__answer").css("opacity", "1.0");
      if ($(".pgArticle").width() >= tabletTreshold) {
        decideNextStep(5);
        getResults();
      }
    }

  });
};

var newX = 0.3;
    var newXS = 0.25;
    var newY = 3.22;
    var newRealY = 0;
    var newYS = 2;

//Select the pregnancy option
var selectPregnancyOption = function() {
  $(document).on('click', '.pgStep__pregnancy-ok', function() {
    if (currentPhase == 20) {
      if ($(".pgArticle").width() < tabletTreshold) {
        $("#left-glass-cover-horizontal, #left-glass-cover-mid-horizontal").animate({
          marginLeft: "-" + ($("#left-glass-cover-horizontal").width() * 0.01) + "px"
        }, 200);
      }
      else {
        $("#left-glass-cover, #left-glass-cover-mid").animate({
          marginTop: "-" + ($("#left-glass-cover").height() * 0.01) + "px"
        }, 200);
      }
      
      $('.pgStep__pregnancy-ok').attr("disabled", "disabled");
      $('.pgStep__pregnancy-ko').attr("disabled", "disabled");
      currentPhase = 21;
    pregnantSelected = true;

    cell = Math.ceil(25 * (mosquitosLeft / totalMosquitos));
    
    switch (cell) {
      case 1:
      case 3:
      case 5:
      case 8:
      case 12:
        newX = 0.315;
        newXS = 0.25;
      break;
      case 2:
      case 6:
      case 10:
      case 14:
      case 17:
        newX = 0.405;
        newXS = 0.375;
      break;
      case 4:
      case 9:
      case 15:
      case 19:
      case 21:
        newX = 0.5;
        newXS = 0.5;
      break;
      case 7:
      case 13:
      case 18:
      case 22:
      case 24:
        newX = 0.595;
        newXS = 0.625;
      break;
      case 11:
      case 16:
      case 20:
      case 23:
      case 25:
        newX = 0.685;
        newXS = 0.75;
      break;
    }
    switch (cell) {
      case 1:
      case 2:
      case 4:
      case 7:
      case 11:
        newY = 3.39;
        newY = 0;
        newRealY = 19;
        newYS = 72;
      break;
      case 3:
      case 6:
      case 9:
      case 13:
      case 16:
        newY = 3.3475;
        newY = 5;
        newRealY = 13;
        newYS = 52;
      break;
      case 5:
      case 10:
      case 15:
      case 18:
      case 20:
        newY = 3.305;
        newY = 10;
        newRealY = 8;
        newYS = 32;
      break;
      case 8:
      case 14:
      case 19:
      case 22:
      case 23:
        newY = 3.2625;
        newY = 15;
        newRealY = 4;
        newYS = 17;
      break;
      case 12:
      case 17:
      case 21:
      case 24:
      case 25:
        newY = 3.22;
        newY = 20;
        newRealY = -1;
        newYS = 2;
      break;
    }

    $('.pgStep__last-chart-marker').css("opacity", 1.0);
    markerMarginTop = (20 - newY);

    if ($(".pgArticle").width() < tabletTreshold) {
      $('.pgStep__last-chart-marker').css("top", newYS+ "%");
      $('.pgStep__last-chart-marker').css("left",  (newXS * 100) + "%");
    }
    else {
      $('.pgStep__last-chart-marker').css("margin-top",  newRealY+ "%");
      $('.pgStep__last-chart-marker').css("left",  parseInt(newX * 100) + "%");
    }

    markerPos = $('#pgStep4 .pgStep__last-chart-marker').position();

    var newPositionsArray = new Array({x: markerPos.left / canvas.width, y: (( ((markerPos.top + parseInt($('#pgStep4 .pgStep__last-chart-marker').css("margin-top"))) + $('#pgStep4 .pgStep__last-chart').position().top + $('#pgStep4 .pgStep__last-chart-marker').height()) ) - parseInt($("#mosquitosCanvas").css("top"))) / canvas.width});


    if ($(".pgArticle").width() < tabletTreshold) {
      markerPos = $('.pgStep__last-chart-horizontal-wrapper .pgStep__last-chart-marker').position();
      newPositionsArray = new Array({x: ((markerPos.left + $('.pgStep__last-chart-horizontal-wrapper').position().left + parseInt($('.pgStep__last-chart-horizontal-wrapper').css("margin-left"))) / 0.125 ) / canvas.width, y: (( (markerPos.top + $('.pgStep__last-chart-marker').height() + parseInt($(".pgStep__last-chart-horizontal-wrapper").css("margin-top")) ) + (($("#mosquitosCanvas").height() - $('.pgStep__last-chart-horizontal-wrapper').height()) / 2.0) ) / 0.125) / canvas.width });
      setTimeout(function() {
          if ($(".pgArticle").width() <= 736 && $("#horizontal-conclusions-button").css("display") == "none") {
            $('.pgChart').animate({
              scrollLeft: $('.pgConclusions').position().left
            }, 2500);
          }
      }, 4000);
    }

    mosquitosArray.forEach(function(element,index,array){
        setTimeout(function() {
          if (index < pregnantMosquitos) {
            element.positionsArray = newPositionsArray;

            element.currentPosition = 0;
            element.currentMosquitoPhase = 21;
            element.speed = 0.004 + (Math.random() * 0.001);
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
          }
        }, (Math.random() * 1500) + 1000);
      });
    setTimeout(function() {
      createConclusions(cell);
      createUsersStats(newX, newY, cell);
      //setTimeout(function() {
        if ($(".pgArticle").width() < tabletTreshold) {
          $('.pgChart').animate({
            scrollLeft: $('#pgStep__last-chart').position().left + ($('#pgStep4').width() / 2)
          }, 1000);
        }
        else {
          $('html, body').animate({
            scrollTop: $(".pgStep__last-chart").position().top + ($('#pgStep4').height() / 2 )
            //scrollTop: $(".pgConclusions").offset().top - ($('#pgStep4 .pgStep__last-chart').height() * 2.0)
          }, 1000);
        }
      //}, 1000);
    }, 0);
    }
  });
  $(document).on('click', '.pgStep__pregnancy-ko', function() {
    if (currentPhase == 20) {
      if ($(".pgArticle").width() < tabletTreshold) {
        $("#right-glass-cover-horizontal, #right-glass-cover-mid-horizontal").animate({
          marginTop: "-" + ($("#right-glass-cover-horizontal").width() * 0.01) + "px"
        }, 200);
      }
      else {
        $("#right-glass-cover, #right-glass-cover-mid").animate({
          marginTop: "-" + ($("#right-glass-cover").height() * 0.01) + "px"
        }, 200);
      }
      $('.pgStep__pregnancy-ok').attr("disabled", "disabled");
      $('.pgStep__pregnancy-ko').attr("disabled", "disabled");
      currentPhase = 21;
    nonPregnantSelected = true;
    var newMosquitosLeftValue = Math.max(5, mosquitosLeft - (mosquitosLeft * 0.45));

    cell = Math.ceil(25 * (newMosquitosLeftValue / totalMosquitos));
    
    cell = Math.ceil(25 * (mosquitosLeft / totalMosquitos));

    switch (cell) {
      case 1:
      case 3:
      case 5:
      case 8:
      case 12:
        newX = 0.315;
        newXS = 0.25;
      break;
      case 2:
      case 6:
      case 10:
      case 14:
      case 17:
        newX = 0.405;
        newXS = 0.375;
      break;
      case 4:
      case 9:
      case 15:
      case 19:
      case 21:
        newX = 0.5;
        newXS = 0.5;
      break;
      case 7:
      case 13:
      case 18:
      case 22:
      case 24:
        newX = 0.595;
        newXS = 0.625;
      break;
      case 11:
      case 16:
      case 20:
      case 23:
      case 25:
        newX = 0.685;
        newXS = 0.75;
      break;
    }
    switch (cell) {
      case 1:
      case 2:
      case 4:
      case 7:
      case 11:
        newY = 3.39;
        newY = 0;
        newRealY = 19;
        newYS = 72;
      break;
      case 3:
      case 6:
      case 9:
      case 13:
      case 16:
        newY = 3.3475;
        newY = 5;
        newRealY = 13;
        newYS = 52;
      break;
      case 5:
      case 10:
      case 15:
      case 18:
      case 20:
        newY = 3.305;
        newY = 10;
        newRealY = 8;
        newYS = 32;
      break;
      case 8:
      case 14:
      case 19:
      case 22:
      case 23:
        newY = 3.2625;
        newY = 15;
        newRealY = 4;
        newYS = 17;
      break;
      case 12:
      case 17:
      case 21:
      case 24:
      case 25:
        newY = 3.22;
        newY = 20;
        newRealY = -1;
        newYS = 2;
      break;
    }

    $('.pgStep__last-chart-marker').css("opacity", 1.0);
    markerMarginTop = (20 - newY);

    if ($(".pgArticle").width() < tabletTreshold) {
      $('.pgStep__last-chart-marker').css("top", newYS+ "%");
      $('.pgStep__last-chart-marker').css("left",  (newXS * 100) + "%");
    }
    else {
      $('.pgStep__last-chart-marker').css("margin-top",  newRealY+ "%");
      $('.pgStep__last-chart-marker').css("left",  (newX * 100) + "%");
    }

    markerPos = $('#pgStep4 .pgStep__last-chart-marker').position();

    var newPositionsArray = new Array({x: markerPos.left / canvas.width, y: (( ((markerPos.top + parseInt($('#pgStep4 .pgStep__last-chart-marker').css("margin-top"))) + $('#pgStep4 .pgStep__last-chart').position().top + $('#pgStep4 .pgStep__last-chart-marker').height()) ) - parseInt($("#mosquitosCanvas").css("top"))) / canvas.width});


    if ($(".pgArticle").width() < tabletTreshold) {
      markerPos = $('.pgStep__last-chart-horizontal-wrapper .pgStep__last-chart-marker').position();
      newPositionsArray = new Array({x: ((markerPos.left + $('.pgStep__last-chart-horizontal-wrapper').position().left + parseInt($('.pgStep__last-chart-horizontal-wrapper').css("margin-left"))) / 0.125 ) / canvas.width, y: (( (markerPos.top + $('.pgStep__last-chart-marker').height() + parseInt($(".pgStep__last-chart-horizontal-wrapper").css("margin-top")) ) + (($("#mosquitosCanvas").height() - $('.pgStep__last-chart-horizontal-wrapper').height()) / 2.0) ) / 0.125) / canvas.width});
    
      /*setTimeout(function() {
          if ($(".pgArticle").width() <= 736 && $("#horizontal-conclusions-button").css("display") == "none") {
            $('.pgChart').animate({
              scrollLeft: $('.pgConclusions').position().left
            }, 2500);
          }
      }, 4000);*/
    }

    mosquitosArray.forEach(function(element,index,array){
        setTimeout(function() {
          if (index >= pregnantMosquitos && index < mosquitosLeft) {
            element.positionsArray = newPositionsArray;

            element.currentPosition = 0;
            element.currentMosquitoPhase = 21;
            element.speed = 0.004 + (Math.random() * 0.001);
            if (element.x > element.positionsArray[element.currentPosition].x) {
              element.xDir = false;
            }
            else {
              element.xDir = true;
            }
            if (element.y > element.positionsArray[element.currentPosition].y) {
              element.yDir = false;
            }
            else {
              element.yDir = true;
            }
          }
        }, (Math.random() * 1500) + 1000);
      });

    setTimeout(function() {
      createConclusions(cell);
      createUsersStats(newX, newY, cell);
      setTimeout(function() {
        if ($(".pgArticle").width() < tabletTreshold) {
          $('.pgChart').animate({
            scrollLeft: $('#pgStep4').position().left + ($('#pgStep4').width() / 2.0)
          }, 1000);
        }
        else {
          $('html, body').animate({
            //scrollTop: $(".pgConclusions").offset().top - ($('#pgStep4 .pgStep__last-chart').height() * 2.0)
            scrollTop: $(".pgStep__last-chart").position().top + ($('#pgStep4').height() / 2 )
          }, 1000);
        }
      }, 1000);
    }, 0);
    }
  });
}

//Return mosquitos left depending on the chosen country
var returnMosquitosLeft = function(step, question, option){
  var auxMosquitosLeft = 0;

  if (step == 0) {
    if (question == 1) {
      if (option == 1) {
        auxMosquitosLeft = 0;
      }
      else if (option == 2) {
        auxMosquitosLeft = 80;
      }
      else if (option == 4){
        auxMosquitosLeft = 75;
      }
    }
    if (question == 2) {
      if (option == 1) {
        if (mosquitosLeft <= 25) {
          auxMosquitosLeft = -50;//
        }
        else {
          auxMosquitosLeft = 0;
        }
      }
      else if (option == 2 || option == 4) {
        if (mosquitosLeft <= 25) {
          auxMosquitosLeft = 0;
        }
        else {
          auxMosquitosLeft = 5;
        }
      }
    }
  }
  if (step == 2) {
    //if (question == 0) {
      if ($($('.pgQuestion__body__option')[0]).hasClass('selected')) {
        auxMosquitosLeft += 3;
      }
      else {
        auxMosquitosLeft += 0; 
      }
      if ($($('.pgQuestion__body__option')[1]).hasClass('selected')) {
        auxMosquitosLeft += 0;
      }
      else {
        auxMosquitosLeft += 1; 
      }
      if ($($('.pgQuestion__body__option')[2]).hasClass('selected')) {
        auxMosquitosLeft += 0;
      }
      else {
        auxMosquitosLeft += 1; 
      }
      if ($($('.pgQuestion__body__option')[3]).hasClass('selected')) {
        auxMosquitosLeft += 1;
      }
      else {
        auxMosquitosLeft += 0; 
      }
      if ($($('.pgQuestion__body__option')[4]).hasClass('selected')) {
        auxMosquitosLeft += 1;
      }
      else {
        auxMosquitosLeft += 0; 
      }
      if ($($('.pgQuestion__body__option')[5]).hasClass('selected')) {
        auxMosquitosLeft += 0;
      }
      else {
        auxMosquitosLeft += 1; 
      }
      if ($($('.pgQuestion__body__option')[6]).hasClass('selected')) {
        auxMosquitosLeft += 0;
      }
      else {
        auxMosquitosLeft += 1; 
      }
      if ($($('.pgQuestion__body__option')[7]).hasClass('selected')) {
        auxMosquitosLeft += 1;
      }
      else {
        auxMosquitosLeft += 0; 
      }
      if ($($('.pgQuestion__body__option')[8]).hasClass('selected')) {
        auxMosquitosLeft += 0;
      }
      else {
        auxMosquitosLeft += (mosquitosLeft <= 80) ? 2 : 1; 
      }
    //}
  }

  if (step == 3) {
    if (question == 1) {
      if (option == 0) {
        auxMosquitosLeft = 1;
      }
      else if (option == 1) {
        auxMosquitosLeft = 0;
      }
      else {
        auxMosquitosLeft = 0;
      }
    }
    if (question == 2) {
      if (option == 0) {
        auxMosquitosLeft = 1;
      }
      else if (option == 1) {
        auxMosquitosLeft = 0;
      }
    }
    if (question == 3) {
      if (option == 0) {
        auxMosquitosLeft = 0;
      }
      else if (option == 1) {
        auxMosquitosLeft = 1;
      }
    }
  }

  return auxMosquitosLeft;
};

/**************************************
        Conclusions
**************************************/
var createConclusions = function(cell) {
  var conclusionsText = '<h4 class="pgConclusions__main-conclusion"><b>You have a ';

  if (risk_value == 1) {
    conclusionsText += "low";
    conclusionsValue = "low";
  }
  else if (risk_value == 2) {
    conclusionsText += "mid";
    conclusionsValue = "mid";
  }
  else {
    conclusionsText += "high";
    conclusionsValue = "high";
  }

  conclusionsText += " risk of contracting the Zika virus, and the consequences "

  if (consequence_value == 1) {
    conclusionsText += "would be low.";
  }
  else if (consequence_value == 2) {
    conclusionsText += "would be mild.";
  }
  else {
    conclusionsText += "could be serious.";
  }

  conclusionsText += "</b></h4>";

  if(parseInt($("#home-country").val()) == 4 || parseInt($("#visit-country").val()) == 4) {
    conclusionsText += "<p>You live in the United States or you are planning to travel to the United States. Research shows that some states will be affected by the Zika virus in the coming weeks.</p>"
  }else if (parseInt($("#home-country").val()) == 2 && parseInt($("#visit-country").val()) == 2) {
    if (!$($(".pgQuestion__body__option")[8]).hasClass("selected") || pregnantSelected) {
      conclusionsText += "<p>You don’t live in a country nor are you planning to travel to a country affected by the Zika virus. <b>Your risk is low</b> but remember that there have been <b>cases of sexual transmission</b> by partners that got infected in those areas.</p>";
    }
    else {
      conclusionsText += "<p>You don’t live in a country nor are you planning to travel to a country affected by the Zika virus. <b>Your risk is zero.<b></p>";
    }
  }
  else if(!(parseInt($("#home-country").val()) == 4 && parseInt($("#visit-country").val()) == 4)) {
    conclusionsText += "<p>You live in a country that is affected by the Zika virus or you are planning to travel to a country that is.</p>";
  }

  if ($($(".pgQuestion__body__option")[1]).hasClass("selected") || $($(".pgQuestion__body__option")[2]).hasClass("selected") || $($(".pgQuestion__body__option")[5]).hasClass("selected") || $($(".pgQuestion__body__option")[6]).hasClass("selected")) {
    conclusionsText += "<p>Wearing shorts and sleeveless shirts that are dark in color and keeping buckets of water or having water containers near your house can <b>increase your risk of being bitten by the mosquito and raise your chances of getting the virus.</b></p>";
  }
  if ($($(".pgQuestion__body__option")[3]).hasClass("selected") || $($(".pgQuestion__body__option")[4]).hasClass("selected") || $($(".pgQuestion__body__option")[7]).hasClass("selected")) {
    conclusionsText += "<p>Using insect repellent, wearing light color clothes, having physical barriers such mesh screens or treated netting materials on doors and windows, or sleeping under mosquito nets will all <b>decrease your risk of getting bitten by the mosquito and lower your changes of getting the virus.</b></p>";
  }

  if (nonPregnantSelected) {
    conclusionsText += "<p>Zika virus is spread primarily through the bite of infected Aedes species mosquitoes. <b>Only 20% people who contract the virus will even develop any symptoms and the illness is usually mild</b>, with symptoms like fever, rash or joint pain that will last a few days.<br><br>Recently in Brazil, local health authorities have observed an increase in Guillain-Barré syndrome, that causes paralysis, which coincided with Zika virus infections in the general public. Based on a growing body of preliminary research, there is scientific consensus that Zika virus is a cause of microcephaly and Guillain-Barré syndrome.</p>";
  }
  else {
    conclusionsText += "<p><b>The Zika virus can be transmitted from infected mothers to their fetuses</b> and this can happen during both pregnancy or at childbirth. Based on a growing body of preliminary research, <b>there is scientific consensus that Zika virus is a cause of microcephaly</b>, which is a condition where a baby is born with a small head or the head stops growing after birth. Babies with microcephaly can develop developmental disabilities. Early diagnosis of microcephaly can sometimes be made by fetal ultrasound.<br><br><b>Pregnant women who develop symptoms of Zika virus infection, should see their health-care provider for close monitoring of their pregnancy.</b> If you’re travelling to a country affected by Zika, the World Health Organization is advising pregnant women not to travel to areas of ongoing Zika virus transmission.</p>";
  }

  conclusionsText += "<br><br>";

  $(".pgConclusions-desc").before(conclusionsText);

  $(".pgConclusions-desc, .pgConclusions h4").css("display", "block");

}

var consequence_value = 0;
var risk_value = 0;
var get_risk_low = 0;
var get_risk_med = 0;
var get_risk_high = 0;
var get_consequences_low = 0;
var get_consequences_med = 0;
var get_consequences_high = 0;
var getResults = function(){
      var searchUrl = 'http://search.submissionplatform.com/prod-submissions*/_search',
          query = '{"filter": {"term": {"appId": "5734cbea0c51e72f60b22ffa"} }, "size":0, "aggs": {"zika": {"filters": {"filters": {"submit_qa": {"bool": {"must": [{"term": {"appId": "5734cbea0c51e72f60b22ffa"} } ], "should": [{"exists": {"field": "formData.5734cbea0c51e72f60b22ffa.occurance_0"} }, {"exists": {"field": "formData.5734cbea0c51e72f60b22ffa.consequenses_1"} } ] } } } }, "aggs": {"risks": {"histogram": {"field": "formData.5734cbea0c51e72f60b22ffa.occurance_0", "interval": "1"} }, "consequences": {"histogram": {"field": "formData.5734cbea0c51e72f60b22ffa.consequenses_1", "interval": "1"} } } } } }';
          
          var $xhr = $.ajax({
            type    : 'POST',
            url     : searchUrl,
            data: query,
            contentType: "application/json; charset=utf-8",
            dataType: "json"
          });

          $xhr.success(function(data) {
            console.debug('!!RESULTS!!!')
            console.debug(data);
            console.debug('RISK')
            buck_risk = data.aggregations.zika.buckets.submit_qa.risks.buckets;
            for(i=0;i<buck_risk.length;i++)
            {
                switch (buck_risk[i].key) {
                  case 1:
                     get_risk_low = buck_risk[i].doc_count;
                  break;
                  case 2:
                     get_risk_med = buck_risk[i].doc_count;
                  break;
                  case 3:
                     get_risk_high = buck_risk[i].doc_count;
                  break;
                }
            }

            console.debug("Risk: low-"+get_risk_low+" med-"+get_risk_med+" high-"+get_risk_high);
            console.debug('CONSEQUENCES')
            buck_consequences = data.aggregations.zika.buckets.submit_qa.consequences.buckets;
            for(i=0;i<buck_consequences.length;i++)
            {
                switch (buck_consequences[i].key) {
                  case 0:
                     get_consequences_low = buck_consequences[i].doc_count;
                  break;
                  case 1:
                     get_consequences_med = buck_consequences[i].doc_count;
                  break;
                  case 2:
                     get_consequences_high = buck_consequences[i].doc_count;
                  break;
                }
            }
            console.debug("Consequences: low-"+get_consequences_low+" med-"+get_consequences_med+" high-"+get_consequences_high);
          });
          
          $xhr.error(function(e){
            console.debug('!! RESULT Err!!');
            console.debug(e);
          })
  };

var createStatsPorcentage = function(num,max)
{
  porc = (num*100)/max;

  return porc.toPrecision(3);
}

var createUsersStats = function(markerLeft, markerTop, cell) {
  var results = [1, 2, 1, 2, 5, 3, 6, 10, 1, 1, 1, 1, 10, 12, 5, 1, 1, 10, 12, 1, 1, 1, 2, 9, 1];

  var maxResults = -1;

  for (var i = 0; i < results.length; i++) {
    if (maxResults < results[i]) {
      maxResults = results[i];
    }
  }

  var total_risk = get_risk_high + get_risk_med + get_risk_low;
  var total_cons = get_consequences_high + get_consequences_med + get_consequences_low;

  $($('#pgStep4 .pgStep__users-stats-row-value')[0]).css("left", "0%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-row-value')[0]).css("left", "0%");
  $($('#pgStep4 .pgStep__users-stats-row-value')[1]).css("left", createStatsPorcentage(get_risk_low,total_risk)+"%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-row-value')[1]).css("left", createStatsPorcentage(get_risk_low,total_risk)+"%");
  $($('#pgStep4 .pgStep__users-stats-row-value')[2]).css("left", createStatsPorcentage((get_risk_med+get_risk_low),total_risk)+"%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-row-value')[2]).css("left", createStatsPorcentage((get_risk_med+get_risk_low),total_risk)+"%");
  $($('#pgStep4 .pgStep__users-stats-row-value')[3]).css("left", "0%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-row-value')[3]).css("left", "0%");
  $($('#pgStep4 .pgStep__users-stats-row-value')[4]).css("left", createStatsPorcentage(get_consequences_low,total_cons)+"%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-row-value')[4]).css("left", createStatsPorcentage(get_consequences_low,total_cons)+"%");
  $($('#pgStep4 .pgStep__users-stats-row-value')[5]).css("left", createStatsPorcentage((get_consequences_low+get_consequences_med),total_cons)+"%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-row-value')[5]).css("left", createStatsPorcentage((get_consequences_low+get_consequences_med),total_cons)+"%");

  $($('#pgStep4 .pgStep__users-stats-row-value')[0]).css("width", createStatsPorcentage(get_risk_low,total_risk)+"%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-row-value')[0]).css("width", createStatsPorcentage(get_risk_low,total_risk)+"%");
  $($('#pgStep4 .pgStep__users-stats-row-value')[1]).css("width", createStatsPorcentage(get_risk_med,total_risk)+"%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-row-value')[1]).css("width", createStatsPorcentage(get_risk_med,total_risk)+"%");
  $($('#pgStep4 .pgStep__users-stats-row-value')[2]).css("width", createStatsPorcentage(get_risk_high,total_risk)+"%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-row-value')[2]).css("width", createStatsPorcentage(get_risk_high,total_risk)+"%");
  $($('#pgStep4 .pgStep__users-stats-row-value')[3]).css("width", createStatsPorcentage(get_consequences_low,total_cons)+"%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-row-value')[3]).css("width", createStatsPorcentage(get_consequences_low,total_cons)+"%");
  $($('#pgStep4 .pgStep__users-stats-row-value')[4]).css("width", createStatsPorcentage(get_consequences_med,total_cons)+"%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-row-value')[4]).css("width", createStatsPorcentage(get_consequences_med,total_cons)+"%");
  $($('#pgStep4 .pgStep__users-stats-row-value')[5]).css("width", createStatsPorcentage(get_consequences_high,total_cons)+"%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-row-value')[5]).css("width", createStatsPorcentage(get_consequences_high,total_cons)+"%");

  $($('#pgStep4 .pgStep__users-stats-text-row-value')[0]).css("left", "0%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-text-row-value')[0]).css("left", "0%");
  $($('#pgStep4 .pgStep__users-stats-text-row-value')[1]).css("left", createStatsPorcentage(get_risk_low,total_risk)+"%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-text-row-value')[1]).css("left", createStatsPorcentage(get_risk_low,total_risk)+"%");
  $($('#pgStep4 .pgStep__users-stats-text-row-value')[2]).css("left", createStatsPorcentage((get_risk_med+get_risk_low),total_risk)+"%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-text-row-value')[2]).css("left", createStatsPorcentage((get_risk_med+get_risk_low),total_risk)+"%");
  $($('#pgStep4 .pgStep__users-stats-text-row-value')[3]).css("left", "0%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-text-row-value')[3]).css("left", "0%");
  $($('#pgStep4 .pgStep__users-stats-text-row-value')[4]).css("left", createStatsPorcentage(get_consequences_low,total_cons)+"%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-text-row-value')[4]).css("left", createStatsPorcentage(get_consequences_low,total_cons)+"%");
  $($('#pgStep4 .pgStep__users-stats-text-row-value')[5]).css("left", createStatsPorcentage((get_consequences_low+get_consequences_med),total_cons)+"%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-text-row-value')[5]).css("left", createStatsPorcentage((get_consequences_low+get_consequences_med),total_cons)+"%");

  $($('#pgStep4 .pgStep__users-stats-text-row-value')[0]).css("width", createStatsPorcentage(get_risk_low,total_risk)+"%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-text-row-value')[0]).css("width", createStatsPorcentage(get_risk_low,total_risk)+"%");
  $($('#pgStep4 .pgStep__users-stats-text-row-value')[1]).css("width", createStatsPorcentage(get_risk_med,total_risk)+"%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-text-row-value')[1]).css("width", createStatsPorcentage(get_risk_med,total_risk)+"%");
  $($('#pgStep4 .pgStep__users-stats-text-row-value')[2]).css("width", createStatsPorcentage(get_risk_high,total_risk)+"%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-text-row-value')[2]).css("width", createStatsPorcentage(get_risk_high,total_risk)+"%");
  $($('#pgStep4 .pgStep__users-stats-text-row-value')[3]).css("width", createStatsPorcentage(get_consequences_low,total_cons)+"%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-text-row-value')[3]).css("width", createStatsPorcentage(get_consequences_low,total_cons)+"%");
  $($('#pgStep4 .pgStep__users-stats-text-row-value')[4]).css("width", createStatsPorcentage(get_consequences_med,total_cons)+"%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-text-row-value')[4]).css("width", createStatsPorcentage(get_consequences_med,total_cons)+"%");
  $($('#pgStep4 .pgStep__users-stats-text-row-value')[5]).css("width", createStatsPorcentage(get_consequences_high,total_cons)+"%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-text-row-value')[5]).css("width", createStatsPorcentage(get_consequences_high,total_cons)+"%");

  var mediumWord = "MEDIUM ";
  if ($(window).width() < 520) {
    mediumWord = "MED "
  }

  $($('#pgStep4 .pgStep__users-stats-text-row-value')[0]).html("LOW " + createStatsPorcentage(get_risk_low,total_risk) + "%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-text-row-value')[0]).html("LOW " + createStatsPorcentage(get_risk_low,total_risk) + "%");
  $($('#pgStep4 .pgStep__users-stats-text-row-value')[1]).html(mediumWord + createStatsPorcentage(get_risk_med,total_risk) + "%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-text-row-value')[1]).html(mediumWord + createStatsPorcentage(get_risk_med,total_risk) + "%");
  $($('#pgStep4 .pgStep__users-stats-text-row-value')[2]).html("HIGH " + createStatsPorcentage(get_risk_high,total_risk) + "%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-text-row-value')[2]).html("HIGH " + createStatsPorcentage(get_risk_high,total_risk) + "%");
  $($('#pgStep4 .pgStep__users-stats-text-row-value')[3]).html("LOW " + createStatsPorcentage(get_consequences_low,total_cons) + "%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-text-row-value')[3]).html("LOW " + createStatsPorcentage(get_consequences_low,total_cons) + "%");
  $($('#pgStep4 .pgStep__users-stats-text-row-value')[4]).html(mediumWord + createStatsPorcentage(get_consequences_med,total_cons) + "%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-text-row-value')[4]).html(mediumWord + createStatsPorcentage(get_consequences_med,total_cons) + "%");
  $($('#pgStep4 .pgStep__users-stats-text-row-value')[5]).html("HIGH " + createStatsPorcentage(get_consequences_high,total_cons) + "%");
  $($('.pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-text-row-value')[5]).html("HIGH " + createStatsPorcentage(get_consequences_high,total_cons) + "%");

  $(".pgStep__users-stats-text-row-value").css("opacity", "1.0");

  $(".pgStep__users-stats-marker").css("opacity", 1.0);
  $(".pgStep__users-stats-marker").css("display", "block");

  switch (markerLeft) {
    case 0.315:
      switch (markerTop) {
        case 20:
          markerLeft = createStatsPorcentage(get_risk_low,total_risk) * 0.5;
          markerTop = createStatsPorcentage((get_consequences_low+get_consequences_med),total_cons) + (createStatsPorcentage(get_consequences_high,total_cons) * 0.5);
          risk_value = 3;
          consequence_value = 1;
        break;
        case 15:
          markerLeft = createStatsPorcentage(get_risk_low,total_risk) * 0.5;
          markerTop = createStatsPorcentage(get_consequences_low,total_cons) + (createStatsPorcentage(get_consequences_med,total_cons) * 0.875);
          risk_value = 2;
          consequence_value = 1;
        break;
        case 10:
          markerLeft = createStatsPorcentage(get_risk_low,total_risk) * 0.5;
          markerTop = createStatsPorcentage(get_consequences_low,total_cons) + (createStatsPorcentage(get_consequences_med,total_cons) * 0.5);
          risk_value = 2;
          consequence_value = 1;
        break;
        case 5:
          markerLeft = createStatsPorcentage(get_risk_low,total_risk) * 0.5;
          markerTop = createStatsPorcentage(get_consequences_low,total_cons) + (createStatsPorcentage(get_consequences_med,total_cons) * 0.125);
          risk_value = 2;
          consequence_value = 1;
        break;
        case 0:
          markerLeft = createStatsPorcentage(get_risk_low,total_risk) * 0.5;
          markerTop = createStatsPorcentage(get_consequences_low,total_cons) * 0.5;
          risk_value = 1;
          consequence_value = 1;
        break;
      }
    break;
    case 0.405:
      switch (markerTop) {
        case 20:
          markerLeft = createStatsPorcentage(get_risk_low,total_risk) + (createStatsPorcentage(get_risk_med,total_risk) * 0.125);
          markerTop = createStatsPorcentage((get_consequences_low+get_consequences_med),total_cons) + (createStatsPorcentage(get_consequences_high,total_cons) * 0.5);
          risk_value = 3;
          consequence_value = 2;
        break;
        case 15:
          markerLeft = createStatsPorcentage(get_risk_low,total_risk) + (createStatsPorcentage(get_risk_med,total_risk) * 0.125);
          markerTop = createStatsPorcentage(get_consequences_low,total_cons) + (createStatsPorcentage(get_consequences_med,total_cons) * 0.875);
          risk_value = 2;
          consequence_value = 2;
        break;
        case 10:
          markerLeft = createStatsPorcentage(get_risk_low,total_risk) + (createStatsPorcentage(get_risk_med,total_risk) * 0.125);
          markerTop = createStatsPorcentage(get_consequences_low,total_cons) + (createStatsPorcentage(get_consequences_med,total_cons) * 0.5);
          risk_value = 2;
          consequence_value = 2;
        break;
        case 5:
          markerLeft = createStatsPorcentage(get_risk_low,total_risk) + (createStatsPorcentage(get_risk_med,total_risk) * 0.125);
          markerTop = createStatsPorcentage(get_consequences_low,total_cons) + (createStatsPorcentage(get_consequences_med,total_cons) * 0.125);
          risk_value = 2;
          consequence_value = 2;
        break;
        case 0:
          markerLeft = createStatsPorcentage(get_risk_low,total_risk) + (createStatsPorcentage(get_risk_med,total_risk) * 0.125);
          markerTop = createStatsPorcentage(get_consequences_low,total_cons) * 0.5;
          risk_value = 1;
          consequence_value = 2;
        break;
      }
    break;
    case 0.5:
      switch (markerTop) {
        case 20:
          markerLeft = createStatsPorcentage(get_risk_low,total_risk) + (createStatsPorcentage(get_risk_med,total_risk) * 0.5);
          markerTop = createStatsPorcentage((get_consequences_low+get_consequences_med),total_cons) + (createStatsPorcentage(get_consequences_high,total_cons) * 0.5);
          risk_value = 3;
          consequence_value = 2;
        break;
        case 15:
          markerLeft = createStatsPorcentage(get_risk_low,total_risk) + (createStatsPorcentage(get_risk_med,total_risk) * 0.5);
          markerTop = createStatsPorcentage(get_consequences_low,total_cons) + (createStatsPorcentage(get_consequences_med,total_cons) * 0.875);
          risk_value = 2;
          consequence_value = 2;
        break;
        case 10:
          markerLeft = createStatsPorcentage(get_risk_low,total_risk) + (createStatsPorcentage(get_risk_med,total_risk) * 0.5);
          markerTop = createStatsPorcentage(get_consequences_low,total_cons) + (createStatsPorcentage(get_consequences_med,total_cons) * 0.5);
          risk_value = 2;
          consequence_value = 2;
        break;
        case 5:
          markerLeft = createStatsPorcentage(get_risk_low,total_risk) + (createStatsPorcentage(get_risk_med,total_risk) * 0.5);
          markerTop = createStatsPorcentage(get_consequences_low,total_cons) + (createStatsPorcentage(get_consequences_med,total_cons) * 0.125);
          risk_value = 2;
          consequence_value = 2;
        break;
        case 0:
          markerLeft = createStatsPorcentage(get_risk_low,total_risk) + (createStatsPorcentage(get_risk_med,total_risk) * 0.5);
          markerTop = createStatsPorcentage(get_consequences_low,total_cons) * 0.5;
          risk_value = 1;
          consequence_value = 2;
        break;
      }
    break;
    case 0.595:
      switch (markerTop) {
        case 20:
          markerLeft = createStatsPorcentage(get_risk_low,total_risk) + (createStatsPorcentage(get_risk_med,total_risk) * 0.875);
          markerTop = createStatsPorcentage((get_consequences_low+get_consequences_med),total_cons) + (createStatsPorcentage(get_consequences_high,total_cons) * 0.5);
          risk_value = 3;
          consequence_value = 2;
        break;
        case 15:
          markerLeft = createStatsPorcentage(get_risk_low,total_risk) + (createStatsPorcentage(get_risk_med,total_risk) * 0.875);
          markerTop = createStatsPorcentage(get_consequences_low,total_cons) + (createStatsPorcentage(get_consequences_med,total_cons) * 0.875);
          risk_value = 2;
          consequence_value = 2;
        break;
        case 10:
          markerLeft = createStatsPorcentage(get_risk_low,total_risk) + (createStatsPorcentage(get_risk_med,total_risk) * 0.875);
          markerTop = createStatsPorcentage(get_consequences_low,total_cons) + (createStatsPorcentage(get_consequences_med,total_cons) * 0.5);
          risk_value = 2;
          consequence_value = 2;
        break;
        case 5:
          markerLeft = createStatsPorcentage(get_risk_low,total_risk) + (createStatsPorcentage(get_risk_med,total_risk) * 0.875);
          markerTop = createStatsPorcentage(get_consequences_low,total_cons) + (createStatsPorcentage(get_consequences_med,total_cons) * 0.125);
          risk_value = 2;
          consequence_value = 2;
        break;
        case 0:
          markerLeft = createStatsPorcentage(get_risk_low,total_risk) + (createStatsPorcentage(get_risk_med,total_risk) * 0.875);
          markerTop = createStatsPorcentage(get_consequences_low,total_cons) * 0.5;
          risk_value = 1;
          consequence_value = 2;
        break;
      }
    break;
    case 0.685:
      switch (markerTop) {
        case 20:
          markerLeft = createStatsPorcentage((get_risk_med+get_risk_low),total_risk) + (createStatsPorcentage(get_risk_high,total_risk) * 0.5);
          markerTop = createStatsPorcentage((get_consequences_low+get_consequences_med),total_cons) + (createStatsPorcentage(get_consequences_high,total_cons) * 0.5);
          risk_value = 3;
          consequence_value = 3;
        break;
        case 15:
          markerLeft = createStatsPorcentage((get_risk_med+get_risk_low),total_risk) + (createStatsPorcentage(get_risk_high,total_risk) * 0.5);
          markerTop = createStatsPorcentage(get_consequences_low,total_cons) + (createStatsPorcentage(get_consequences_med,total_cons) * 0.875);
          risk_value = 2;
          consequence_value = 3;
        break;
        case 10:
          markerLeft = createStatsPorcentage((get_risk_med+get_risk_low),total_risk) + (createStatsPorcentage(get_risk_high,total_risk) * 0.5);
          markerTop = createStatsPorcentage(get_consequences_low,total_cons) + (createStatsPorcentage(get_consequences_med,total_cons) * 0.5);
          risk_value = 2;
          consequence_value = 3;
        break;
        case 5:
          markerLeft = createStatsPorcentage((get_risk_med+get_risk_low),total_risk) + (createStatsPorcentage(get_risk_high,total_risk) * 0.5);
          markerTop = createStatsPorcentage(get_consequences_low,total_cons) + (createStatsPorcentage(get_consequences_med,total_cons) * 0.125);
          risk_value = 2;
          consequence_value = 3;
        break;
        case 0:
          markerLeft = createStatsPorcentage((get_risk_med+get_risk_low),total_risk) + (createStatsPorcentage(get_risk_high,total_risk) * 0.5);
          markerTop = createStatsPorcentage(get_consequences_low,total_cons) * 0.5;
          risk_value = 1;
          consequence_value = 3;
        break;
      }
    break;
  }

  //Send information to de database
  var meta = {
      "formData": {
        "occurance_0" : risk_value,
        //leave "spelled"" this way
        "consequenses_1" : consequence_value
      },
      "mediasets": [],
      "documentSets": [],
      "videoSets": [],
      "customerId": "5522b596832147513ecf731a",
      "appId": "5734cbea0c51e72f60b22ffa",
      "accountId": "53c935be7304a04920d58910",
      "paramObject": {},
      "createdDate": "2015-09-09T14:07:49.834Z",
      "submitted" : true, 
      "approved" : "Pending", 
      "isDraft" : false
    };
    
    console.debug('!!!!!POSTING!!!!');

  var $xhr = $.ajax({
      type    : 'POST',
      url     : "https://sub.washingtonpost.com/submission",
      data: JSON.stringify(meta),
      contentType: "application/json; charset=utf-8",
      dataType: "json"
    });

    $xhr.success(function(data) {
     console.debug('success')
     console.debug(data)
    });
    
    $xhr.error(function(e){
     console.debug('Error');
     console.debug(e);
    })

  $($("#pgStep4 .pgStep__users-stats-marker")[0]).css("left", parseInt(markerLeft) + "%");
  $($(".pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-marker")[0]).css("left", parseInt(markerLeft) + "%");

  setTimeout(function() {
    $($(".pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-marker")[0]).css("display", "block");
  }, 100);

  var offsetX = 2.5;

  if (markerTop > 10) {
    offsetX = -2.5;
  }
  else if (markerTop > 10) {
    offsetX = 2.5;
  }
  else {
    offsetX = 0;
  }

  offsetX = 0;

  $($("#pgStep4 .pgStep__users-stats-marker")[1]).css("left", parseInt(markerTop) + "%");
  $($(".pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-marker")[1]).css("left", parseInt(markerTop) + "%");

  setTimeout(function() {
    $($(".pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-marker")[1]).css("display", "block");
  }, 100);

  $("#horizontal-conclusions-button .pg-button").removeAttr("disabled");
  $(document).on("click", '#horizontal-conclusions-button .pg-button:not([disabled="disabled"])', function() {
    $('.pgChart').animate({
      scrollLeft: $('#pgStep4').position().left + ($('#pgStep4').width() * 2.0)
    }, 2000);
  });

  $('.pgConclusions-sharebar-wrapper').css("visibility", "visible");
  $('.pgConclusions-sharebar-wrapper a[data-service="facebook"]').click(function() {
    var risk = "";

    if (risk_value == 1) {
      risk = "low";
    }
    else if (risk_value == 2) {
      risk = "mid";
    }
    else {
      risk = "high";
    } q

    var url = window.location.href;
    var text = "I did the Zika test in the Washington Post and got that I have a "+risk+" risk of getting the virus. Assess your risk in " + url;

    FB.ui({
      method: 'share',
      href: url,
      quote: text
    }, function(response){});

  });
  $('.pgConclusions-sharebar-wrapper a[data-service="twitter"]').click(function() {
    var risk = "";

    if (risk_value == 1) {
      risk = "low";
    }
    else if (risk_value == 2) {
      risk = "mid";
    }
    else {
      risk = "high";
    }

    var url = window.location.href;
    var text = "I did the Zika test in the @washingtonpost and got that I have a "+ risk +" risk of getting the virus. Assess your risk at " + url;
    window.open('https://twitter.com/share?text=' + text ,'share_twitter','width=550, height=350, scrollbars=no');
  });

};

/**
  Funcion de reescalado
  
  @method resize
*/

rtime = new Date(1, 1, 2000, 12, 00, 00);
timeout = false;
delta = 2;
var scrollLeft = 0;
var oldWidth = 0;
var markerMarginTop = -1;
var isDesktopSize = true;

$(window).on("resize", function() {
    rtime = new Date();
    if (timeout === false) {
        timeout = true;
        scrollLeft = $(".pgChart").scrollLeft();
        oldWidth = $(".pgArticle").width();
        setTimeout(resizeend, delta);
    }

    if (isDesktopSize && $(window).width() < tabletTreshold + 20) {
      isDesktopSize = false;
      updateMosquitosPaths();
    }
    else if (!isDesktopSize && $(window).width() >= tabletTreshold + 20) {
      isDesktopSize = true;
      updateMosquitosPaths();
    }
});

function resizeend() {
    if (new Date() - rtime < delta) {
        setTimeout(main.resizeend, delta);
    } else {
      timeout = false;
      //setupCanvas(); 
      if ($(".pgArticle").width() < tabletTreshold) {
        canvas.width = $('.horizontal-background img').width();
        canvas.height = $('.horizontal-background img').height();
        canvas.style.width  = canvas.width.toString() + "px";
        canvas.style.height = canvas.height.toString() + "px";
      }
      else {
        canvas.width = $('.pgChart-wrapper').width();
        canvas.height = $('.pgChart-wrapper').height();
        canvas.style.width  = canvas.width.toString() + "px";
        canvas.style.height = canvas.height.toString() + "px";
      }

      if ($(window).width() < 520) {
        $($(".pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-text-row-value")[1]).html("MED 15%");
        $($(".pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-text-row-value")[5]).html("MED 15%");
      }
      else {
        $($(".pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-text-row-value")[1]).html("MEDIUM 15%");
        $($(".pgStep__last-chart-horizontal-wrapper .pgStep__users-stats-text-row-value")[5]).html("MEDIUM 15%");
      }
    }
}

var updateMosquitosPaths = function() {
  context.clearRect(0, 0, context.canvas.width, context.canvas.height);
  mosquitosArray.forEach(function(element,index,array){
    switch (element.currentMosquitoPhase) {
      case 0:
        element.positionsArray = new Array();
        var auxPositionsArray = mosquitosPositionsPhase1[index%mosquitosPositionsPhase1.length];

          auxPositionsArray = shuffle(auxPositionsArray);
          
          auxPositionsArray.forEach(function(element2,index2,array2) {
            var auxElement = {x: element2.x + (((Math.random() * 0.1) - 0.05) * 1.0), y: element2.y + (((Math.random() * 0.1) - 0.05) * 1.0)};
            auxElement.x = Math.max(0.51, Math.min(0.95, auxElement.x)) + 0.02;
            auxElement.y = Math.max(0.1, Math.min(0.3, auxElement.y));

            if (!isDesktopSize) {
              auxElement.x = auxElement.x;
              auxElement.y = auxElement.y + 0.27;
            }
            else {
              if (auxElement.y <= 0.1 && auxElement.x <= 0.49) {
                auxElement.x = auxElement.x + 0.2;
              }
            }
            element.positionsArray.push(auxElement);
          });
      break;
      case 1:
        if ($(".pgArticle").width() < tabletTreshold) {
            element.positionsArray = mosquitosPositionsPhase2S[0];
          }
          else {
            element.positionsArray = mosquitosPositionsPhase2[0];
          }

          if (!($(".pgArticle").width() < tabletTreshold)) {
            element.positionsArray.forEach(function(element2,index2,array2) {
              element2.x = element2.x + (((Math.random() * 0.1) - 0.05) * 0.003);
              element2.y = element2.y + (((Math.random() * 0.1) - 0.05) * 0.003);
              element.positionsArray[index2] = element2;
            });
          }
      break;
      case 2:
         if ($(".pgArticle").width() < tabletTreshold) {
              var auxPositionsArray = mosquitosPositionsPhase3S[index%mosquitosPositionsPhase3S.length];
            }
            else {
              var auxPositionsArray = mosquitosPositionsPhase3[index%mosquitosPositionsPhase3.length];
            }

            auxPositionsArray = shuffle(auxPositionsArray);
            element.positionsArray = new Array();
            auxPositionsArray.forEach(function(element2,index2,array2) {
              if ($(".pgArticle").width() < tabletTreshold) {
                element.positionsArray.push(element2);
              }
              else {
                var auxElement = {x: element2.x + (((Math.random() * 0.1) - 0.05) * 1.0), y: element2.y + (((Math.random() * 0.1) - 0.05) * 1.0)};
                auxElement.x = Math.max(0.086,Math.min(0.135, auxElement.x)) + 0.01;
                auxElement.y = Math.max(0.555,Math.min(0.715, auxElement.y)) + 0.04;
                element.positionsArray.push(auxElement);
              }
            });
      break;
      case 3:
        if ($(".pgArticle").width() < tabletTreshold) {
          element.positionsArray = mosquitosPositionsPhase4S[0];
        }
        else {
          element.positionsArray = mosquitosPositionsPhase4[0];
        }

        if ($(".pgArticle").width() < tabletTreshold) {
          element.positionsArray.forEach(function(element2,index2,array2) {
            element2.x = element2.x + (((Math.random() * 0.1) - 0.05) * 0.0007);
            element2.y = element2.y + (((Math.random() * 0.1) - 0.05) * 0.0007);
            element.positionsArray[index2] = element2;
          });
        }
      break;
      case 4:
        element.currentPosition = 0;
        var auxPositionsArray = mosquitosPositionsPhase5[index%mosquitosPositionsPhase5.length];

        if ($(".pgArticle").width() < tabletTreshold) {
          auxPositionsArray = mosquitosPositionsPhase5S[index%mosquitosPositionsPhase5S.length];
        }

        auxPositionsArray = shuffle(auxPositionsArray);
        element.positionsArray = new Array();
        auxPositionsArray.forEach(function(element2,index2,array2) {
          if ($(".pgArticle").width() < tabletTreshold) {
            element.positionsArray.push(element2);
          }
          else {
            var auxElement = {x: element2.x + (((Math.random() * 0.1) - 0.05) * 1.0), y: element2.y + (((Math.random() * 0.1) - 0.05) * 1.0)};
            auxElement.x = Math.max(0.076,Math.min(0.15, auxElement.x)) + 0.01;
            auxElement.y = Math.max(0.81,Math.min(0.86, auxElement.y)) + 0.05;
            if (auxElement.x >= 0.14 || auxElement.x <= 0.087) {
              if (auxElement.y <= 0.82) {
                auxElement.y = auxElement.y + 0.04;
              }
              else if (auxElement.y >= 0.83) {
                auxElement.y = auxElement.y - 0.02;
              }
            }
            element.positionsArray.push(auxElement);
          }
        });
      break;
      case 5:
      break;
      case 6:
        element.currentPosition = 0;
        currentPhase = 3;

        if (index == mosquitosLeft - 1) {
          $("#pgStep2 .pg-button").removeAttr("disabled");
          $("#pgStep2").removeAttr("disabled");
        }

        var auxPositionsArray = mosquitosPositionsPhase7[index%mosquitosPositionsPhase7.length];

        if ($(".pgArticle").width() < tabletTreshold) {
          auxPositionsArray = mosquitosPositionsPhase7S[index%mosquitosPositionsPhase7S.length];
        }

        auxPositionsArray = shuffle(auxPositionsArray);
        element.positionsArray = new Array();
        auxPositionsArray.forEach(function(element2,index2,array2) {
          var auxElement = {x: element2.x + (((Math.random() * 0.1) - 0.05) * 1.0), y: element2.y + (((Math.random() * 0.1) - 0.05) * 1.0)};
          if (auxElement.x >= 0.42 || auxElement.x <= 0.39) {
            if (auxElement.y <= 1.206610169491526) {
              auxElement.y = 1.20;
            }
            else if (auxElement.y >= 1.28) {
              auxElement.y = 1.28;
            }
          }
          if (auxElement.x >= 0.49) {
              auxElement.x = 0.49
            }
            if (auxElement.x <= 0.36) {
              auxElement.x = 0.36
            }
            if (auxElement.y >= 1.3) {
              auxElement.y = 1.3
            }
            if (auxElement.y <= 1.19) {
              auxElement.y = 1.19
            }
          element.positionsArray.push(auxElement);
        });
      break;
      case 7:
        if (index > auxMosquitosLeft) {
          element.positionsArray = new Array();
          if ($(".pgArticle").width() < tabletTreshold) {
            for (var i = 0; i < mosquitosPositionsPhase4S[0].length; i++) {
              element.positionsArray.push(mosquitosPositionsPhase4S[0][i]);
            };
            for (var i = 0; i < mosquitosPositionsPhase6S[0].length; i++) {
              element.positionsArray.push(mosquitosPositionsPhase6S[0][i]);
            }
            for (var i = 0; i < mosquitosPositionsPhase8S[0].length; i++) {
              element.positionsArray.push(mosquitosPositionsPhase8S[0][i]);
            }
          }
          else {
            for (var i = 0; i < mosquitosPositionsPhase4[0].length; i++) {
              element.positionsArray.push(mosquitosPositionsPhase4[0][i]);
            };
            for (var i = 0; i < mosquitosPositionsPhase6[0].length; i++) {
              element.positionsArray.push(mosquitosPositionsPhase6[0][i]);
            }
            for (var i = 0; i < mosquitosPositionsPhase8[0].length; i++) {
              element.positionsArray.push(mosquitosPositionsPhase8[0][i]);
            }
          }
        }
        else {
          element.positionsArray = new Array();
          if ($(".pgArticle").width() < tabletTreshold) {
            for (var i = 0; i < mosquitosPositionsPhase6S[0].length; i++) {
              element.positionsArray.push(mosquitosPositionsPhase6S[0][i]);
            }
            for (var i = 0; i < mosquitosPositionsPhase8S[0].length; i++) {
              element.positionsArray.push(mosquitosPositionsPhase8S[0][i]);
            }
          }
          else {
            for (var i = 0; i < mosquitosPositionsPhase6[0].length; i++) {
              element.positionsArray.push(mosquitosPositionsPhase6[0][i]);
            }
            for (var i = 0; i < mosquitosPositionsPhase8[0].length; i++) {
              element.positionsArray.push(mosquitosPositionsPhase8[0][i]);
            }
          }
          
        }

        element.positionsArray.forEach(function(element2,index2,array2) {
          element2.x = element2.x /*+ (((Math.random() * 0.1) - 0.05) * 0.0003)*/;
          element2.y = element2.y /*+ (((Math.random() * 0.1) - 0.05) * 0.0003)*/;
          element.positionsArray[index2] = element2;
        });
      break;
      case 8:
        var auxPositionsArray = mosquitosPositionsPhase9[index%mosquitosPositionsPhase9.length];

        if ($(".pgArticle").width() < tabletTreshold) {
          auxPositionsArray = mosquitosPositionsPhase9S[index%mosquitosPositionsPhase9S.length];
        }

        if ($(".pgArticle").width() < tabletTreshold) {
          var auxPositionsArray = mosquitosPositionsPhase9S[index%mosquitosPositionsPhase9S.length];
        }
        auxPositionsArray = shuffle(auxPositionsArray);
        element.positionsArray = new Array();
        auxPositionsArray.forEach(function(element2,index2,array2) {
          if ($(".pgArticle").width() < tabletTreshold) {
            element.positionsArray.push(element2);
          }
          else {
            var auxElement = {x: element2.x + (((Math.random() * 0.01) - 0.005) * 1.0), y: element2.y + (((Math.random() * 0.01) - 0.005) * 1.0)};
            if (auxElement.x >= 0.885 || auxElement.x <= 0.806) {
              if (auxElement.y <= 1.487) {
                auxElement.y = 1.487;
              }
              else if (auxElement.y >= 1.558) {
                auxElement.y = 1.558;
              }
            }
            if (auxElement.x >= 0.898) {
                auxElement.x = 0.898;
              }
              if (auxElement.x <= 0.79) {
                auxElement.x = 0.79;
              }
              if (auxElement.y >= 1.57) {
                auxElement.y = 1.57;
              }
              if (auxElement.y <= 1.47) {
                auxElement.y = 1.47;
              }
              auxElement.x = auxElement.x + 0.057;
              auxElement.y = auxElement.y + 0.115;
            element.positionsArray.push(auxElement);
          }
        });
      break;
      case 9:
      break;
      case 10:
        element.currentPosition = 0;
        
        if (index == mosquitosLeft - 1) {
          $("#pgStep3 .pg-button").removeAttr("disabled");
          $("#pgStep3").removeAttr("disabled");
        }

        var auxPositionsArray = mosquitosPositionsPhase11[index%mosquitosPositionsPhase11.length];

        if ($(".pgArticle").width() < tabletTreshold) {
          auxPositionsArray = mosquitosPositionsPhase11S[index%mosquitosPositionsPhase11S.length];
        }

        auxPositionsArray = shuffle(auxPositionsArray);
        element.positionsArray = new Array();
        auxPositionsArray.forEach(function(element2,index2,array2) {
          if ($(".pgArticle").width() < tabletTreshold) {
            element.positionsArray.push(element2);
          }
          else {
            var auxElement = {x: element2.x + (((Math.random() * 0.01) - 0.005) * 1.0) - 0.018, y: element2.y + (((Math.random() * 0.001) - 0.0005) * 1.0)};
            element.positionsArray.push(auxElement);
          }
        });
      break;
      case 11:
        element.positionsArray = new Array();

        if ($(".pgArticle").width() < tabletTreshold) {
          for (var i = 0; i < mosquitosPositionsPhase10S[0].length; i++) {
            element.positionsArray.push(mosquitosPositionsPhase10S[0][i]);
          }
          for (var i = 0; i < mosquitosPositionsPhase12S[0].length; i++) {
            element.positionsArray.push(mosquitosPositionsPhase12S[0][i]);
          }
        }
        else {
          for (var i = 0; i < mosquitosPositionsPhase10[0].length; i++) {
            element.positionsArray.push(mosquitosPositionsPhase10[0][i]);
          }
          for (var i = 0; i < mosquitosPositionsPhase12[0].length; i++) {
            element.positionsArray.push(mosquitosPositionsPhase12[0][i]);
          }
        }

        element.positionsArray.forEach(function(element2,index2,array2) {
          if ($(".pgArticle").width() < tabletTreshold) {
            element.positionsArray[index2] = element2;
          }
          else {
            element2.x = element2.x + (((Math.random() * 0.1) - 0.05) * 0.003);
            element2.y = element2.y + (((Math.random() * 0.1) - 0.05) * 0.003);
            element.positionsArray[index2] = element2;
          }
        });
      break;
      case 12:
        element.currentPosition = 0;
        
        if (index == mosquitosLeft - 1) {
          $("#pgStep3 .pg-button").attr("disabled", "disabled");
          $("#pgStep3").attr("disabled", "disabled");

          $(".pgQuestion__body__binary-option").removeClass("disabled-option");
          $('#pgQuestion-container3 .pg-button').removeAttr("disabled");
          $('#pgQuestion-container3').removeAttr("disabled");
        }

        var auxPositionsArray = mosquitosPositionsPhase13[index%mosquitosPositionsPhase13.length];

        if ($(".pgArticle").width() < tabletTreshold) {
          auxPositionsArray = mosquitosPositionsPhase13S[index%mosquitosPositionsPhase13S.length];
        }

        auxPositionsArray = shuffle(auxPositionsArray);
        element.positionsArray = new Array();
        auxPositionsArray.forEach(function(element2,index2,array2) {
          if ($(".pgArticle").width() < tabletTreshold) {
            element.positionsArray.push(element2);
          }
          else {
            var auxElement = {x: element2.x + (((Math.random() * 0.001) - 0.0005) * 1.0) + 0.005, y: element2.y + (((Math.random() * 0.01) - 0.005) * 1.0) - 0.01 + 0.275};
            element.positionsArray.push(auxElement);
          }
        });
      break;
      case 13:
        // add delay
        element.positionsArray = mosquitosPositionsPhase14[0];

        if ($(".pgArticle").width() < tabletTreshold) {
          element.positionsArray = mosquitosPositionsPhase14S[0];
        }

        element.positionsArray.forEach(function(element2,index2,array2) {
          if ($(".pgArticle").width() < tabletTreshold) {
            element.positionsArray[index2] = element2;
          }
          else {
            element2.x = element2.x + (((Math.random() * 0.1) - 0.05) * 0.0007);
            element2.y = element2.y + (((Math.random() * 0.1) - 0.05) * 0.0007);
            element.positionsArray[index2] = element2;
          }
        });
      break;
      case 14:
        var auxPositionsArray = mosquitosPositionsPhase15[index%mosquitosPositionsPhase15.length];

        if ($(".pgArticle").width() < tabletTreshold) {
          auxPositionsArray = mosquitosPositionsPhase15S[index%mosquitosPositionsPhase15S.length];
        }

        auxPositionsArray = shuffle(auxPositionsArray);
        element.positionsArray = new Array();
        auxPositionsArray.forEach(function(element2,index2,array2) {
          if ($(".pgArticle").width() < tabletTreshold) {
            element.positionsArray.push(element2);
          }
          else {
            var auxElement = {x: element2.x + (((Math.random() * 0.001) - 0.0005) * 1.0) + 0.005, y: element2.y + (((Math.random() * 0.01) - 0.005) * 1.0) - 0.01 + 0.275};
            element.positionsArray.push(auxElement);
          }
        });
      break;
      case 15:
        element.positionsArray = mosquitosPositionsPhase16[0];

        if ($(".pgArticle").width() < tabletTreshold) {
          element.positionsArray = mosquitosPositionsPhase16S[0];
        }

        element.positionsArray.forEach(function(element2,index2,array2) {
          if ($(".pgArticle").width() < tabletTreshold) {
            element.positionsArray[index2] = element2;
          }
          else {
            element2.x = element2.x + (((Math.random() * 0.1) - 0.05) * 0.0007);
            element2.y = element2.y + (((Math.random() * 0.1) - 0.05) * 0.0007);
            element.positionsArray[index2] = element2;
          }
        });
      break;
      case 16:
        element.currentPosition = 0;

        var auxPositionsArray = mosquitosPositionsPhase17[index%mosquitosPositionsPhase17.length];

        if ($(".pgArticle").width() < tabletTreshold) {
          auxPositionsArray = mosquitosPositionsPhase17S[index%mosquitosPositionsPhase17S.length];
        }

        auxPositionsArray = shuffle(auxPositionsArray);
        element.positionsArray = new Array();
        auxPositionsArray.forEach(function(element2,index2,array2) {
          if ($(".pgArticle").width() < tabletTreshold) {
            element.positionsArray.push(element2);
          }
          else {
            var auxElement = {x: element2.x + (((Math.random() * 0.001) - 0.0005) * 1.0) + 0.005, y: element2.y + (((Math.random() * 0.01) - 0.005) * 1.0) + 0.275};
            element.positionsArray.push(auxElement);
          }
        });
      break;
      case 17:
        if ($(".pgArticle").width() < tabletTreshold) {
          element.positionsArray = mosquitosPositionsPhase18S[0];
        }
        else {
          element.positionsArray = mosquitosPositionsPhase18[0];
        }

        element.positionsArray.forEach(function(element2,index2,array2) {
          if ($(".pgArticle").width() < tabletTreshold) {
            element.positionsArray[index2] = element2;
          }
          else {
            element2.x = element2.x + (((Math.random() * 0.1) - 0.05) * 0.003);
            element2.y = element2.y + (((Math.random() * 0.1) - 0.05) * 0.003);
            element.positionsArray[index2] = element2;
          }
        });
      break;
      case 18:
        element.currentPosition = 0;

        var auxPositionsArray = mosquitosPositionsPhase19[index%mosquitosPositionsPhase19.length];

        if ($(".pgArticle").width() < tabletTreshold) {
          auxPositionsArray = mosquitosPositionsPhase19S[index%mosquitosPositionsPhase19S.length];
        }

        auxPositionsArray = shuffle(auxPositionsArray);
        element.positionsArray = new Array();
        auxPositionsArray.forEach(function(element2,index2,array2) {
          if ($(".pgArticle").width() < tabletTreshold) {
            //element2.y = element2.y - 0.005;
            element.positionsArray.push(element2);
          }
          else {
            var auxElement = {x: element2.x + (((Math.random() * 0.01) - 0.005) * 1.0), y: element2.y + (((Math.random() * 0.01) - 0.005) * 1.0) + 0.37};
            element.positionsArray.push(auxElement);
          }
        });
      break;
      case 19:
        element.positionsArray = mosquitosPositionsPhase20[0];

        if ($(".pgArticle").width() < tabletTreshold) {
          element.positionsArray = mosquitosPositionsPhase20S[0];
        }

        element.positionsArray.forEach(function(element2,index2,array2) {
          if ($(".pgArticle").width() < tabletTreshold) {
            element.positionsArray[index2] = element2;
          }
          else {
            element2.x = element2.x + (((Math.random() * 0.1) - 0.05) * 0.003);
            element2.y = element2.y + (((Math.random() * 0.1) - 0.05) * 0.003);
            element.positionsArray[index2] = element2;
          }
        });
      break;
      case 20:
        element.currentPosition = 0;

        var auxPositionsArray = mosquitosPositionsPhase21[index%mosquitosPositionsPhase21.length];

        if ($(".pgArticle").width() < tabletTreshold) {
          auxPositionsArray = mosquitosPositionsPhase21S[index%mosquitosPositionsPhase21S.length];
        }

        auxPositionsArray = shuffle(auxPositionsArray);
        element.positionsArray = new Array();
        auxPositionsArray.forEach(function(element2,index2,array2) {
          if ($(".pgArticle").width() < tabletTreshold) {
            //element2.y = element2.y - 0.005;
            element.positionsArray.push(element2);
          }
          else {
            var auxElement = {x: element2.x + (((Math.random() * 0.01) - 0.005) * 1.0), y: element2.y + (((Math.random() * 0.01) - 0.005) * 1.0) + 0.37};
            element.positionsArray.push(auxElement);
          }
        });
      break;
      case 21:
        markerMarginTop = (20 - newY);

        if ($(".pgArticle").width() < tabletTreshold) {
          $('.pgStep__last-chart-marker').css("top", newYS+ "%");
          $('.pgStep__last-chart-marker').css("left",  (newXS * 100) + "%");
        }
        else {
          $('.pgStep__last-chart-marker').css("margin-top",  newRealY+ "%");
          $('.pgStep__last-chart-marker').css("left",  (newX * 100) + "%");
        }

        createUsersStats(newX, newY, cell);

        markerPos = $('#pgStep4 .pgStep__last-chart-marker').position();

        var newPositionsArray = new Array({x: markerPos.left / canvas.width, y: ((markerPos.top + parseInt($('#pgStep4 .pgStep__last-chart-marker').css("margin-top"))) + $('#pgStep4 .pgStep__last-chart').position().top + $('#pgStep4 .pgStep__last-chart-marker').height()) / canvas.width});

        if ($(".pgArticle").width() < tabletTreshold) {
          markerPos = $('.pgStep__last-chart-horizontal-wrapper .pgStep__last-chart-marker').position();
          newPositionsArray = new Array({x: ((markerPos.left + $('.pgStep__last-chart-horizontal-wrapper').position().left + parseInt($('.pgStep__last-chart-horizontal-wrapper').css("margin-left"))) / 0.125 ) / canvas.width, y: (( (markerPos.top + $('.pgStep__last-chart-marker').height() + parseInt($(".pgStep__last-chart-horizontal-wrapper").css("margin-top")) ) + (($("#mosquitosCanvas").height() - $('.pgStep__last-chart-horizontal-wrapper').height()) / 2.0) ) / 0.125) / canvas.width});
          
          /*setTimeout(function() {
              if ($(".pgArticle").width() <= 736 && $("#horizontal-conclusions-button").css("display") == "none") {
                $('.pgChart').animate({
                  scrollLeft: $('.pgConclusions').position().left
                }, 2500);
              }
          }, 3000);*/
        }
      break;
      case 22:
        // 21
        markerMarginTop = (20 - newY);

        if ($(".pgArticle").width() < tabletTreshold) {
          $('.pgStep__last-chart-marker').css("top", newYS+ "%");
          $('.pgStep__last-chart-marker').css("left",  (newXS * 100) + "%");
        }
        else {
          $('.pgStep__last-chart-marker').css("margin-top",  newRealY+ "%");
          $('.pgStep__last-chart-marker').css("left",  (newX * 100) + "%");
        }
        createUsersStats(newX, newY, cell);

        markerPos = $('#pgStep4 .pgStep__last-chart-marker').position();

        var newPositionsArray = new Array({x: markerPos.left / canvas.width, y: ((markerPos.top + parseInt($('#pgStep4 .pgStep__last-chart-marker').css("margin-top"))) + $('#pgStep4 .pgStep__last-chart').position().top + $('#pgStep4 .pgStep__last-chart-marker').height()) / canvas.width});


        if ($(".pgArticle").width() < tabletTreshold) {
          markerPos = $('.pgStep__last-chart-horizontal-wrapper .pgStep__last-chart-marker').position();
          newPositionsArray = new Array({x: ((markerPos.left + $('.pgStep__last-chart-horizontal-wrapper').position().left + parseInt($('.pgStep__last-chart-horizontal-wrapper').css("margin-left"))) / 0.125 ) / canvas.width, y: (( (markerPos.top + $('.pgStep__last-chart-marker').height() + parseInt($(".pgStep__last-chart-horizontal-wrapper").css("margin-top")) ) + (($("#mosquitosCanvas").height() - $('.pgStep__last-chart-horizontal-wrapper').height()) / 2.0) ) / 0.125) / canvas.width});
          
          setTimeout(function() {
              if ($(".pgArticle").width() <= 736 && $("#horizontal-conclusions-button").css("display") == "none") {
                $('.pgChart').animate({
                  scrollLeft: $('.pgConclusions').position().left
                }, 2500);
              }
          }, 3000);
        }

        element.positionsArray = new Array(element.positionsArray[0],element.positionsArray[0],element.positionsArray[0],element.positionsArray[0],element.positionsArray[0], element.positionsArray[0],element.positionsArray[0],element.positionsArray[0],element.positionsArray[0],element.positionsArray[0])

        for (var i = 0; i < 20; i++) {
            element.positionsArray.push({x: element.positionsArray[0].x + ((Math.random() * 0.066) - 0.033), y: element.positionsArray[0].y + ((Math.random() * 0.066) - 0.033)});
        }
      break;
    }

    element.currentPosition = Math.floor(Math.random() * element.positionsArray.length);
    element.x = element.positionsArray[element.currentPosition].x;
    element.y = element.positionsArray[element.currentPosition].y;

    var nextPosition = element.currentPosition + 1;
    if (nextPosition >= element.positionsArray.length) {
      nextPosition = 0;
    }

    if (element.x > element.positionsArray[nextPosition].x) {
      element.xDir = false;
    }
    else {
      element.xDir = true;
    }
    if (element.y > element.positionsArray[nextPosition].y) {
      element.yDir = false;
    }
    else {
      element.yDir = true;
    }
  });
}

var H = $(".pgArticle").width(),
 S = $(".pgChart").scrollLeft(),
 P = S/H;

$(document).ready(function() {
  if ($(window).width() >= tabletTreshold + 20) {
    isDesktopSize = true;
  }
  else {
    isDesktopSize = false;
  }
  $(".pgChart").scroll(function() {
    S = $(".pgChart").scrollLeft();
    P = S/H;
  });

  $(window).resize(function() {
      H = $(".pgArticle").width();
      $(".pgChart").scrollLeft(P*H);
      $('#resize-warning').css("width", $(".pgChart").width() + "px");
      $('#resize-warning').css("height", $(".pgChart").height() + "px");
  });

  $('#resize-warning').css("width", $(".pgChart").width() + "px");
  $('#resize-warning').css("height", $(".pgChart").height() + "px");

  //Set up needed functions
  manageQuestionsScroll();
  manageStepsAction();
  selectOption();
  selectBinaryOption();
  selectPregnancyOption();
  animateElementsPregnancy();
  animateBehaviorElements();
  setTimeout(function() {
    //setupCanvas();
    setupMosquitos();
    H = $(".pgArticle").width();
    S = $(".pgChart").scrollLeft();
    P = S/H;
  }, 500);
  setupMainLoop();

  /*$(document).on("click", function(e) {
    //console.log('{x:'+((e.pageX/$("canvas").width()) - 0.195) + ', y:' + (((e.pageY - 564)/$("canvas").width())) + '}');
    var x = e.pageX - $('#mosquitosCanvas').offset().left;
    var y = e.pageY - $('#mosquitosCanvas').offset().top;

    console.log('{x:'+(((x / 0.125)/$("canvas").width())) + ', y:' + (((y / 0.125)/$("canvas").width())) + '}');
  });*/
});
